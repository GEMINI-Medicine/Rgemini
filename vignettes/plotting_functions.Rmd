---
title: "Plotting GEMINI data"
output:
  html_vignette:
    number_sections: true
    toc: true
    dfprint: kable

vignette: >
  %\VignetteIndexEntry{Plotting GEMINI data}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}

---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)

library(dplyr)
library(data.table)

# remove all of these later...
library(Rgemini)
library(sn)
library(MCMCpack)
library(lubridate)
library(ggplot2)
library(ggpubr)
source("H:/GitHub/Rgemini/R/dummy_data.R") 

options(knitr.kable.NA = '')

```

# Introduction

`Rgemini` contains several functions that facilitate common plotting needs and allow users to create customized, publication-ready figures with just a few lines of code.

 ...


# Set-up

## Creating dummy data 

The plotting examples shown below are based on variables from the "ipadmdad" table. Typically, you would query this table from the GEMINI database, but for illustration purposes, let's create some dummy data using the `Rgemini` function `dummy_ipadmdad`. 

Here, we are simulating a GEMINI "ipadmdad" table with 10,000 encounters from 20 different hospitals and with discharge dates ranging from fiscal years 2015 to 2022:

```{r, warning=FALSE, message=FALSE}
n_encounters <- 10000
n_hospitals <- 20
time_period <- c(2015,2022)
set.seed(999)

ipadmdad <- dummy_ipadmdad(n_encounters, n_hospitals, time_period, plot = FALSE)

```

```{r, echo=FALSE, results='asis'}
cat(paste0('Currently, this function only simulates a subset of variables in the "ipadmdad" table, namely: ', paste(colnames(ipadmdad), collapse = ", "), '.'))
```


# Plotting functions in Rgemini 

## Plot histograms of multiple variables

... code currently embedded in `dummy_ipadmdad`, planning to move this to a separate function...

```{r, out.width = "80%", fig.align = "center"}
ipadmdad <- dummy_ipadmdad(n_encounters, n_hospitals, time_period, plot = TRUE)

```

## Plot by hospital

```{r}


```


## Plot by time and hospital


```{r}


```


## Grouping by hospital type

e.g., academic vs. community hospital (need to add hospital_type first because this is not part of admdad table)

```{r}


```


## Standardizing plot appearance

```{r}


```





