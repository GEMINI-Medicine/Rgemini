<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>R Functions for GEMINI Data • Rgemini</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="R Functions for GEMINI Data">
<meta name="description" content="Common functions for GEMINI data analyses.">
<meta property="og:description" content="Common functions for GEMINI data analyses.">
<meta property="og:image" content="https://gemini-medicine.github.io/Rgemini/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">Rgemini</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/cell_suppression_and_table1.html">Cell Suppression and Table 1</a></li>
    <li><a class="dropdown-item" href="articles/daily_census.html">Daily Census</a></li>
    <li><a class="dropdown-item" href="articles/data_coverage.html">Data Coverage</a></li>
    <li><a class="dropdown-item" href="articles/epicare_and_readmission.html">Episodes of care and Readmission</a></li>
    <li><a class="dropdown-item" href="articles/icd_to_ccsr.html">ICD to CCSR</a></li>
    <li><a class="dropdown-item" href="articles/pharmacy_mapping.html">RxNorm and Pharmacy Mapping</a></li>
    <li><a class="dropdown-item" href="articles/plotting_data_exploration.html">Plotting Functions - Easy Plots for Data Exploration</a></li>
    <li><a class="dropdown-item" href="articles/plotting_theme.html">Plotting Functions - Themes &amp; Colors</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="rgemini-">Rgemini 
<a class="anchor" aria-label="anchor" href="#rgemini-"></a>
</h1>
</div>
<!-- badges: start -->

<!-- badges: end -->
<p><code>Rgemini</code> (“Our GEMINI”) is a custom R package that provides a variety of functions to perform data analyses with <a href="https://www.geminimedicine.ca/" class="external-link">GEMINI</a> data. All functions have been developed by the GEMINI team and were tested on the current version of the <a href="https://geminimedicine.ca/the-gemini-database/#data-dictionary" class="external-link">GEMINI database</a>.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p><code>Rgemini</code> is currently not yet available on CRAN. Please follow the installation instructions below, depending on the environment you work in (HPC4Health or other).</p>
<div class="section level3">
<h3 id="hpc4health">HPC4Health<a class="anchor" aria-label="anchor" href="#hpc4health"></a>
</h3>
<p>The <code>Rgemini</code> package is automatically installed for all HPC4Health users working with GEMINI data. If you run into any issues using <code>Rgemini</code> functions or require a specific package version, please submit a ticket on HPC4Health.</p>
</div>
<div class="section level3">
<h3 id="other-users">Other users<a class="anchor" aria-label="anchor" href="#other-users"></a>
</h3>
<p>All other users can install the package from GitHub using the following:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"GEMINI-Medicine/Rgemini"</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>You can also specify <code>build_vignettes = TRUE</code> to include all package vignettes. However, in that case, make sure to install any additional packages required for the vignettes (see packages listed under “Suggests” <a href="https://github.com/GEMINI-Medicine/Rgemini/blob/main/DESCRIPTION" class="external-link">here</a>). Alternatively, you can review the knitted vignettes <a href="https://gemini-medicine.github.io/Rgemini/articles/">here</a>.</p>
<p>If the installation instructions from above don’t work, you can <code>git clone</code> the <code>Rgemini</code> repository from the <code>main</code> branch, and then run <code>devtools::install("/path/to/repo", repos = NULL, type="source")</code>. Alternatively, you can try one of the following:</p>
<ol style="list-style-type: decimal">
<li>Install using <code>pak::pkg_install("GEMINI-Medicine/Rgemini")</code>.</li>
<li>Download the latest source tarball from the <a href="https://github.com/GEMINI-Medicine/Rgemini/tags" class="external-link">package releases</a> to some directory such as <code>/path/to/tarball</code> and run <code>install.packages("/path/to/tarball", repos = NULL, type = "source")</code>.</li>
<li>Try configuring secure downloads as described in <a href="https://support.posit.co/hc/en-us/articles/206827897-Secure-Package-Downloads-for-R37" class="external-link">this blog post</a>.</li>
</ol>
<p>If none of the above methods work, please create a post on our <a href="https://github.com/GEMINI-Medicine/Rgemini/discussions/categories/q-a" class="external-link">discussion board</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Some functions require access to the GEMINI database. With access, the functions can be used as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gemini-medicine.github.io/Rgemini/">Rgemini</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># establish DB connection</span></span>
<span><span class="va">drv</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbDriver.html" class="external-link">dbDriver</a></span><span class="op">(</span><span class="st">"PostgreSQL"</span><span class="op">)</span></span>
<span><span class="va">db</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span></span>
<span>  <span class="va">drv</span>,</span>
<span>  dbname <span class="op">=</span> <span class="st">"db_name"</span>,</span>
<span>  host <span class="op">=</span> <span class="st">"domain_name.ca"</span>,</span>
<span>  port <span class="op">=</span> <span class="fl">1234</span>,</span>
<span>  user <span class="op">=</span> <span class="fu">getPass</span><span class="fu">::</span><span class="fu">getPass</span><span class="op">(</span><span class="st">"Enter Username"</span><span class="op">)</span>,</span>
<span>  password <span class="op">=</span> <span class="fu">getPass</span><span class="fu">::</span><span class="fu">getPass</span><span class="op">(</span><span class="st">"Enter Password"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For HPC4Health users: For newer datacuts (H4H &gt;= v4.0.0) set the schema according to the datacut name</span></span>
<span><span class="fu">dbSendQuery</span><span class="op">(</span><span class="va">db</span>, <span class="st">"Set schema 'datacut_name'"</span><span class="op">)</span>;</span>
<span></span>
<span><span class="co"># query data</span></span>
<span><span class="va">admdad</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbGetQuery.html" class="external-link">dbGetQuery</a></span><span class="op">(</span></span>
<span>  <span class="va">db</span>,</span>
<span>  <span class="st">"SELECT * FROM admdad LIMIT 200;"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># run Rgemini function</span></span>
<span><span class="va">readm</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/readmission.html">readmission</a></span><span class="op">(</span></span>
<span>  db <span class="op">=</span> <span class="va">db</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Please review the extensive <a href="https://gemini-medicine.github.io/Rgemini/">package documentation</a> and vignettes for detailed examples and sample code.</p>
</div>
<div class="section level2">
<h2 id="using-rgemini-in-python">Using Rgemini in Python<a class="anchor" aria-label="anchor" href="#using-rgemini-in-python"></a>
</h2>
<p><code>Rgemini</code> can be used in Python via the <code>rpy2</code> package, which provides an interface to R from Python. This allows Python users to access Rgemini functions while working in their preferred environment.</p>
<div class="section level3">
<h3 id="installation-and-setup">Installation and Setup<a class="anchor" aria-label="anchor" href="#installation-and-setup"></a>
</h3>
<p>First, install <code>rpy2</code> in your Python environment:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">pip</span> install rpy2</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-usage">Example Usage<a class="anchor" aria-label="anchor" href="#example-usage"></a>
</h3>
<p>Here’s how to use Rgemini functions in Python:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="im">import</span> rpy2.robjects <span class="im">as</span> robjects</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="im">from</span> rpy2.robjects.packages <span class="im">import</span> importr</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co"># Import R packages</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>base <span class="op">=</span> importr(<span class="st">'base'</span>)</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>rgemini <span class="op">=</span> importr(<span class="st">'Rgemini'</span>)</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="co"># Example: Using the lunique function</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>r_vector <span class="op">=</span> robjects.IntVector([<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>])</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>result <span class="op">=</span> rgemini.lunique(r_vector)</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Number of unique values: </span><span class="sc">{</span>result[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div>
<p><a href="https://github.com/GEMINI-Medicine/Rgemini/discussions/200" class="external-link">Here</a> is how to use Rgemini functions in R snippets in Python.</p>
</div>
<div class="section level3">
<h3 id="important-limitations-and-disclaimers">Important Limitations and Disclaimers<a class="anchor" aria-label="anchor" href="#important-limitations-and-disclaimers"></a>
</h3>
<p><strong>Testing Coverage</strong>: Python compatibility has only been tested for functions that have unit tests in the R package. To check which functions have test coverage, review the test files in the <a href="https://github.com/GEMINI-Medicine/Rgemini/tree/main/tests/testthat" class="external-link"><code>tests/testthat/</code></a> directory.</p>
<p><strong>Use with Caution</strong>: Even for functions where unit tests exist, users should exercise caution when running Rgemini in Python. The unit tests may not cover all possible use cases or edge conditions. We strongly recommend performing additional validation checks to ensure function outputs are correct for your specific data and use case.</p>
<p><strong>Data Type Considerations</strong>: Be aware that data types may behave differently between R and Python. Pay special attention to how dates, factors, and missing values are handled when transferring data between the two environments.</p>
</div>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>Currently, only GEMINI team members can directly contribute to this package. However, we invite all users to share their feedback and suggestions with us so we can continue to improve <code>Rgemini</code>.</p>
<p>If you identify any package bugs or would like to request enhancements, please open a <a href="https://github.com/GEMINI-Medicine/Rgemini/issues" class="external-link">GitHub issue</a>. We have also activated the GitHub <a href="https://github.com/GEMINI-Medicine/Rgemini/discussions" class="external-link">discussion forum</a> for you to submit any questions about package functionality or discuss applications of <code>Rgemini</code> functions to your research question. Note that the repository is public, so please do not share any sensitive information and/or GEMINI data on the GitHub site!</p>
<p>For GEMINI team members: Please carefully review the <a href="https://github.com/GEMINI-Medicine/Rgemini/blob/main/CONTRIBUTING.md" class="external-link">CONTRIBUTING.md</a> file for guidelines on how to contribute and review code.</p>
</div>
<div class="section level2">
<h2 id="package-versions">Package versions<a class="anchor" aria-label="anchor" href="#package-versions"></a>
</h2>
<p>Different versions of <code>Rgemini</code> are released with X.Y.Z. increments following these conventions:</p>
<ul>
<li>
<code>Z</code>: Patch version, bug fixes, documentation, tests, changing argument defaults, optimizing the internals of a function without affecting the external interface (argument names etc).</li>
<li>
<code>Y</code>: Minor version, new function added, some large changes to existing functions (including even changes to the type and number of arguments).</li>
<li>
<code>X</code>: Major version, change to the underlying DB the code was written for (e.g., table and variable names).</li>
</ul>
<p>Usually we accumulate a series of changes on develop and release them all at once on <code>main</code> with a version increment.</p>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>If you find <code>Rgemini</code> useful, please cite it in your publications using <code>citation("Rgemini")</code>:</p>
<blockquote>
<p>The GEMINI team (2023). Rgemini: R Functions for GEMINI Data. R package version <version_number>. <a href="https://gemini-medicine.github.io/Rgemini/" class="uri">https://gemini-medicine.github.io/Rgemini/</a></version_number></p>
</blockquote>
<p>Note that particular functions may require additional citations. Please consult the references in function-specific documentation whenever applicable.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing Rgemini</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li> GEMINI <br><small class="roles"> Maintainer </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/GEMINI-Medicine/Rgemini/actions/workflows/check-standard.yaml" class="external-link"><img src="https://github.com/GEMINI-Medicine/Rgemini/actions/workflows/check-standard.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by GEMINI.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
