[{"path":"https://gemini-medicine.github.io/Rgemini/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"How to contribute to Rgemini","title":"How to contribute to Rgemini","text":"welcome contributions Rgemini GEMINI team members. submit suggestions bug fixes/enhancements, please create new issue providing sufficient details bug report/feature request.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/CONTRIBUTING.html","id":"code-development","dir":"","previous_headings":"","what":"Code development","title":"How to contribute to Rgemini","text":"make changes Rgemini codebase/documentation, please follow steps: Create new issue assign existing issue want work . Create new branch develop. branch name contain issue number. Commit changes newly created branch include issue number commit message. finish code development, add new item top NEWS.md concisely describing ’s changed. appropriate, add unit tests tests/testthat/ directory. bug fixes, ’s usually helpful include unit test identified bug. adding new functions new documentation, update _pkgdown.yml file adding new function appropriate reference section. Note Rgemini repository currently CI/CD workflow generate commit documentation pushed commit, devtools::document() can also run development debug locally. Note new package data saved .rda file data/ directory, documented roxygen data.R. Functions derived based published articles (e.g. clinical scores) include references section roxygen. citation format : 1st_author_last_name 1st_author_initial, et al. Journal Abbreviation, Year. https://doi.org/xxxx.. URLs presented -without hyperlinking DOI URLs used whenever possible. Note commonly known online resources (e.g. links CIHI documentations, data dictionary) might require references section can included hyperlinks roxygen section. Submit pull request (PR) develop branch. Ask team member review changes (see guidelines reviewers ) implement additional changes based reviewer’s feedback. reviewer approved pull request, resolve merge conflicts CI/CD errors. Finally, squash commits (confirm PR # referenced squash commit message) merge branch develop, close issue, delete branch developed .","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/CONTRIBUTING.html","id":"reviewing-code","dir":"","previous_headings":"","what":"Reviewing code","title":"How to contribute to Rgemini","text":"pull requests (PRs) carefully reviewed least one person. detailed instructions look review, please refer Code Review Checklist. Briefly, reviewing code: Assign reviewer PR (go “Pull requests” -> click PR -> click “assign ” “Reviewers”). Pull updated code branch associated issue. can also install package specific branch using remotes::install_github(\"GEMINI-Medicine/Rgemini@<branch_name>\") Make sure can run code without error messages. Check produces expected outcome resolves issue. possible, review line code changed/added provide feedback anything think improved. comment individual lines code, go “Pull requests” -> click PR -> “Files changed” -> + add comments. can also share general feedback submit review, use “Conversation” section PR discuss open questions developer throughout review process. Please share feedback GitHub (instead slack/email) transparency make sure previous discussions well documented. reviewer, usually push changes code , instead, mention suggestions review developer responsible implementing changes. developer addressed comments, approve pull request (developer merge PR close issue).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/CONTRIBUTING.html","id":"merging-into-master","dir":"","previous_headings":"","what":"Merging into master","title":"How to contribute to Rgemini","text":"typically accumulate multiple changes develop branch merging changes master updating package version number. least one person review pull request master run following final checks approval: Check whether changes master yet develop. yes, merge master develop. Make sure changes develop summarized NEWS.md. new functions added, make sure listed _pkgdown.yml. Decide new version number based guidelines . Update version number NEWS.md DESCRIPTION files. Run devtools::document() R make sure documentation date. Run rcmdcheck::rcmdcheck() devtools::check() make sure errors warnings returned. everything looks good, approve pull request merge develop master (without squashing commits). Add new tag repository corresponding updated version number. Notify team updated version. Ideally, members immediately update newest version Rgemini. Update HPC4Health users: Download tar.gz file newest package version save R:/GEMINI/HPC4Health/Rgemini versions/. Submit request HPC4Health File Transfer Log package file transferred /mnt/nfs/pkgs/GEMINI/. Ask systems team send email HPC4Health users announcing new release.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2023 Rgemini authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Cell Suppression and Table 1","text":"Cell suppression technique withhold “suppress” confidential identifying data tabular formats. common practice clinical epidemiological research present table baseline patient characteristics study population. commonly referred Table 1. order preserve patient privacy reduce risk re-identification, GEMINI employs cell suppression strategy Table 1 published shared externally. general rule hide subgroup fewer 6 patients (<= 5). special cases discussed detail . Note exists variety methods produce Table 1. examples: table1 Benjamin Rich tableone Kazuki Yoshida packages provide functionality, neither implement cell suppression. Due design table1, chosen candidate added functionality, implemented various functions described .","code":""},{"path":[]},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"dummy-data","dir":"Articles","previous_headings":"Setup","what":"Dummy data","title":"Cell Suppression and Table 1","text":"vignette, create dummy dataset summarize:","code":"set.seed(3)  gender <- c(sample(c(\"M\", \"F\"), size = 95, replace = TRUE), rep(NA, times = 5))  exposure <- sample(   c(\"pre-pandemic\", \"pandemic\", \"post-pandemic\"),    size = 100, replace = TRUE   )  age <- rnorm(100, mean = 70, sd = 5)  condition <- sample(   c(\"DVT\", \"CVD\", \"DM\", \"Pneumonia\", \"Dementia\"),    size = 100, replace = TRUE, prob = c(0.01, 0.20, 0.4, 0.35, 0.05)   )  data <- data.frame(gender = gender, exposure = exposure, age = age, condition = condition)"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"using-table1","dir":"Articles","previous_headings":"Setup","what":"Using table1","title":"Cell Suppression and Table 1","text":"Although vignette linked provides -depth exploration table1 functionality, review function simple example . summarize available patient characteristics, stratifying exposure variable:   Note patients particular conditions can easily identified, sometimes precision exact patient (patient DVT pre-pandemic). goal vignette show protect patients’ privacy.","code":"library(table1)  table1(~ gender + age + condition | exposure, data = data)"},{"path":[]},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"default","dir":"Articles","previous_headings":"Cell suppression","what":"Default","title":"Cell Suppression and Table 1","text":"order perform cell suppression table1(), Rgemini exports render_cell_suppression.default().   Important conceptual notes: True zeros suppressed. True zeros risk identifying patient, therefore hide valuable information bring risk re-identification. Cells originally 6 patients also suppressed. Consider group patients post-pandemic subgroup. Note patients CVD post-pandemic suppressed even though originally seven patients subgroup. ? suppressed patients DVT (one patient), knowing total number patients post-pandemic (37), reverse-calculated number patients DVT (reasonable precision). Therefore algorithm designed continue suppressing successively larger groups total number suppressed patients six , reverse-calculated reasonable precision. default option shows desired behaviour conservative respect patient privacy.","code":"library(Rgemini) ## Error in get(paste0(generic, \".\", class), envir = get_method_env()) :  ##   object 'type_sum.accel' not found table1(   ~ gender + age + condition | exposure,    data = data,    render = render_cell_suppression.default   )"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"customizing-output-for-continuous-variables---change-to-medians","dir":"Articles","previous_headings":"Cell suppression","what":"Customizing output for continuous variables - change to medians","title":"Cell Suppression and Table 1","text":"can specify whether use median mean continuous variables specifying continuous_fn.   Note however can render medians without enabling cell suppression, desired.   can also specify render function particular variable type:  ","code":"table1(   ~ gender + age + condition | exposure,    data = data,    render = render_cell_suppression.default,    continuous_fn = 'median'   ) table1(   ~ gender + age + condition | exposure,    data = data,    render.continuous = render_median.continuous   ) table1(   ~ gender + age + condition | exposure,    data = data,    render.continuous = render_cell_suppression.continuous,    continuous_fn = 'median'   )"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"finer-control","dir":"Articles","previous_headings":"Cell suppression","what":"Finer control","title":"Cell Suppression and Table 1","text":"render_cell_suppression.default wrapper around individual render functions covariate datatype. finer control, use primary cell suppression functionality implemented following render functions: render_cell_suppression.categorical() render_cell_suppression.continuous() render_cell_suppression.discrete() render_cell_suppression.missing() render_cell_suppression.strat() can apply cell suppression directly covariates particular data types supplying custom renderer functions.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"suppress-categorical-variables-only","dir":"Articles","previous_headings":"Cell suppression > Finer control","what":"Suppress categorical variables only","title":"Cell Suppression and Table 1","text":"  may also want display single level binary variables (gender). can optional single_level_binary variable.","code":"table1(   ~ gender + age + condition | exposure,    data = data,    render.categorical = render_cell_suppression.categorical   ) table1(   ~ gender + age + condition | exposure,    data = data,    render.categorical = render_cell_suppression.categorical,   single_level_binary = TRUE   )"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"suppress-cells-with-counts-fewer-than-six-only","dir":"Articles","previous_headings":"Cell suppression > Finer control","what":"Suppress cells with counts fewer than six only","title":"Cell Suppression and Table 1","text":"Although default option shows desired behaviour, Rgemini can export function simply suppress cells counts fewer six needed.  ","code":"table1(   ~ gender + age + condition | exposure,    data = data,    render.categorical = render_strict_cell_suppression.categorical   )"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"suppress-missing-values","dir":"Articles","previous_headings":"Cell suppression > Finer control","what":"Suppress missing values","title":"Cell Suppression and Table 1","text":"Note suppress missing values, use render_cell_suppression.missing() function:   Note issue . Although able suppress cells counts less six gender missing, obvious count (.e. can easily reverse calculated). One approach deal actually code missing gender values new category variable, apply conservative render_cell_suppression.categorical().   Although might make much practical sense case, approach taken categorical variable missing values like employ conservative cell suppression strategy patient privacy.","code":"table1(   ~ gender + age + condition | exposure,    data = data,    render.categorical = render_strict_cell_suppression.categorical,   render.missing = render_cell_suppression.missing   ) levels(data$gender) <- c(\"M\", \"F\", \"Not Available\") data$gender[is.na(data$gender)] <- \"Not Available\"  table1(   ~ gender + age + condition | exposure,    data = data,    render.categorical = render_cell_suppression.categorical   )"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"strategies-to-suppress-continuous-variables","dir":"Articles","previous_headings":"Cell suppression > Finer control","what":"Strategies to suppress continuous variables","title":"Cell Suppression and Table 1","text":"also possible suppress continuous variables desired. See example .","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"set-up","dir":"Articles","previous_headings":"Cell suppression > Finer control > Strategies to suppress continuous variables","what":"Set up","title":"Cell Suppression and Table 1","text":" ","code":"set.seed(1)  continuous_data <- data.frame(   \"age\" = rnorm(100, mean = 70, sd = 10),   \"laps\" = abs(rnorm(100, mean = 1, sd = 1)),   \"nobel\" = sample(c(\"nobel prize won\", \"nobel prize not won\"), 100, replace = TRUE, prob = c(0.01, 0.99)) )  table1(~ age + laps | nobel, data = continuous_data)"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"suppress-continuous-variables","dir":"Articles","previous_headings":"Cell suppression > Finer control > Strategies to suppress continuous variables","what":"Suppress continuous variables","title":"Cell Suppression and Table 1","text":"use render_cell_suppression.continuous suppress summary statistics groups size smaller six.   Note case however, using strata totals can reverse-calculate number patients, suppress counts strata well using render_cell_suppression.strat.","code":"table1(   ~ age + laps | nobel,    data = continuous_data,    render.continuous = render_cell_suppression.continuous   )"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"suppress-counts-in-the-strata","dir":"Articles","previous_headings":"Cell suppression > Finer control > Strategies to suppress continuous variables","what":"Suppress counts in the strata","title":"Cell Suppression and Table 1","text":" ","code":"table1(   ~ age + laps | nobel,    data = continuous_data,    render.continuous = render_cell_suppression.continuous,   render.strat = render_cell_suppression.strat   )"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"suppress-overall-count","dir":"Articles","previous_headings":"Cell suppression > Finer control > Strategies to suppress continuous variables","what":"Suppress “Overall” count","title":"Cell Suppression and Table 1","text":"encounter similar issue can reverse calculate strata total using overall count. Therefore scenario consider removing “Overall” count:   Important conceptual notes: don’t employ strategy stratification variables categorical variables, successively suppress additional strata total number suppressed individuals six . categorical variable six observations category indirectly provide total strata. Therefore safest apply strict suppression strata totals, remove “Overall” column shown .","code":"table1(   ~ age + laps | nobel,    data = continuous_data,    render.continuous = render_cell_suppression.continuous,   render.strat = render_cell_suppression.strat,   overall = FALSE   )"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"rounding","dir":"Articles","previous_headings":"Cell suppression","what":"Rounding","title":"Cell Suppression and Table 1","text":"can also specify number digits round means, medians, percentages using digits argument. Note table1 exposes default digits argument.   However, default behaviour table1 round total number digits (otherwise known “significant digits”) value digits. design, Rgemini render functions round digits decimal place value digits. means, combining default table1 render functions Rgemini render functions, mismatch way rounding handled (default).   Note continuous variables (using default table1 render function), rounded five significant digits, categorical variables (use Rgemini's render function), rounded five digits decimal place. generally discouraged use cell suppression variable types others, can synchronize behaviour two render functions supplying argument rounding.fn = round_pad, tell table1 render functions use digits digits decimal place.  ","code":"table1(   ~ gender + age + condition | exposure,    data = data,   digits = 2   ) table1(   ~ gender + age + condition | exposure,    data = data,   render.categorical = render_cell_suppression.categorical,   #render.continuous = render.continuous, <- this is implicitly using table1's default continuous rendering function   digits = 5   ) table1(   ~ gender + age + condition | exposure,    data = data,   render.categorical = render_cell_suppression.categorical,   #render.continuous = render.continuous, <- this is implicit   digits = 5,   rounding.fn = round_pad   )"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"calculating-standardized-mean-differences","dir":"Articles","previous_headings":"","what":"Calculating standardized mean differences","title":"Cell Suppression and Table 1","text":"One primary difference tableone table1 ability compute display standardized mean differences (SMDs). enable , Rgemini exports max_pairwise_smd(). Note stratification variable two levels, corresponds absolute value SMD (directionality). stratification two levels, maximum pairwise SMD. can supplied table1 extra.col argument, takes named list extra columns append table. Usage follows:  ","code":"table1(~ gender + age + condition | exposure, data = data, extra.col = list(\"Maximum Standardized Mean Difference\" = max_pairwise_smd))"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"replicating-table1-functionality","dir":"Articles","previous_headings":"","what":"Replicating table1 functionality","title":"Cell Suppression and Table 1","text":"Note since extensions passed arguments table1, entire original API table1 still exposed. Therefore replicate examples .","code":""},{"path":[]},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"change-row-labels","dir":"Articles","previous_headings":"Replicating table1 functionality > Labelling","what":"Change row labels","title":"Cell Suppression and Table 1","text":"change row labels . order , need use default (.e. “non-formula”) interface table1:  ","code":"labels <- list(   variables=list(age=\"Age (years)\", gender=\"Sex\", condition=\"MRDx\")   )  strata <- split(data, data$exposure) table1(strata, labels = labels)"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"change-strata-labels","dir":"Articles","previous_headings":"Replicating table1 functionality > Labelling","what":"Change strata labels","title":"Cell Suppression and Table 1","text":"Next change strata labels. change strata labels change names levels factor variable corresponding strata  ","code":"levels(data$exposure) <- c(\"During Pandemic\", \"After Pandemic\", \"Before Pandemic\") strata <- split(data, data$exposure)  table1(strata, labels = labels)"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"add-grouping-to-strata-and-standardized-mean-differences","dir":"Articles","previous_headings":"Replicating table1 functionality > Labelling","what":"Add grouping to strata and standardized mean differences","title":"Cell Suppression and Table 1","text":"Next also add grouping strata variable, specifying group names labels list, well groupspan used span label multiple groups table1 call. also add standardized mean differences using extra.col put together.  ","code":"labels$groups <- list(\"After COVID\", \"\")  extra_col <- list() extra_col$`SMD` <- max_pairwise_smd  table1(strata, labels = labels, groupspan = c(2, 1), extra.col = extra_col)"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"putting-it-all-together","dir":"Articles","previous_headings":"","what":"Putting it all together","title":"Cell Suppression and Table 1","text":"Now perform custom labeling, cell suppression, adding column standardized mean differences follows:  ","code":"table1(   strata,    labels = labels,   groupspan = c(2, 2),   render = render_cell_suppression.default,   extra.col = list(\"SMD\" = max_pairwise_smd)   )"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"customization-and-extending-functionality","dir":"Articles","previous_headings":"","what":"Customization and extending functionality","title":"Cell Suppression and Table 1","text":"Note table1 offers much flexibility briefly described respect labeling. even possibility fine tune table’s appearance CSS. See examples vignette . also possibility define new render functions new extra columns.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"creating-render-functions","dir":"Articles","previous_headings":"Customization and extending functionality","what":"Creating render functions","title":"Cell Suppression and Table 1","text":"Note render functions must designed take input single argument corresponding vector (numeric factor), output named character vector, first element unnamed always \"\". See examples output formatted:","code":"library(dplyr)  x <- mtcars$am %>% as.factor() render_cell_suppression.categorical(as.factor(mtcars$am)) ##                         0            1  ##           \"\" \"19 (59.4%)\" \"13 (40.6%)\" render_cell_suppression.continuous(1:20) ##                                           Mean (SD)  ##                        \"\" \"10.500 (&plusmn; 5.916)\" render_cell_suppression.missing(c(1:19, NA)) ##                                               Missing  ##                         \"\" \"&lt; 6 obs. (suppressed)\""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/cell_suppression_and_table1.html","id":"creating-extra-columns","dir":"Articles","previous_headings":"Customization and extending functionality","what":"Creating extra columns","title":"Cell Suppression and Table 1","text":"Note functions defined extra columns must always take named list first argument, ellipses (...) last. named list corresponds variable data split stratifying variable, example : Now newly defined function can added extra column.","code":"x <- split(mtcars$disp, mtcars$am)  my_max_col <- function(x, ...) {   lapply(x, max) %>% unlist() %>% max() }  my_max_col(x) ## [1] 472 table1(~ disp | am, data = mtcars, extra.col = list(\"My Max\" = my_max_col))"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/daily_census.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Daily Census","text":"daily_census function calculates number patients hospitalized given hospital day time period interest. census provides cross-sectional count patients occupied hospital bed 8am (default) day. Specifically, calculated number patients admitted time point discharged time point. function also returns capacity_ratio indicating whether number patients given day higher (>1) lower (<1) typical day, default, typical occupancy based median census time period interest. Note: Although function can applied different cohorts research contexts, interpretation function outputs may vary according inputs users provide. example, users pre-filter cohort based certain diagnosis criteria, census counts include patients, similarly, capacity_ratio reflect real indicator capacity, rather measure whether occupancy /typical occupancy certain group patients (also see section group_var input ). Moreover, users use caution analyzing cohorts small sample size including grouping variables can result counts 0 days. case, users need make informed decision whether census = 0 meaningful within context research question, whether days patient counts 0 returned census = NA (.e., days excluded capacity_ratio estimate; also see section include_zero input ).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/daily_census.html","id":"running-daily_census-with-default-arguments","dir":"Articles","previous_headings":"","what":"Running daily_census() with default arguments","title":"Daily Census","text":"run daily_census function, users need provide input table cohort containing encounters part cohort interest. Typically, cohort created based admdad table (subset thereof) GEMINI database. needs contain columns genc_id, hospital_num, admission_date_time, discharge_date_time. example load relevant data run daily_census function default settings: Mock output table (illustration purposes, real data): table shows example output data 5 hospitals April 2016 - April 2017. row corresponds unique combination date_time (reference time 8am, default) hospital ID (hospital_num). census variable indicates count patients occupying bed 8am day given hospital. capacity_ratio refers relative measure bed occupancy, default calculated census/median(census). Based table, users extract information, median daily census hospital study period: Additionally, users plot census capacity_ratio time, separately hospital:   Note capacity_ratio fluctuates around 1 (= typical occupancy) values > 1 correspond days higher occupancy usual.","code":"# Load necessary libraries library(RPostgreSQL) library(DBI) library(getPass)  # Establish database connection db <- DBI::dbConnect(drv,                      dbname = \"DB_name\",                      host = \"172.XX.XX.XXX\",                      port = 1234,                      user = getPass(\"Enter user:\"),                      password = getPass(\"Enter Password:\"))  # query admdad table containing cohort (could be filtered further if necessary) admdad <- dbGetQuery(db, \"SELECT genc_id, hospital_num, admission_date_time, discharge_date_time FROM admdad;\")   # Run default daily_census calculation          census_output <- daily_census(cohort = admdad)   head(census_output, 10) #> Error in get(paste0(generic, \".\", class), envir = get_method_env()) :  #>   object 'type_sum.accel' not found library(data.table) #  we are using data.table operations below, but users could also use tidyverse to analyze the function output  # Compute median census at each site median_census <- census_output[ , .(median_census = median(census)), by = hospital_num] library(ggplot2)  # Plot census over time ggplot(census_output, aes(x=as.Date(date_time), y=census, group = hospital_num, color=hospital_num)) +   geom_line(linewidth=1.5,show.legend = TRUE) +   scale_x_date(name = 'Date', breaks = seq(min(as.Date(census_output$date_time)), max(as.Date(census_output$date_time)), by=\"1 months\"), date_labels = \"%b\\n%Y\") +   ggtitle(\"Mock figure: Daily census by hospital\") + theme_classic() # Plot capacity ratio over time ggplot(census_output, aes(x=as.Date(date_time), y=capacity_ratio, group = hospital_num, color=hospital_num)) +   geom_line(linewidth=1.5,show.legend = TRUE) +   scale_x_date(name = 'Date', breaks = seq(min(as.Date(census_output$date_time)), max(as.Date(census_output$date_time)), by=\"1 months\"), date_labels = \"%b\\n%Y\") +   ggtitle(\"Mock figure: Daily capacity ratio by hospital\") + theme_classic() +   geom_hline(yintercept=1)"},{"path":[]},{"path":"https://gemini-medicine.github.io/Rgemini/articles/daily_census.html","id":"time_period","dir":"Articles","previous_headings":"Optional input arguments","what":"time_period","title":"Daily Census","text":"default, function calculate census whole time period available cohort table. Note data availability may differ hospital, function determine data availability individually site. users want calculate census certain time period within overall cohort, can provide optional time_period input specifying start end date. example, calculate census June 1, 2016 - Dec 31, 2016: Note case, capacity_ratio calculated based typical occupancy observed time period (.e., June-Dec 2016).","code":"# Compute census for specific time period census_output <- daily_census(admdad, time_period = c(\"2016-06-01\",\"2016-12-31\"))"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/daily_census.html","id":"scu_exclude","dir":"Articles","previous_headings":"Optional input arguments","what":"scu_exclude","title":"Daily Census","text":"default, total duration encounter’s hospital stay considered census counts. However, certain projects, may interest exclude time points encounter special care unit (SCU), intensive care (ICU). relevant researchers want analyse bed occupancy particular medical ward (e.g., GIM) want count patients fact occupying bed ward given day, excluding patients SCU. case, users provide scu_exclude table contains SCU encounters excluded census calculation. Note: SCU table typically refers ipscu table GEMINI database, however, users may want filter table relevant scu_unit_numbers excluded census counts. function automatically removes entries scu_unit_number = 99, refers encounters \"SCU\". Additionally, SCU encounters valid scu_admit_date_time scu_discharge_date_time can excluded census. Availability variables low certain cohorts SCU units. Therefore, users advised carefully inspect SCU table make informed decision whether exclude SCU encounters, yes, SCU entries exclude.","code":"# exclude SCU encounters from census scu <- dbGetQuery(db, \"SELECT * FROM ipscu;\")   # Compute census excluding SCU census_output <- daily_census(admdad, scu_exclude = scu)"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/daily_census.html","id":"grouping","dir":"Articles","previous_headings":"Optional input arguments","what":"group_var","title":"Daily Census","text":"default, census calculated separately hospital (hospital_num). Users can specify additional grouping variables obtain patient counts (capacity ratios) subgroups interest, different medical subservices physicians. simple example census grouped patients’ gender age (<65 vs. 65+): Mock output table showing census grouping age & gender categories: Note capacity_ratio mock example interpreted real “capacity” indicator, rather, measure whether given day (>1) less (<1) patients certain age/gender typical day. Capacity_ratio useful grouping variables correspond separate medical entities, different medical subservices wards, capacity_ratio can serve indicator system load vs. capacity. Nevertheless, grouping variables based patient characteristics (age, gender, diagnosis group, illness severity etc.) useful analyse case mix hospitalized patients certain periods time.","code":"# Create age category admdad$age_cat <- ifelse(admdad$age <= 65,'<=65','>65')  # Compute census by gender & age categories census_output <- daily_census(admdad, group_var = c(\"gender\",\"age_cat\"))   head(census_output, 10)"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/daily_census.html","id":"capacity_func","dir":"Articles","previous_headings":"Optional input arguments","what":"capacity_func","title":"Daily Census","text":"default, capacity_ratio defined census/median(census), calculated separately hospital grouping variable (). , capacity_ratio refers daily count patients relative typical bed occupancy, typical bed occupancy defined median census time period interest. Alternatively, users can specify measures central tendency obtain typical occupancy (“mean”, “mode”) estimate capacity based maximum occupancy (“max”).","code":"# Get occupancy relative to max capacity (estimated based on max(census)) census_output <- daily_census(admdad, capacity_func = \"max\")"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/daily_census.html","id":"time_of_day","dir":"Articles","previous_headings":"Optional input arguments","what":"time_of_day","title":"Daily Census","text":"default, census calculated 8am day study period. example, obtain patient counts April 1st, 2016 function counts patients admission_date_time <= '2015-04-01 08:00:00' discharge_date_time >= '2015-04-01 08:00:00'. Users can specify different reference time providing optional time_of_day input:","code":"# Calculate census at 2.30pm each day census_output <- daily_census(admdad, time_of_day = \"14:30:00\")"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/daily_census.html","id":"buffer","dir":"Articles","previous_headings":"Optional input arguments","what":"buffer","title":"Daily Census","text":"time periods towards end data availability timeline given hospital, users may observe pattern similar , census counts suddenly drop end specified time period:  effect due truncation bias can occur end specified time period (April 2018) close last available date overall cohort (e.g., cohort contains encounters April 2018 example). Note cohorts typically defined discharge date. , cohort includes data April 2017 - April 2018, include encounters discharged time. result, may patients admitted last week April 2018, discharged prior end month. Therefore, part cohort, counted towards census. prevent biasing census capacity_ratio estimates, function automatically checks data availability hospital based min max dates cohort input table. data availability ends prior (time ) end time period interest, buffer period 30 days applied default. Specifically, last 30 days site set NA. default setting 30 days based observation vast majority hospital stays < 30 days, therefore, can confident patients hospitalized 30 days prior end specified time period already discharged (.e., included cohort). default setting buffer = 30 result following output, removes truncation bias shown previous figure setting last 30 days time period NA:  Users can specify buffer periods (full days) based cohort (typical length stay observed cohort). example, set buffer period 10 days, run following code: Note: example, users specify time_period input ends 10 days earlier latest available data, buffer period ignored available data used calculate census time period interest. words, actual buffer period applied within function depends combination specified time period, data availability per site, buffer argument order ensure maximum amount available data used census calculation.","code":"# specify buffer of 10 days at end of time period census_output <- daily_census(admdad, buffer = 10)"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/daily_census.html","id":"include_zero","dir":"Articles","previous_headings":"Optional input arguments","what":"include_zero","title":"Daily Census","text":"default, function includes days census = 0 output (include_zero = TRUE). means census counts days considered true 0s (.e., “patient hospitalized”), therefore, 0s included capacity ratio estimate. example, analyzing cohorts patients rare disease, days patients disease hospital conceptually meaningful counted towards typical occupancy. contrast, analyzing daily census counts per physician, days census = 0 likely reflect days given physician service. Therefore, days included estimate physicians’ typical patient volume, thus, users set include_zero FALSE (.e., census counts capacity_ratio returned NA days patient associated given physician).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/daily_census.html","id":"calculating-customized-measures-of-capacity","dir":"Articles","previous_headings":"","what":"Calculating customized measures of capacity","title":"Daily Census","text":"addition flexibility provided function , users may want obtain additional capacity indicators currently supported function. example, researchers may want calculate capacity_ratio relative typical occupancy year--year basis. function calculates capacity_ratio estimating typical (max) capacity based census numbers throughout whole time period. However, census may vary year--year basis. case, users either run daily_census() function separately study year, run function whole time period calculate year--year capacity_ratio based raw census output provided function, e.g.: Similarly, users define indicators typical occupancy currently supported function (e.g., trimmed means).","code":"# calculate capacity_ratio based on median census *per year* census_output[ , year := year(census_output$date_time)] census_output[ , capacity_ratio_yoy := census/median(census), by = c(\"hospital_num\",\"year\")]"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Episodes of care and Readmission","text":"vignette contains detailed information two functions closely related : episodes_of_care() readmission(). episodes_of_care function used readmission calculations order avoid encounters linked via transfers (.e., part episode care) counted readmissions. definitions used functions based CIHI guidelines readmission calculations (see ).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"episodes_of_care","dir":"Articles","previous_headings":"Introduction","what":"episodes_of_care()","title":"Episodes of care and Readmission","text":"function episodes_of_care() links together hospitalizations acute care transfers unique episodes care. hospitalization (genc_id), function returns corresponding: patient_id_hashed, time_to_next_admission, time_since_last_admission, AT_in_coded, AT_out_coded, AT_in_occurred, AT_out_occurred, epicare. Coded Transfers (AT_in_coded, AT_out_occurred): coded acute care transfer refers hospital coding acute care transfers based DAD Institution Institution fields. Specifically, hospitalization coded transfer-AT_in_coded==T, institution_from_type=='' acute_transfer_in=='', vice versa coded transfer . Occurred Transfers (AT_in_occurred, AT_out_occurred): acute care transfer assumed occurred (AT_in_occurred==T, AT_out_occurred==T) either following criteria met: admission medical intensive care service GEMINI hospital within 7 hours discharge another GEMINI hospital, regardless whether transfer coded hospital. admission medical intensive care service GEMINI hospital within 7-12 hours discharge another GEMINI hospital, least 1 hospital coded transfer. Episode Care (epicare): episode care refers contiguous inpatient hospitalizations admitted medical intensive care service within GEMINI network. Contiguous inpatient hospitalizations defined based occurred transfers (AT_in_occurred==T AT_out_occurred==T). Episodes involving inter-facility transfers linked regardless diagnosis. default, episodes care computed hospitalizations admdad table. See Section 3.4 function documentation options compute epicare using user specified cohort. flowchart shows epicares built:  Example output episodes_of_care(db) (mock data illustration purposes, real data):","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"readmission","dir":"Articles","previous_headings":"Introduction","what":"readmission()","title":"Episodes of care and Readmission","text":"function readmission() computes whether patient associated epicare readmitted GEMINI hospital within specified time window. hospitalization (genc_id), function returns corresponding: AT_in_occurred, AT_out_occurred, epicare, readmitX. readmitX boolean variable denoting whether readmission took place time window X-days post-discharge. important realize readmission determined looking forward data future. Therefore, readmitX measurement quality care current episode evaluates whether factors current episode LEAD readmission future. episodes care involving acute care transfers, readmissions attributed LAST hospitalization patient discharged readmission; namely last genc_id episode readmitX assigned, rest set NA. default, records admdad table used calculate readmission. See Section 3.4 function documentation options compute readmission user specified cohort. Mock example output readmission(db) (mock data illustration purposes, real data. patient_id added facilitate interpretation):","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"general-readmission-rate-calculation","dir":"Articles","previous_headings":"Introduction > readmission()","what":"General readmission rate calculation","title":"Episodes of care and Readmission","text":"Denominator Readmission Rate: Total number episodes potential readmitted. various conditions episodes removed denominator. example, episodes discharged death readmitted, therefore, removed denominator readmission rate calculation (see details Section 2 CIHI flags). episode removed Denominator setting readmitX = NA current episode. Numerator Readmission Rate: Number episodes within denominator actually readmitted within time window interest. various conditions episodes removed numerator. example, elective admissions might considered readmissions, therefore, episodes elective admissions removed numerator (see details Section 2 CIHI flags). episode removed Numerator setting readmitX = F preceding episode. example code shows calculate 7-day readmission rate properly using default settings. important note presence NAs returned readmitX variable remember exclude NAs calculating readmission rates:","code":"# Load necessary libraries: library(RPostgreSQL) library(DBI) library(getPass)  # Establish database connection db <- DBI::dbConnect(drv,                      dbname = \"db\",                      host = \"172.XX.XX.XXX\",                      port = 1234,                      user = getPass(\"Enter user:\"))  # Run default readmission calculation (with elective_admit=T and death=T)         readm <- readmission(db)   # Compute readmission rate based on readmission output denominator <- sum( !is.na( readm$readmit7 ) )  numerator <- sum( readm$readmit7, na.rm=T )  readmission_7d_derived <- numerator/denominator  # Compute readmission rate based on readmission output (Alternative) readmission_7d_derived <- mean( readm$readmit7, na.rm=T )"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"gemini-specific-considerations","dir":"Articles","previous_headings":"Introduction > readmission()","what":"GEMINI specific considerations","title":"Episodes of care and Readmission","text":"1. Readmission attribution end episode unknown last hospitalization epicare transfer coded (AT_out_coded==T) time_to_next_admission greater 12 hours infinite, suggests patient likely transferred hospital outside GEMINI network. known certain last hospitalization records last hospitalization epicare reality. avoid inaccurate attribution potential readmission, epicares excluded denominator (readmitX=NA) readmission calculation . rationales : hospitals/medical subservices GEMINI network Transfers coded hospitals typically true transfers rather errors. Hypothetical example special readmission attribution (compare colored entries genc_id 103 vs 301, genc_id 105 vs 201, see readmit7 affected):  2. Buffer period based hospital’s data availability {#sectionBuffer} patient needs discharged hospital appearing GEMINI database. patient readmitted hospital yet discharged time data transferred GEMINI, readmission record captured database. result, readmission rates underestimated time period latest data transfers. mitigate bias, buffer period based data availability hospital applied readmission calculation. episode’s discharge time buffer period, epicare excluded denominator (readmitX=NA) readmission rates. Buffer Period =  [ (Hospital’s last discharge date - Readmission window - Additional 30 days)  , (Hospital’s last discharge date) ] X number days specified readmission window must passed allow X-day readmission occur; 95% hospital admissions discharged within 30 days based GEMINI data. Therefore, patients discharged within buffer period, enough time readmission happen appear database; Since buffer period determined hospital’s data availability, possibility inter-hospital biases addressed. strive minimize potential biases, recognize complete elimination may feasible. Hypothetical example buffer period affects 7-day readmission patient:","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"customizable-features","dir":"Articles","previous_headings":"Introduction > readmission()","what":"Customizable features","title":"Episodes of care and Readmission","text":"CIHI flags: see Section 2 CIHI flags. Readmission time window: default, readmission() function computes 7-day 30-day readmission rates. Users option specify customized time window using readm_win argument. recommend exercise caution customizing readmission window, see Section 3.3 details. Restricted cohort: default, readmissions determined searching data database. may scenarios users want determine readmissions among records within restricted cohort. episodes_of_care() readmission() functions allow users input customized cohort using restricted_cohort argument. recommend exercise caution restricted cohort used, see Section 3.4 details.","code":""},{"path":[]},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"cihi-readmission-rate-calculation","dir":"Articles","previous_headings":"Readmission: CIHI flags","what":"CIHI readmission rate calculation","title":"Episodes of care and Readmission","text":"total 8 CIHI flags function input arguments: elective_admit, death, MAID, palliative, chemo, mental, obstetric, signout. flag removes episodes using different criteria activated. details inclusion exclusion criteria discussed CIHI flags section CIHI website Rationale default definition readmission rate per CIHI definition explain two definitions since default definition GEMINI-specific, CIHI definition used MPR/OPR combinations flags potentially suitable different project needs Default definition: elective_admit flag death flag default TRUE readmission function. users set FALSE, warning messages displayed. remaining six flags default FALSE. Elective admission excluded since ’s planned. Thus, corresponding episode care ineligible readmission calculations therefore removed denominator. ’s impossible episode care ends death followed readmission, thus, corresponding episode care ineligible readmission calculations therefore removed denominator. CIHI definition: compute readmission rate adhering CIHI definition, 8 flags need set TRUE. main purpose 8 flags design match CIHI definition, however, come potential rationale corresponding flag sections reference Detailed flag definitions can found (comments readmission.R script)","code":"res <- readmission (db, elective_admit=T, death=T, MAID = T, palliative=T, chemo=T, mental=T, obstetric = T, signout = T) readmission_7d_derived_cihi = mean( res$readmit7, na.rm=T) readmission_30d_derived_cihi = mean( res$readmit30, na.rm=T)"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"overview-of-numerator-denominator-removal-by-flag","dir":"Articles","previous_headings":"Readmission: CIHI flags","what":"Overview of numerator & denominator removal by flag","title":"Episodes of care and Readmission","text":"8 CIHI flags, can set TRUE FALSE. Elective admission death flags active default. Activating given flag (e.g., chemo /self sign-flag) results removal numerator /denominator illustrated flow chart . Note flags (mental & palliative) result removal numerator denominator:","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"flag-details","dir":"Articles","previous_headings":"Readmission: CIHI flags","what":"Flag details","title":"Episodes of care and Readmission","text":"Disclaimer: examples (focus red text tables) mock final outputs readmission.R","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"elective-flag","dir":"Articles","previous_headings":"Readmission: CIHI flags > Flag details","what":"Elective flag","title":"Episodes of care and Readmission","text":"episode elective admit_category ‘L’ episode care considered elective FIRST encounter episode elective (admit_category = ‘L’) episode elective admissions removed numerator","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"death-flag","dir":"Articles","previous_headings":"Readmission: CIHI flags > Flag details","what":"Death flag","title":"Episodes of care and Readmission","text":"episode ends death episode discharge death (DAD Discharge Disposition Code = 07, 72, 73, 74) index admission results death, readmission. Therefore, episodes care death excluded denominator (reamitX=NA)","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"maid-flag","dir":"Articles","previous_headings":"Readmission: CIHI flags > Flag details","what":"MAID flag","title":"Episodes of care and Readmission","text":"Rationale exclusion: MAID (medical assistance dying) planned doesn’t reflect quality care 2018-04-01: episode MAID discharge disposition=73 2018-04-01: episode MAID genc_id epicare discharge disposition=7 3 records drugs (1st drug lets patient relax, 2nd drug stops heart beat, 3rd drug stops brain function; indicated intervention_codes loaded) epicare encounter MAID, considered true readmission removed numerator. Note: death = T, epicare MAID (results death) additionally removed denominator. death = F, epicare MAID kept denominator. general recommendation set death T MAID T.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"self-sign-out-lama-flag","dir":"Articles","previous_headings":"Readmission: CIHI flags > Flag details","what":"self sign-out / LAMA flag","title":"Episodes of care and Readmission","text":"Rationale exclusion: self sign-doesn’t reflect physicians’ decisions discharge doesn’t reflect quality care LAST encounter episode care discharge disposition = self sign-(.e. LAMA - left medical advice: 61, 62, 65, 66, 67), episode removed denominator avoid attribution potential readmission physician Note: self sign-excluded based CIHI definition, GEMINI DB doesn’t capture different physician practices philosophies regarding self sign-(eg. Amol never codes self sign-since believes ’s patients’ right leave ), self sign-information recorded paper.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"palliative-flag","dir":"Articles","previous_headings":"Readmission: CIHI flags > Flag details","what":"palliative flag","title":"Episodes of care and Readmission","text":"Rationale exclusion: palliative care acute care can scheduled extent, therefore, doesn’t reflect quality care episode palliative care diagnosis code (ICD-10-CA: Z51.5) type MRDx episode care includes encounter palliative care responsible discharge diagnosis, removed numerator denominator","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"chemo-flag","dir":"Articles","previous_headings":"Readmission: CIHI flags > Flag details","what":"chemo flag","title":"Episodes of care and Readmission","text":"Rationale exclusion: palliative flag episode chemotherapy diagnosis code (ICD-10-CA: Z51.1) type (M), (1), (C), (W), (X) (Y) episode care (epicare) includes encounter chemotherapy, entire epicare considered chemotherapy episode. Readmission chemotherapy considered true readmission, removed numerator.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"mental-health-flag","dir":"Articles","previous_headings":"Readmission: CIHI flags > Flag details","what":"mental health flag","title":"Episodes of care and Readmission","text":"Rationale exclusion: palliative flag episode mental health falls MCC=17 episode care includes encounter mental health diagnosis, removed numerator denominator","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"obstetric-delivery","dir":"Articles","previous_headings":"Readmission: CIHI flags > Flag details","what":"obstetric delivery","title":"Episodes of care and Readmission","text":"Rationale exclusion: palliative flag episode obstetric delivery diagnosis codes (ICD-10-CA: O10–O16, O21–O29, O30–O37, O40–O46, O48, O60–O69, O70–O75, O85–O89, O90–O92, O95, O98, O99 sixth digit 1 2; Z37 recorded diagnosis field) Episodes care encounter obstetric delivery considered true readmission, therefore removed numerator","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"practical-examples-special-scenarios","dir":"Articles","previous_headings":"","what":"Practical examples & special scenarios","title":"Episodes of care and Readmission","text":"flow chart provides overview readmission calculations can customized different research purposes. Depending research context, may able use derived readmission variables DB (see Section 3.1). Alternatively, can run readmission function customized CIHI flags (Section 3.2), customized readmission window (Section 3.3), /restricted readmission cohort (Section 3.4):","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"sectionderived","dir":"Articles","previous_headings":"Practical examples & special scenarios","what":"Using derived variables in DB","title":"Episodes of care and Readmission","text":"use: get default/CIHI definition 7-/30-day readmission, including readmissions GEMINI hospital & medical subservice use: Query derived_variables table, contains two commonly used definitions 7- 30-day readmission: Default definition readmission (excluding elective readmissions death): readmission_7d_derived/readmission_30d_derived CIHI definition readmission (exclusion flags, see Section 2): readmission_7d_derived_cihi/readmission_30d_derived_cihi Example: 7-day readmission rates patients phase-1 sites: examples: MPR/OPR readmission rates Descriptive analyses general readmission rates Comparing overall readmission rates patients certain diagnoses/treatments … Note: derived variables based entire GEMINI DB. , consider readmissions medical service GEMINI hospital. reason, reflect overall/general readmission rates, common variable interest many research projects. However, may cases need run readmission function subset database using restricted_cohort argument (see Section 3.4).","code":"# get derived readmissions for phase-1 sites readm <- dbGetQuery(db, \"SELECT readmission_7d_derived FROM derived_variables                      WHERE hospital_id IN ('SMH', 'SBK', 'UHNTW', 'UHNTG', 'MSH', 'THPC', 'THPM');\")  mean(readm$readmission_7d_derived, na.rm = T)"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"sectioncustomCIHI","dir":"Articles","previous_headings":"Practical examples & special scenarios","what":"Customizing CIHI flags","title":"Episodes of care and Readmission","text":"derived variables DB provide readmission values default & CIHI definitions readmission, common definitions used GEMINI research projects/reports. However, another definition required specific research purposes, users can specify customized CIHI flags setting 8 CIHI flags either TRUE FALSE (see Section 2 details). example, run code exclude MAID (addition excluding elective admissions & death set TRUE default):","code":"readmission(db, MAID=T)"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"sectionrewin","dir":"Articles","previous_headings":"Practical examples & special scenarios","what":"Specifying custom readmission window","title":"Episodes of care and Readmission","text":"default, readmission function calculates 7- 30-day readmission. Users can provide additional input argument readm_win contains readmission window(s) interest (days). Example: Get 14-, 90-, 180- day readmission. readmission windows provided positive integers. Otherwise, function exit error message. Note: Large readmission windows can lead exclusion high percentage encounters end data availability timeline. function can calculate readmissions patients whose index encounter prior buffer period. buffer period depends length readmission window (e.g., 14/90/180 days) + additional 30 days (see Section 1.2.2). Therefore, buffer period longer large readmission windows, can lead exclusion many patients. especially problematic cohort interest towards end data availability timeline (e.g., 2021-2022 data). function show following warning 25% cohort excluded due buffer period /due CIHI flags:","code":"readm <- readmission(db, readm_win = c(14, 90, 180))  # specify readmission windows in days # Example of readmission rates for data from June 2021, resulting in a high % of encounters in the buffer period  readm <- readmission(db, restricted_cohort = admdad[ymd_hm(discharge_date_time) >= \"2021-06-01 00:00\",]) #> Warning: Up to 41.3% of episodes of care have been removed from the denominator. This can be due to #>         1) some CIHI flags (death/palliative/mental/signout) or #>         2) removal due to the buffer period, which is 30 days + readmission window. #>         The removal due to the buffer period was 20.5%/33.4% for 7/30-day readmission. #>         Readmission rate estimates might be unreliable! Please consider re-calculating #>         readmission rates with shorter readmission windows or with a larger cohort."},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"sectionrecohort","dir":"Articles","previous_headings":"Practical examples & special scenarios","what":"Running readmission function with restricted_cohort","title":"Episodes of care and Readmission","text":"can run readmission function subset DB providing optional restricted_cohort input. 2 main reasons restrict cohort: REB protocol research project cover encounters DB, want analyse readmissions certain hospitals/subservices due specific research question. cases, restricted_cohort provided data.table containing genc_id column relevant encounters. use restricted_cohort due REB considerations, restricted_cohort include genc_ids covered REB (see Section 3.4.1 details). contrast, want filter cohort due specific research question, recommended filter episodes care order keep linked transfers DB (see Section 3.4.2 details). Important: Running readmission function restricted_cohort means encounters included restricted cohort used derive episodes care readmissions. encounters excluded computations. warning message shown restricted_cohort argument provided notify user computations readmission function (including internal call episodes_of_care) limited provided cohort. Please carefully consider using restricted_cohort appropriate/necessary case! can ignore warning message confident restricted_cohort required sure built restricted_cohort correctly (based genc_ids REB scenarios vs. based epicares scenarios).","code":"#> Warning: Note: Based on the user input, epicares will be computed solely based #> on the user specified cohort, instead of the default method. The default method #> computes epicares based on all available data in GEMINI database and is #> recommended."},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"sectionrecohort1","dir":"Articles","previous_headings":"Practical examples & special scenarios > Running readmission function with restricted_cohort","what":"Restricting the cohort due to REB protocol","title":"Episodes of care and Readmission","text":"use: REB protocol study cover encounters DB use: Provide restricted_cohort argument includes genc_ids covered REB Example: REB protocol research project covers GIM encounters 5 hospitals. case, important ensure encounters included readmission function, encounters DB ignored. resulting readmission rates include readmissions GIM services 5 hospitals included. Note results may less reliable readmissions derived based whole DB due loss information transfers hospitals/subservices included restricted_cohort. Specifically, readmission function internally calls episodes_of_care function, inherits restricted_cohort provided readmission function. Therefore, encounters part restricted_cohort excluded reamdission calculations generation episodes care. Note: want calculate episodes care (without calculating readmissions) cohort REB restrictions, can also run episodes_of_care function isolation provide restricted_cohort input ensure analyses compliant REB. example, derive episodes care GIM encounters 5 hospitals: unsure encounters covered project’s REB protocol, please contact manager!","code":"# note: users needs to define their own GIM_cohort table based on the criteria they want to use to define GIM encounters readm <- readmission(db, restricted_cohort = GIM_cohort[hospital_num %in% c(101,102,103,104,105),]) # note: users needs to define their own GIM_cohort table based on the criteria they want to use to define GIM encounters epicares <- identify_epicare(db, restricted_cohort = GIM_cohort[hospital_num %in% c(101,102,103,104,105),])"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/epicare_and_readmission.html","id":"sectionrecohort2","dir":"Articles","previous_headings":"Practical examples & special scenarios > Running readmission function with restricted_cohort","what":"Restricting the cohort due to research question","title":"Episodes of care and Readmission","text":"use: calculate readmissions specific hospitals/subservices (e.g., readmission GIM ) include/exclude certain encounters readmission calculation due research context (e.g., readmission specific Dx) use: calculate readmission rates consider readmissions certain hospitals/subservices/encounters, can run readmission function using restricted_cohort. restricting cohort due REB considerations done filtering strictly based genc_id (see ), restricting cohort due specific research questions done based episodes care order ensure linked transfers considered readmission calculations. Specifically, hospitalizations interest, linked encounters given episode care included. Please carefully read examples gain better understanding create restricted_cohort research purposes. Example 1: Calculating frequently GIM patients readmitted GIM services: order analyze readmissions GIM patients GIM services, restricted_cohort include encounters episodes care least one GIM encounter. , even non-GIM encounters included long associated epicare GIM encounters interest. ensures linked transfers included readmission calculation, minimizes chance encounters inaccurately labelled readmissions due missing transfer information. resulting readmission rates indicate whether GIM readmission given GIM patient within 7-/30-day time window. readmissions necessarily first readmission index epicare! example, GIM patient may non-GIM readmission initial epicare, ignored calculation . Therefore, interpretations causes readmission done carefully may intermediate epicares readmissions attributed considered due use restricted_cohort. Example 2: Calculating readmission rates COVID patients readmitted COVID diagnosis. case, restricted_cohort include episodes care encounter COVID diagnosis. example 1, linked encounters (even without COVID diagnosis) included make sure available transfer information used readmission calculations. resulting readmission rates indicate whether patients COVID readmission COVID diagnosis within 7-/30-day time window. readmissions necessarily first readmission index epicare COVID diagnosis! , may intermediate, non-COVID epicares, ignored readmission calculations. Note: examples , highlighted italic parts sentence (specify patients readmitted ) necessitate using restricted_cohort. want filter cohort according patients readmitted , use restricted_cohort argument. Instead, simply query derived variables cohort interest (see example Section 3.1) make sure including readmissions hospitals/medical subservices. special scenarios: may complex scenarios inclusion criteria index admissions (“readmission ”) different inclusion criteria readmission encounters (“readmission ”). example, might want analyze readmission rates surgery patients readmitted GIM. case, restricted_cohort include epicares meet criteria index admissions plus epicares meet criteria readmissions. need use several steps create restricted_cohort: Select encounters episodes care meet criteria index admissions: example scenario, include encounters epicares least one surgery encounter. want consider readmissions GIM, include single surgery episode care per patient order avoid subsequent surgeries counted readmissions. Select encounters episodes care meet criteria readmissions: example, qualify GIM readmission, include encounters epicares ) occurred index surgery admission b) least one GIM encounter. Note: implication step intermediate non-GIM epicares ignored. Combine encounters step 1 & 2 create restricted_cohort interest. Run readmission function restricted_cohort. Calculate readmission rates: Filter output readmission function based index admissions (cohort created step 1) order get readmission rates surgery patients GIM. step important avoid admissions following GIM epicares (e.g., GIM GIM readmissions GIM surgery readmissions) included readmission rates. steps meant general guideline, may need consider additional aspects given research project. Please make sure carefully consider implications decisions make building restricted_cohort. also need consider additional REB restrictions apply, case restricted_cohort filtered based REB considerations first applying additional inclusion steps.","code":"## Calculate epicares based on ALL encounters in DB (to ensure linked transfers are included) epicares <- episodes_of_care(db)  ## Identify all epicares that have at least 1 GIM encounter  # note: users needs to define their own GIM_cohort table based on the criteria they want to use to define GIM encounters GIM_epicares <- epicares[genc_id %in% GIM_cohort$genc_id, 'epicare']  ## Get all encounters associated with GIM epicares (keep all encounters of those epicares, even those without GIM to make sure all linked transfers are accounted for) GIM_epicares_all_enc <- epicares[epicare %in% GIM_epicares$epicare, 'genc_id']   ## Calculate readmissions to GIM (considering all linked transfers in DB) GIM_readm <- readmission(db, restricted_cohort = GIM_epicares_all_enc)  ## Get 7-day readmission rate of GIM patients to GIM  # note: numerator/denominator are based on unique GIM epicares, not GIM encounters (i.e., there may be several GIM encounters associated with a single GIM epicare, but those are only counted once; readmission is attributed to the last encounter within each GIM epicare) mean(GIM_readm$readmit7, na.rm = T) ## Get all encounters with COVID diagnosis COVID_enc <- ipdiagnosis[grepl('^U07',diagnosis_code),'genc_id']  ## Calculate epicares based on ALL encounters in DB (to ensure linked transfers are included) epicares <- episodes_of_care(db)  ## Identify all epicares that have at least 1 COVID encounter  COVID_epicares <- epicares[genc_id %in% COVID_enc$genc_id, 'epicare']  ## Get all encounters associated with COVID epicares (keep all encounters of those epicares, even those without COVID diagnosis to make sure all linked transfers are accounted for) COVID_epicares_all_enc <- epicares[epicare %in% COVID_epicares$epicare, 'genc_id']   ## Calculate readmissions with COVID diagnosis (considering all linked transfers in DB) COVID_readm <- readmission(db, restricted_cohort = COVID_epicares_all_enc)  ## Get 30-day readmission rate of COVID patients, only counting readmissions that also have a COVID diagnosis  # note: numerator/denominator are based on unique COVID epicares, not COVID encounters (i.e., there may be several COVID encounters associated with a single epicare, but those are only counted once; readmission is attributed to the last encounter within each COVID epicare) mean(COVID_readm$readmit30, na.rm = T)"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/icd_to_ccsr.html","id":"overview-background","dir":"Articles","previous_headings":"","what":"Overview & background","title":"ICD to CCSR","text":"icd_to_ccsr function returns CCSR (Clinical Classifications Software Refined) categories user-specified set diagnosis codes. CCSR provides grouping individual ICD-10 diagnosis codes broader, clinically meaningful disease categories. original CCSR grouping developed based US ICD-10-CM codes. GEMINI developed algorithm mapping Canadian diagnosis codes (ICD-10-CA) CCSR categories. full mapping procedure described . purpose vignette provide practical guide apply icd_to_ccsr function different research contexts, analyze outputs provided function. details inner workings function , please refer function documentation (?icd_to_ccsr).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/icd_to_ccsr.html","id":"when-and-why-to-use-ccsr","dir":"Articles","previous_headings":"","what":"When and why to use CCSR","title":"ICD to CCSR","text":"currently 70,000 unique ICD-10 codes, additional country-specific variations. ICD-10 codes contain fine-grained diagnosis details may relevant research purposes. CCSR aggregates individual diagnosis codes ~540 clinically relevant categories across 22 body systems. full list current CCSR categories can found . CCSR facilitates disease-specific healthcare utilization outcome well dimensionality reduction statistical modeling. CCSR categories particularly useful analyzing large, heterogeneous cohorts (e.g., GIM patients). cases, grouping patients broad disease categories can provide important insights patient case mix allows meaningful comparison baseline characteristics clinical outcomes across different patient sub-populations (see Example applications CCSR) . use CCSR: research studies focus single, well-defined condition (e.g., COVID-19), often better simply filter cohort specific ICD-10-CA code(s) interest (e.g., U071 = confirmed COVID-19) instead using broader disease categories might result loss information specificity. Additionally, conditions CCSR category. example, CCSR category delirium. Instead, diagnosis codes associated delirium grouped CCSR category NVS011 = “Neurocognitive disorders”, together large range neurocognitive disorders. decision whether use ICD-10-CA codes vs. CCSR categories made project--project basis researchers need carefully consider approach appropriate analyses.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/icd_to_ccsr.html","id":"running-icd_to_ccsr-with-default-arguments","dir":"Articles","previous_headings":"","what":"Running icd_to_ccsr() with default arguments","title":"ICD to CCSR","text":"run icd_to_ccsr function, users need provide 1) valid database connection 2) dxtable input containing diagnosis codes interest. Typically, dxtable created based ipdiagnosis table (subset thereof) GEMINI database, contains diagnosis codes assigned genc_id. example load relevant data run icd_to_ccsr function default settings: Mock output table icd_to_ccsr(): function returns GEMINI-derived ICD--CCSR mappings. row output corresponds single ICD-10-CA code (diagnosis_code) given encounter (genc_id). diagnosis code returned description (diagnosis_code_desc) one multiple (6) CCSR categories (ccsr_1 ccsr_6). One CCSR category assigned default category (ccsr_default), corresponds main disease group typically category interest analyses (see Example applications CCSR). output also contains description CCSR default category (ccsr_default_desc). Note: Although GEMINI-derived CCSR mappings validated medical expert, users advised spot-check output verify ICD-10-CA descriptions broadly match CCSR default descriptions. Please inform GEMINI team case identify inconsistencies. Moreover, please note mappings may subject change continuously update database ensure consistency official CCSR tool.","code":"# Load required libraries library(RPostgreSQL) library(DBI) library(getPass)  # Establish database connection db <- DBI::dbConnect(drv,                      dbname = \"DB_name\",                      host = \"172.XX.XX.XXX\",                      port = 1234,                      user = getPass(\"Enter user:\"),                      password = getPass(\"Enter Password:\"))  # query relevant columns of ipdiagnosis table ipdiagnosis <- dbGetQuery(db, \"SELECT genc_id, diagnosis_code, diagnosis_type FROM ipdiagnosis;\")   # Run default version of icd_to_ccsr          ipdiagnosis_ccsr <- icd_to_ccsr(db, dxtable = ipdiagnosis)   head(ipdiagnosis_ccsr, 10)"},{"path":[]},{"path":"https://gemini-medicine.github.io/Rgemini/articles/icd_to_ccsr.html","id":"type_mrdx","dir":"Articles","previous_headings":"Optional input arguments","what":"type_mrdx","title":"ICD to CCSR","text":"default: TRUE illustrated example output table , function default returns responsible diagnosis (MRDx) code per genc_id. , single row per encounter returned, contains type-M (type-6 present) diagnosis (line CIHI definition MRDx; see page 13). users want obtain CCSR categories diagnosis types, input argument type_mrdx can set FALSE, follows: case, function apply filtering diagnosis type, instead, return rows original input table. Note output contains multiple rows per genc_id, corresponding different diagnosis types. information diagnosis type coding, see . Mock output table icd_to_ccsr() type_mrdx = FALSE:","code":"ipdiagnosis_ccsr <- icd_to_ccsr(db, ipdiagnosis, `type_mrdx` = FALSE)"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/icd_to_ccsr.html","id":"unique_mrdx","dir":"Articles","previous_headings":"Optional input arguments","what":"unique_mrdx","title":"ICD to CCSR","text":"default: FALSE Typically, encounter exactly one MRDx code. However, certain circumstances, function may identify encounters multiple MRDx codes (e.g., two type-M diagnosis codes). due data quality issues, can happen users combine -patient ED diagnoses create long-table format pre-processing data. default, function show warning encounters multiple MRDx codes found, run usual return multiple rows encounters 1 MRDx. users want requirement unique MRDx strict, can specify unique_mrdx = TRUE, cause function terminate encounters multiple MRDx codes found. case, users advised carefully check input table remove entries causing error message. Note input argument relevant type_mrdx set TRUE, otherwise, ignored.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/icd_to_ccsr.html","id":"replace_invalidpdx","dir":"Articles","previous_headings":"Optional input arguments","what":"replace_invalidpdx","title":"ICD to CCSR","text":"default = TRUE diagnosis codes returned ccsr_default = \"XXX000\", indicates diagnosis code “unacceptable principal diagnosis” (invalid PDX) according US diagnostic coding following Medicare Code Edits guidelines (see details). Since CCSR default category meant reflect main disease category (~MRDx), official CCSR tool sets ccsr_default \"XXX000\" codes valid PDX/MRDx. Many external cause diagnosis codes (diagnosis_type = 9) fall category meant coded MRDx, thus, returned ccsr_default = \"XXX000\". Note codes still valid ccsr_1 (ccsr_6) categories: Example codes ccsr_default = \"XXX000\": type_mrdx = TRUE, invalid PDX categories typically rare. However, due country-specific differences coding mapping ambiguity ICD-10-CA codes, users may find even type M/6 (MRDx) codes returned CCSR default category \"XXX000\". usually affects injury/poisoning codes codes starting “Z”, including pregnancy-related, procedural, health status/personal history codes: Example MRDx codes ccsr_default = \"XXX000\": invalid PDX category line coding insurance purposes, however, typically meaningful research contexts can result loss information. example, scenario shown , users may still want group patient diagnosis_code = \"Z37000\" relevant, pregnancy-related CCSR category. fact, code assigned CCSR 1 category \"PRG030\" (“Maternal outcome delivery”), contains useful information encounter. function therefore provides optional input argument replace_invalidpdx overwrite \"XXX000\" values one (valid) CCSR 1-6 categories. fact, replace_invalidpdx set TRUE default given research projects, distinction valid vs. invalid principle diagnosis coding may relevant (, determined based diagnosis_type instead mapped CCSR category). Additionally, users may specifically interested CCSR groups diagnosis types (type_mrdx = FALSE), case definition CCSR default categories valid vs. invalid PDX categories meaningful. example, replace_invalidpdx set TRUE (default), \"XXX000\" replaced \"PRG030\" diagnosis code \"Z37000\": Example output illustrating replace_invalidpdx = TRUE: Note: Invalid PDX CCSR categories replaced follows: codes mapped single CCSR category, \"XXX000\" replace ccsr_1 category. codes mapped multiple CCSR categories, function chooses CCSR 1-6 category common default category among diagnosis codes ICD-10 chapter (first 3 characters). Otherwise, still result mapping \"XXX000\" (e.g., codes chapter mapped \"XXX000\"), function defaults ccsr_1.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/icd_to_ccsr.html","id":"missing-vs--unmapped-diagnosis-codes","dir":"Articles","previous_headings":"","what":"Missing vs. unmapped diagnosis codes","title":"ICD to CCSR","text":"entries output table might missing CCSR default categories (.e., .na(ccsr_default)). can due either 1) missing/empty diagnosis codes 2) diagnosis codes mapped CCSR categories. Users can distinguish two scenarios based ccsr_default_descr, either 1) \"Missing diagnosis code\" 2) \"Unmapped\".","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/icd_to_ccsr.html","id":"missing-diagnosis-codes","dir":"Articles","previous_headings":"Missing vs. unmapped diagnosis codes","what":"Missing diagnosis codes","title":"ICD to CCSR","text":"Diagnosis codes returned ccsr_default_desc = \"Missing diagnosis code\" refer entries dxtable input diagnosis_code NA NULL, example: Mock output table showing missing diagnosis codes: typically due data quality issues affect small number encounters. type_mrdx set TRUE, encounters rows containing type-6 type-M diagnosis also returned ccsr_default = \"Missing diagnosis code\" (diagnosis_code = NA). ensure number rows output table corresponds number unique encounters provided dxtable input. function additionally show warning message inform users encounters missing MRDx codes found.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/icd_to_ccsr.html","id":"unmapped-diagnosis-codes","dir":"Articles","previous_headings":"Missing vs. unmapped diagnosis codes","what":"Unmapped diagnosis codes","title":"ICD to CCSR","text":"rows ccsr_default = \"Unmapped\", valid ICD-10-CA diagnosis code exists, however, code mapped CCSR categories (yet). example: Mock output table showing unmapped diagnosis codes: Type-4 morphology codes (e.g., row 1 example output ) always returned \"Unmapped\" since numeric codes based ICD-0 (oncology) diagnoses, meant mapped CCSR categories. diagnosis types, codes returned \"Unmapped\" simply mapped GEMINI team yet. constantly update database add new ICD-10-CA codes strive provide mappings many codes possible. However, team prioritizes mapping MRDx diagnosis codes. Therefore, unmapped codes likely occur users run icd_to_ccsr() function type_mrdx = FALSE. users plan analyse CCSR categories non-MRDx codes find high percentage codes unmapped, recommend using publicly available GEMINI CCSR mapping algorithm, enables (semi-)automatic ICD--CCSR mapping. details use algorithm, please get touch GEMINI team.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/icd_to_ccsr.html","id":"examples","dir":"Articles","previous_headings":"","what":"Example applications of CCSR","title":"ICD to CCSR","text":"examples illustrate common applications CCSR clinical research.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/icd_to_ccsr.html","id":"patient-case-mix","dir":"Articles","previous_headings":"Example applications of CCSR","what":"Patient case mix","title":"ICD to CCSR","text":"Analyzing frequency CCSR default category large, heterogeneous cohorts can provide important insights patient case mix. example, running icd_to_ccsr() function MRDx codes typical GIM cohort, 5 common CCSR default categories among GIM patients can obtained follows: Mock output table showing top 5 frequent CCSR default categories GIM cohort: Users additionally analyse cumulative percentage patients across CCSR categories determine number unique disease categories accounting 50% (75%/90%…) patients. provides useful quantitative measure breadth conditions managed given hospital/medical ward.","code":"library(data.table)  ccsr_summary <- ipdiagnosis_ccsr[, .(N = .N, `% patients` = .N/nrow(ipdiagnosis_ccsr) * 100),                                   by = c(\"ccsr_default\",\"ccsr_default_desc\")]  head(ccsr_summary[order(N, decreasing = TRUE)],5)"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/icd_to_ccsr.html","id":"risk-adjustment-using-ccsr","dir":"Articles","previous_headings":"Example applications of CCSR","what":"Risk adjustment using CCSR","title":"ICD to CCSR","text":"comparing clinical outcomes (e.g., mortality readmission rates) across patients/physicians/hospitals, important consider patients’ baseline characteristics, diagnosis group. Risk adjustment performed including CCSR categories predictors regression models, splitting cohorts different subgroups based patients’ CCSR default category. Risk adjustment CCSR also used analyzing quality care, resource usage, healthcare costs indicators. example, see Roberts et al. (2023) performing risk adjustment using CCSR GEMINI data.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/icd_to_ccsr.html","id":"filtering-cohorts-by-ccsr-category","dir":"Articles","previous_headings":"Example applications of CCSR","what":"Filtering cohorts by CCSR category","title":"ICD to CCSR","text":"users want filter cohort certain diagnosis group, choose relevant CCSR category(s) list filter corresponding CCSR category number(s). example, filter genc_ids Septicemia, relevant CCSR category INF002. Users 2 options: Filter encounters INF002 CCSR default category: Filter encounters INF002 among CCSR 1-6 categories (recommended): difference two approaches CCSR default category meant main disease category. Focusing single category usually relevant users need ensure diagnosis code exactly one corresponding CCSR category. example, analyses previous section, patients grouped according default CCSR category don’t want double-count patients whose MRDx code mapped 1 CCSR category. contrast, filtering patients fit certain CCSR criterion, 1:1 mapping diagnosis code CCSR categories usually required. Instead, likely want capture patients CCSR category interest among mapped CCSR 1-6 categories. addition , official CCSR tool assigns default categories based hierarchical rules, .e., CCSR categories less likely default category others. example, diagnosis codes related diabetes, distinction diabetes vs. without complications (CCSR END003 vs. END002) takes priority distinction type 1 vs. type 2 diabetes (CCSR END004 vs. END005). result, researchers want filter encounters type-1 diabetes, searching CCSR default category alone result many relevant patients missed diabetes patients CCSR default categories END002 END003 (instead END004/END005). Therefore, general recommendation filtering cohorts CCSR category use CCSR 1-6 categories (option 2 shown ), instead filtering CCSR default alone. Additional notes filtering CCSR category: investigating specific, well-defined diseases, may appropriate filter individual ICD-10-CA codes instead relying broad CCSR categories. filtering CCSR category appropriate, users still verify individual ICD-10-CA codes included relevant research question. recommended always filter CCSR category number (\"INF002\") instead description (\"Septicemia\") category descriptions subject small changes newer releases official CCSR tool.","code":"# option 1: filter by CCSR default category only ipdiagnosis_ccsr <- ipdiagnosis_ccsr[ccsr_default==\"INF002\",] # option 2: filter by CCSR 1-6 (includes default category) ipdiagnosis_ccsr <- ipdiagnosis_ccsr[   rowSums(ipdiagnosis_ccsr[,c(\"ccsr_1\",\"ccsr_2\",\"ccsr_3\",\"ccsr_4\",\"ccsr_5\",\"ccsr_6\")] == \"INF002\",            na.rm = TRUE) > 0,]"},{"path":[]},{"path":"https://gemini-medicine.github.io/Rgemini/articles/icd_to_ccsr.html","id":"initial-vs--subsequent-encounters","dir":"Articles","previous_headings":"Additional considerations","what":"Initial vs. subsequent encounters","title":"ICD to CCSR","text":"diagnoses (e.g., injuries poisoning), US ICD-10 codes contain suffix differentiates initial vs. subsequent encounters. result, CCSR categories make distinction. example: INJ018 = “Crushing injury, initial encounter”, whereas INJ055 = “Crushing injury, subsequent encounter”. However, Canadian ICD-10 codes differentiate initial vs. subsequent encounters. Therefore, ICD-10-CA codes mapped “initial encounter” default. researchers interested analyzing patients’ medical history, rely CCSR description differentiate initial vs. subsequent encounters, instead, look encounter history given patient within database. generally, means CCSR description “initial” “subsequent” encounter GEMINI database ignored (.e., INJ018 = INJ055 = “Crushing injury”).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_data_exploration.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Plotting Functions - Easy Plots for Data Exploration","text":"Rgemini contains several functions facilitate common plotting needs allow users create customized figures just lines code. vignette focuses two basic functions data exploration & descriptive analyses: plot_summary() plot_over_time()). functions meant produce publication-ready figures, rather, provide quick easy way facilitating early stages analyses, : Checking variable distributions & missingness, inspecting time trends, visualizing differences hospitals (grouping variables). functions introduced can used complement (base R) functions allow quick data inspection like summary(), xtabs(), str() head().","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_data_exploration.html","id":"set-up","dir":"Articles","previous_headings":"","what":"Set-up","title":"Plotting Functions - Easy Plots for Data Exploration","text":"plotting examples shown based variables “ipadmdad” table. Typically, query table GEMINI database, purpose vignette, ’ll create dummy data using Rgemini::dummy_ipadmdad(). , simulating subset “ipadmdad” variables 50,000 encounters 12 different hospitals discharge dates ranging fiscal years 2018 2022:","code":"library(Rgemini) #> Error in get(paste0(generic, \".\", class), envir = get_method_env()) :  #>   object 'type_sum.accel' not found library(ggplot2) library(dplyr) library(data.table)  set.seed(999) ipadmdad <- dummy_ipadmdad(n = 50000, n_hospitals = 12, time_period = c(2018, 2022)) %>%   data.table()"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_data_exploration.html","id":"plot_summary","dir":"Articles","previous_headings":"","what":"Summary plots","title":"Plotting Functions - Easy Plots for Data Exploration","text":"First, let’s use plot_summary() function explore dataset gain better understanding distributions ipadmdad variables dummy cohort.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_data_exploration.html","id":"default-plot","dir":"Articles","previous_headings":"Summary plots","what":"Default plot","title":"Plotting Functions - Easy Plots for Data Exploration","text":"default, plot_summary() creates histograms/barplots relevant variables data input (ignoring encounter/patient/physician IDs date-time variables). also show basic descriptive stats, % missing (NA/\"\"/\" \"), well median [Q1, Q3] continuous variables % categorical/character variables. Missing values excluded plots summary statistics.    data input contains large number variables, recommend explicitly specifying variables want include summary plot providing plot_vars character vector input: … select variables implicitly specifying subset relevant columns like :*    * Note: select variables implicitly, encounter/patient/physician IDs date-time variables still removed automatically function. like plot IDs/date-times, can achieve explicitly specifying plot_vars input, e.g., plot_vars = \"mrp_cpso_mapped\" check number encounters per responsible physician (MRP). general, date-time variables avoided plot_summary() unless preprocessed reduce number categories (e.g., grouped months/years). plot time trends, please use plot_over_time() function instead.  ","code":"plot_summary(data = ipadmdad) plot_summary(ipadmdad, plot_vars = c(\"discharge_disposition\", \"number_of_alc_days\")) plot_summary(ipadmdad[, .(discharge_disposition, number_of_alc_days)])"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_data_exploration.html","id":"providing-plot_vars-as-a-list","dir":"Articles","previous_headings":"Summary plots","what":"Providing plot_vars as a list","title":"Plotting Functions - Easy Plots for Data Exploration","text":"default plots provide quick easy way exploring data, may want finer control characteristics subplot. can achieved providing variables plotted list specify additional attributes, : Variable class: example, discharge disposition type numeric “ipadmdad”. However, reality, discharge disposition categorical variable users can specify class = \"character\" create appropriate plot. Sorting frequency (categorical variables): Categories can sorted according frequency category level. example , sort discharge disposition descending frequency. Histogram bins & breaks (continuous variables): example, may want plot ALC days binwidth = 1 show data points 7 days specifying breaks = seq(0, 7, 1). Normal distribution (continuous variables): default, plot_summary show medians [Q1, Q3] continuous variables. normally distributed variables, users can specify normal = TRUE obtain means [SD] instead. Subplot titles: Users can change subplot titles providing desired title name list item (e.g., “# Days ALC” instead “Number Alc Days”) example:   ","code":"plot_summary(   ipadmdad,   plot_vars = list(     `Discharge disposition` = list(plot_var = \"discharge_disposition\", class = \"character\", sort = \"desc\"),     `# Days in ALC` = list(plot_var = \"number_of_alc_days\", binwidth = 1, breaks = seq(0, 7, 1))   ) )"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_data_exploration.html","id":"applying-facet-grouping","dir":"Articles","previous_headings":"Summary plots","what":"Applying facet grouping","title":"Plotting Functions - Easy Plots for Data Exploration","text":"plot_summary can also used plot separate histograms/barplots subgroups. can achieved providing facet_group variable passed facet_wrap create separate subplots grouping variable, \"hospital_num\". example, plot gender separately hospital:    facet_group currently supported users specify single plotting variable. specifying facet_group, percentage values calculated within given facet level. sorting categorical variables frequency, values sorted according frequency whole data set (.e., across facet levels).  ","code":"plot_summary(   ipadmdad,    plot_vars = \"gender\",   facet_group = \"hospital_num\" )"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_data_exploration.html","id":"additional-user-inputs","dir":"Articles","previous_headings":"Summary plots","what":"Additional user inputs","title":"Plotting Functions - Easy Plots for Data Exploration","text":"Finally, users can control following plot characteristics: Show percentages (instead counts) y-axis specifying prct = TRUE Remove stats plot specifying show_stats = FALSE Change fill color using color input Adjust font size plot specifying base_size Control arrangement subplots providing additional inputs passed ggpubr::ggarrange(). default, maximum 9 (3x3) subplots shown single figure. users plot 9 variables, multiple figures generated. can change behaviour, re-arrange subplots specifying nrow ncol. can also align subplots horizontally using align = \"h\" (relevant ALC plot due long x-axis labels). example:  create separate figure variable, can specify ncol = 1 nrow = 1.  ","code":"plot_summary(   data = ipadmdad[, .(age, gender, alc_service_transfer_flag)],   prct = TRUE,   show_stats = FALSE,   color = \"lightgrey\",   nrow = 1, ncol = 3,    align = \"h\",   base_size = 10 )"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_data_exploration.html","id":"note-on-cell-suppression","dir":"Articles","previous_headings":"Summary plots","what":"Note on cell suppression","title":"Plotting Functions - Easy Plots for Data Exploration","text":"current version plot_summary() meant used data exploration analyst. plots generally exported/shared external collaborators. plan share plots created plot_summary(), please make sure plots comply GEMINI’s cell suppression rules protect patient privacy. Specifically, categories n < 6 removed plots histogram bins sufficiently large ensure n >= 6 bin.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_data_exploration.html","id":"plot_over_time","dir":"Articles","previous_headings":"","what":"Plot variables over time","title":"Plotting Functions - Easy Plots for Data Exploration","text":"Another common way explore GEMINI data plot variables time, can done single line code using plot_over_time() function Rgemini. default, function assumes users want aggregate data certain time interval (default = \"month\") hospital (plotted individual subplots). can provide important insights differences across sites temporal trends. recommend generating plots cohort creation check potential data availability/quality issues, outliers, biases may introduced cohort generation.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_data_exploration.html","id":"default-plot-1","dir":"Articles","previous_headings":"Plot variables over time","what":"Default plot","title":"Plotting Functions - Easy Plots for Data Exploration","text":"default, plot_over_time() function plots mean user-specified plot_var (e.g., age) hospital month. example:    subplot shows mean age individual hospital, thick line represents mean age across sites (note: hospitals encounters contribute line hospitals fewer encounters).  ","code":"plot_over_time(   data = ipadmdad,    plot_var = \"age\" )"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_data_exploration.html","id":"overview-of-optional-inputs","dir":"Articles","previous_headings":"Plot variables over time","what":"Overview of optional inputs","title":"Plotting Functions - Easy Plots for Data Exploration","text":"several ways users can customize default plot providing additional input arguments, explained detail . Briefly, users can provide following input arguments: func: function use aggregate data (default: \"mean\" continuous variables \"prct\" categorical variables); users can also plot number rows (\"n\") percent missing (\"na\") time_var: Date-time variable interest (default: discharge_date_time) time_int: Time interval aggregate data (default: month, quarter, year, fisc_year, season, custom time interval) line_group: Grouping variable corresponding individual lines (default: \"hospital_num\" \"hospital_id\") color_group: Grouping variable used color coding lines (e.g., hospital-level grouping \"hospital_type\" encounter-level grouping \"gender\") facet_group: Grouping variable used facet_wrap (default: facet_group = \"hospital_num\" \"hospital_id\" plot individual subplots per hospital); set NULL plot everything single plot show_overall: Flag indicating whether plot thick line showing overall result value across individual lines (grouped color_group specified) smooth_method: Method smoothed trend lines (default: NULL smoothing); set \"auto\" (flexible trend line) \"lm\" (linear trend lines). min_n: Minimum number data points required per cell. cells n < min_n suppressed removed figure return_data: Whether return aggregated data instead plotting results Additional plotting aesthetics like line_width, ylimits, colors (see function documentation details)  ","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_data_exploration.html","id":"func","dir":"Articles","previous_headings":"Plot variables over time > Overview of optional inputs","what":"func","title":"Plotting Functions - Easy Plots for Data Exploration","text":"continuous variables, users can specify func = \"median\" instead default func = \"mean\". categorical variables, function plots percentages (func = \"prct\"). Users can additionally provide plot_cat indicate category/factor level plot (default, function plots % last category level, e.g., TRUE logical variables). example, plot percentage female encounters:    plotting percentages, entries NA/\"\" automatically removed numerator denominator. wanted plot discharge_disposition, class integer, function default plot \"mean\". However, reality, discharge disposition represents categorical variable, either transform discharge_disposition factor variable plotting, alternatively, run following code plot percentage encounters discharge_disposition %% c(7, 72, 73, 74) (.e., % hospitalizations resulted -hospital death):    can also simply plot number rows per month * hospital specifying func = \"n\". great way check potential data availability issues (e.g., time periods 0 rows might reflect gaps data availability). example , number rows corresponds number unique encounters ipadmdad, depending table provide data input, count rows might reflect variables, total number pharmacy orders, lab tests etc.    Note plot n, thick “overall” line represents median (individual hospital) lines, rather total count rows across sites.   Finally, plot_over_time() can also used plot percentage missing data specifying func = \"na\" \"missing\", plots percentage entries either NA, \"\", \" \". Let’s plot % encounters missing ALC flag rename y-axis title \"% Missing ALC\":   ","code":"plot_over_time(   data = ipadmdad,   plot_var = \"gender\",   plot_cat = \"F\"   #func = \"%\" # not required in this case because gender is a character variable, so the function infers that func should be \"%\" ) plot_over_time(   data = ipadmdad,   plot_var = \"discharge_disposition\",   func = \"%\",   plot_cat = c(7, 72, 73, 74) ) plot_over_time(   data = ipadmdad,   func = \"n\" ) plot_over_time(   data = ipadmdad,   plot_var = \"alc_service_transfer_flag\",   func = \"na\" ) + labs(y = \"% Missing ALC flag\")"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_data_exploration.html","id":"time","dir":"Articles","previous_headings":"Plot variables over time > Overview of optional inputs","what":"time_var and time_int","title":"Plotting Functions - Easy Plots for Data Exploration","text":"time_var specifies variable containing relevant date-time information. Typically, GEMINI data, \"discharge_date_time\" since hospital data pulled based discharge dates. time_int specifies time interval use aggregation (.e., resolution along x-axis). default, function aggregates data month, users also specify \"quarter\", \"year\", \"fisc_year\" (hospital fiscal year starting April), \"season\". example, plot number encounters discharged fiscal year:    … number encounters admitted season*:    *Note: plotting admission date-time, might underestimating encounters end data availability timeline (patients appear GEMINI data discharged). Therefore, plotting admission date done caution might require buffer period excludes data points end data availability period.   Custom time_int Note users can principle specify custom time interval long provided column data input. example, let’s say want plot number encounters admitted hospital day April 2020. Users can calculate admission date prior running function provide time_int input:   ","code":"plot_over_time(   data = ipadmdad,   func = \"n\",   #time_var = \"discharge_date_time\", # default   time_int = \"fisc_year\" ) plot_over_time(   data = ipadmdad,   func = \"n\",   time_var = \"admission_date_time\",   time_int = \"season\" ) library(lubridate) ipadmdad[, my_date := as.Date(ymd_hm(admission_date_time))]  plot_over_time(   data = ipadmdad[my_date >= \"2020-04-01\" & my_date <= \"2020-04-30\", ],   func = \"n\",   time_int = \"my_date\" )"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_data_exploration.html","id":"line_group","dir":"Articles","previous_headings":"Plot variables over time > Overview of optional inputs","what":"line_group","title":"Plotting Functions - Easy Plots for Data Exploration","text":"plots shown , individual hospitals shown different subplots. also show hospitals single plot specifying facet_group = NULL. case, function still assumes users want aggregate hospitals, thus, hospitals shown individual lines (default: line_group = \"hospital_num\"):    Alternatively, users can also specify line_group variables representing individual physicians, patients, grouping variables.  ","code":"plot_over_time(   ipadmdad,   plot_var = \"age\",   facet_group = NULL#,   #line_group = \"hospital_num\" # default )"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_data_exploration.html","id":"color_group","dir":"Articles","previous_headings":"Plot variables over time > Overview of optional inputs","what":"color_group","title":"Plotting Functions - Easy Plots for Data Exploration","text":"Users can apply additional layer grouping based color. example, may want group hospitals different types, academic vs. community hospitals. illustration purposes, random hospital_type assigned dummy data can add hospital_type color_group variable. ’ll also set show_overall FALSE remove thick overall line plots:    default, first color palette defined gemini_colors() (“GEMINI Rainbow”) used color_group colors (see section Plotting theme & colors details).   Another application color_group plot individual hospitals single plot apply color-coding distinguish individual sites. can achieved setting facet_group NULL specifying hospital_num color_group. good option plotting lot hospitals time, example plot hospitals 1-6. Let’s also pick different color palette gemini_colors() :    Similarly, plot academic & community hospitals single plot apply color coding based hospital_type. , thick lines represent overall mean age hospital type. Note data aggregated across encounters group level (e.g., cyan line represents mean age encounters community site). means larger hospitals contribute average smaller hospitals:    plot busy simply want illustrate aggregated results hospital type, suppress individual hospital lines specifying line_group = NULL. can also provide custom colors specify ylimits. Additionally, let’s add annotations highlighting onset first COVID-19 wave March 2020:   ","code":"# assign (random) hospital grouping variable ipadmdad[, hospital_type := sample(   c(\"Academic\", \"Community\"), prob = c(.4, .6), 1, replace = TRUE ), by = hospital_num]   plot_over_time(   ipadmdad,   plot_var = \"age\",   color_group = \"hospital_type\",   show_overall = FALSE ) plot_over_time(   ipadmdad[hospital_num <= 6, ],   plot_var = \"age\",   color_group = \"hospital_num\",   facet_group = NULL,   colors = gemini_colors(4) # equivalent to gemini_colors(\"Lavender Lagoon\") or simply gemini_colors(\"l\") ) plot_over_time(   ipadmdad,   plot_var = \"age\",   color_group = \"hospital_type\",   facet_group = NULL ) plot_over_time(   ipadmdad,   plot_var = \"age\",   line_group = NULL,   color_group = \"hospital_type\",   facet_group = NULL,   colors = c(\"#86b9b0\", \"#c266a7\"),   ylimits = c(63, 83) ) +    annotate(\"text\", x = as.Date(\"2020-03-01\"), y = 80, label = \"1st COVID wave\", color = \"#022061\") +    annotate(\"segment\", x = as.Date(\"2020-03-01\"), xend = as.Date(\"2020-03-01\"), y = 63, yend = 79, color = \"#022061\", linetype = 2)"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_data_exploration.html","id":"facet_group","dir":"Articles","previous_headings":"Plot variables over time > Overview of optional inputs","what":"facet_group","title":"Plotting Functions - Easy Plots for Data Exploration","text":"Instead using color coding add grouping variables, can also specify facet_group variable passed facet_wrap(). default, facet_group set \"hospital_num\" facilitate visualization individual hospitals. However, purpose comparing different hospital types, instead specify facet_group = \"hospital_type\" plot academic vs. community hospitals separate subplots:    Additional inputs facet plots Users can provide additional input arguments passed lemon::facet_rep_wrap() (wrapper ggplot2::facet_wrap()), : nrow ncol control number rows columns scales specifying x-/y-axis limits \"fixed\" (default) \"free\" across subplots. “Free” scales useful illustrate within-hospital trends, regardless -hospital differences. example, may want visualize effect “season” encounter numbers (regardless total number encounters hospital). , plot 2 x 6 facet plot free y scales:    specify ylimits input, overwrite scales = \"free\" ylimits fix y-axes specified range. Specifying free x-scales (scales = \"free_x\" scales = \"free\") can result differences plotted timelines hospitals generally recommended purpose function.  ","code":"plot_over_time(   ipadmdad,   plot_var = \"age\",   facet_group = \"hospital_type\",   show_overall = TRUE ) plot_over_time(   ipadmdad,   func = \"n\",   time_int = \"season\",   nrow = 2,   scales = \"free_y\" )"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_data_exploration.html","id":"min_n","dir":"Articles","previous_headings":"Plot variables over time > Overview of optional inputs","what":"min_n","title":"Plotting Functions - Easy Plots for Data Exploration","text":"applying multiple grouping variables (e.g., illustrate interactions), number data points per cell might low, especially smaller cohorts. Users can specify min_n apply cell suppression cells n < min_n data points. example, might want illustrate interactions hospital type patient’s gender age. Since many encounters gender = \"O\", may want apply cell suppression data points n < 6 specifying min_n = 6. sample data, cell gender == \"O\" least 6 data points, results gender = \"0\" fully suppressed example:    warning message shown inform users groups (individual cells) excluded due cell suppression.  ","code":"plot_over_time(   ipadmdad,   plot_var = \"age\",   line_group = \"gender\",   color_group = \"gender\",   facet_group = \"hospital_type\",   min_n = 6,   show_overall = FALSE ) #> Warning in FUN(X[[i]], ...): The following levels of input variable 'gender' #> were removed from this plot due to cell suppression (all n < 6): #> [1] \"O\""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_data_exploration.html","id":"smooth_method","dir":"Articles","previous_headings":"Plot variables over time > Overview of optional inputs","what":"smooth_method","title":"Plotting Functions - Easy Plots for Data Exploration","text":"facilitate visualization time trends, users can specify smoothing method (also see ? geom_smooth), \"auto\" flexible, non-linear trend line \"lm\" linear trend line. Individual data points now shown dots. Note trend line fitted aggregated data points (.e., case, month contributes equally trend line, regardless number data points).    plot, “Overall” line now represents trend line fitted data aggregated across hospitals.   also show overall, aggregated trend line (plus overall data points aggregated across whole dataset) single plot. , plot linear trend illustration purposes:   ","code":"plot_over_time(   ipadmdad,   plot_var = \"age\",   smooth_method = \"auto\" ) plot_over_time(   ipadmdad,   plot_var = \"age\",   facet_group = NULL,   line_group = NULL,   smooth_method = \"lm\" )"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_data_exploration.html","id":"return_data","dir":"Articles","previous_headings":"Plot variables over time > Overview of optional inputs","what":"return_data","title":"Plotting Functions - Easy Plots for Data Exploration","text":"might situations users want function return aggregated data, instead plotting results. useful debugging purposes, checking outliers, process data plotting results (e.g., additional exclusions etc.). also allows users plot aggregated data plotting packages/apply customization plots. retrieve aggregated data, simply specify return_data = TRUE:   return list 2 data.table objects: 1st list entry corresponds results aggregated time interval (default = \"month\") grouping variables (line_group, color_group, facet_group - ). example, grouped line_group = \"hospital_num\" (default) color_group = \"hospital_type\" output look like :   2nd list entry corresponds higher-level grouping “overall” results (.e., thick summary line plots ), groups time interval color_group (), hospital_type example:   tables, n corresponds number data points cell.  ","code":"res <- plot_over_time(   ipadmdad,   color_group = \"hospital_type\",   func = \"median\",   plot_var = \"age\",   return_data = TRUE ) knitr::kable(head(res[[1]])) knitr::kable(head(res[[2]]))"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_data_exploration.html","id":"notes-on-using-plotly","dir":"Articles","previous_headings":"Plot variables over time","what":"Notes on using plotly","title":"Plotting Functions - Easy Plots for Data Exploration","text":"can useful apply plotly::ggplotly() create interactive plots can facilitate data exploration. However, please note ggplotly can mess certain plot aesthetics. example, apply ggplotly default plot_over_time, axis labels now overlap x-tick marks legend position moved top right:   can apply necessary adjustments returned ggplot /run plotly::layout() achieve desired aesthetics. example, move “Discharge Month” label change legend position:","code":"library(plotly) ggplotly(plot_over_time(data = ipadmdad, plot_var = \"age\")) # create plot my_plot <- plot_over_time(data = ipadmdad, plot_var = \"age\")  # adjust space for x-axis title my_plot <- my_plot + labs(x = \"\\nDischarge Month\")   # apply additional formatting using layout() ggplotly(my_plot) %>%     layout(legend = list(x = 1, y = 0.5)) # change legend position"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_theme.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Plotting Functions - Themes & Colors","text":"vignette introduces standardized plotting theme (plot_theme()) color palettes (gemini_colors()) users can apply ggplot figures create analyses. goal functions simplify process creating figures clean consistent look. create publication-ready figures, recommend users apply additional customization based needs (see section Resources).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_theme.html","id":"plot_theme","dir":"Articles","previous_headings":"","what":"Theme for ggplots","title":"Plotting Functions - Themes & Colors","text":"Rgemini::plot_theme() adds simple theme ggplot figures. theme based ggthemes::theme_foundation(), additional tweaks, users can easily adjust theme needed. default, plot_theme() applied plotting functions Rgemini (e.g., plot_summary() plot_over_time()). following example illustrates theme applied basic barplot. Note: plot_theme change bar colors, general plot aesthetics (e.g., background/axes/grid/fonts). However, illustration purposes, also add default color palette gemini_colors() using fill (see section Color Palettes details):    ","code":"library(Rgemini) #> Error in get(paste0(generic, \".\", class), envir = get_method_env()) :  #>   object 'type_sum.accel' not found library(ggplot2)  # create example data my_data <- data.frame(group = c(\"A\", \"B\", \"C\"), mean = c(5, 7, 4))  # generate barplot my_plot <- ggplot(data = my_data, aes(x = group, y = mean, fill = group)) +   geom_bar(stat = \"identity\", fill = gemini_colors(1)[1:3]) +   scale_y_continuous(name = \"Mean\", expand = expansion(mult = c(0, .05)))  # original ggplot theme my_plot + ggtitle(\"Original plot\") my_plot +   plot_theme() + # add Rgemini plot_theme   ggtitle(\"Plot with default GEMINI theme\")"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_theme.html","id":"additional-inputs-for-plot_theme","dir":"Articles","previous_headings":"Theme for ggplots","what":"Additional inputs for plot_theme()","title":"Plotting Functions - Themes & Colors","text":"plot_theme() accepts inputs specifying font size/type (passed ggthemes::theme_foundation()). Users can also specify whether show major/minor grid lines. example:    Additionally, plot_theme() accepts inputs can passed ggplot2::theme(), allows customization (see ). example, change aspect ratio plot angle x-tick labels:   ","code":"my_plot +    plot_theme(base_size = 15, base_family = \"mono\", show_grid = c(\"major\", \"minor\")) +   ggtitle(\"Mono plot with grid lines\") my_plot +    plot_theme(     aspect.ratio = 1.5,     axis.text.x = element_text(angle = 45, hjust = 1)   ) +   ggtitle(\"Tall plot with tilted x-tick labels\")"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_theme.html","id":"overwriting-plot_theme-settings","dir":"Articles","previous_headings":"Theme for ggplots","what":"Overwriting plot_theme() settings","title":"Plotting Functions - Themes & Colors","text":"specifying inputs settings already defined plot_theme(), see error message saying argument matched multiple inputs. example, plot_theme() already specifies default characteristics plot.title (face = \"bold\"). Thus, try run following code italicize title, see error message saying: Error theme(plot.title = element_text(face = ‘bold’, size = rel(1), : formal argument ‘plot.title’ matched multiple actual arguments   avoid error, need add separate ggplot2::theme(), overwrite default characteristics specified plot_theme():","code":"my_plot +    plot_theme(plot.title = element_text(face = \"italic\")) +   ggtitle(\"Plot with additional theme\") my_plot +    plot_theme() +   theme(plot.title = element_text(face = \"italic\")) +   ggtitle(\"Plot with italicized title\")"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_theme.html","id":"gemini_colors","dir":"Articles","previous_headings":"","what":"GEMINI Color Palettes","title":"Plotting Functions - Themes & Colors","text":"Rgemini includes custom color palettes can applied figures. view color palettes, can run:  “GEMINI Glow” (palette #1) used default color palette.","code":"plot_color_palettes()"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_theme.html","id":"colorblind-accessibility","dir":"Articles","previous_headings":"GEMINI Color Palettes","what":"Colorblind Accessibility","title":"Plotting Functions - Themes & Colors","text":"GEMINI color palettes designed colorblind accessible. However, within color palette, certain combinations colors may easier distinguish others. need small subset colors, recommend choosing ones easily distinguishable. can check colorblind friendly chosen color combinations using colorBlindness R library website: https://www.color-blindness.com/coblis-color-blindness-simulator/ example, simulates colors “GEMINI Glow” palette (#1) perceived colorblind person:","code":"library(colorBlindness)  fig <- ggplot(data.frame(x = as.factor(seq(7, 1))),               aes(x = 1, y = 1, fill = x)) +   geom_col(position = position_stack(reverse = TRUE), show.legend = FALSE) +   scale_fill_manual(values = gemini_colors(1)) +   coord_flip() +    theme_void() +    theme(aspect.ratio = 0.3,         plot.title = element_text(hjust = 0))  fig + ggtitle(\"Original\") colorBlindness::cvdPlot(fig, layout = c(\"deuteranope\", \"protanope\"))"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_theme.html","id":"selecting-gemini-palettesindividual-colors","dir":"Articles","previous_headings":"GEMINI Color Palettes","what":"Selecting GEMINI palettes/individual colors","title":"Plotting Functions - Themes & Colors","text":"hex values individual palette can obtained running gemini_colors() numeric input (e.g., gemini_colors(2) “Shadowed Spectrum”) character input matches starting character(s) given palette (e.g., gemini_colors(\"S\") “Shadowed Spectrum”). example:    approach works figures generated R package.  ","code":"set.seed(2) data <- data.frame(x = rnorm(50),                     y = rnorm(50),                     group = sample(c(\"A\", \"B\", \"C\", \"D\", \"E\"), 50, replace = TRUE))  ggplot(data, aes(x = x, y = y, color = group)) +   geom_point() +   plot_theme() +   scale_color_manual(values = gemini_colors(2)) # = gemini_colors(\"S\")"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_theme.html","id":"applying-gemini-colors-to-ggplots","dir":"Articles","previous_headings":"GEMINI Color Palettes","what":"Applying GEMINI colors to ggplots","title":"Plotting Functions - Themes & Colors","text":"figures created ggplot2, can also use scale_fill_gemini() scale_color_gemini() apply color palettes. example:   ","code":"ggplot(data, aes(x = x, y = y, color = group)) +   geom_point() +   plot_theme() +   scale_color_gemini(4) # = gemini_colors(\"L\")"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_theme.html","id":"color-palettes-from-other-packages","dir":"Articles","previous_headings":"GEMINI Color Palettes","what":"Color palettes from other packages","title":"Plotting Functions - Themes & Colors","text":"addition GEMINI color palettes, several packages create beautiful color palettes publication-ready figures. short intro colorblind friendly options recommend using. palettes allow additional flexibility customization currently supported GEMINI color palettes.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_theme.html","id":"viridis","dir":"Articles","previous_headings":"GEMINI Color Palettes > Color palettes from other packages","what":"viridis","title":"Plotting Functions - Themes & Colors","text":"viridis color palettes set perceptually uniform color maps designed scientific visualization. developed address limitations traditional color maps, often suffer uneven brightness discontinuities hue. details, see example, selection 7 colors “Viridis” palette:    … viridis’ “Magma” palette:   ","code":"library(viridis) fig + scale_fill_viridis(discrete = TRUE, option = \"viridis\") fig + scale_fill_viridis(discrete = TRUE, option = \"magma\")"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_theme.html","id":"ggsci","dir":"Articles","previous_headings":"GEMINI Color Palettes > Color palettes from other packages","what":"ggsci","title":"Plotting Functions - Themes & Colors","text":"ggsci package provides collection color palettes specifically designed scientific journals. color palettes designed enhance visual appeal interpretability ggplot2 graphics. details, see . examples commonly used ggsci palettes include: JAMA palette:  Lancet palette:  JCO palette:   ","code":"library(ggsci) fig + scale_fill_jama() fig + scale_fill_lancet() fig + scale_fill_jco()"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_theme.html","id":"rcolorbrewer","dir":"Articles","previous_headings":"GEMINI Color Palettes > Color palettes from other packages","what":"RColorBrewer","title":"Plotting Functions - Themes & Colors","text":"ColorBrewer flexible tool selecting color schemes. ColorBrewer includes color palettes colorblind safe, print friendly, perceptually uniform. offers wide range colors optimized different types data visualization purposes. details, see . example, illustrates “PRGn” palette:    can explore colorblind friendly ColorBrewer palettes running:","code":"library(RColorBrewer) fig + scale_fill_brewer(palette = \"PRGn\") display.brewer.all(colorblindFriendly = TRUE)"},{"path":"https://gemini-medicine.github.io/Rgemini/articles/plotting_theme.html","id":"resources","dir":"Articles","previous_headings":"","what":"Resources","title":"Plotting Functions - Themes & Colors","text":"ggplot2 vignette theme specifications: https://ggplot2.tidyverse.org/reference/theme.html comprehensive guide ggplot2 & color palettes: https://www.cedricscherer.com/2019/08/05/-ggplot2-tutorial--beautiful-plotting--r/ ggsci color palettes scientific journals: https://cran.r-project.org/web/packages/ggsci/vignettes/ggsci.html https://nanx./ggsci/articles/ggsci.html viridis color maps: https://cran.r-project.org/web/packages/viridis/vignettes/intro--viridis.html color brewer: https://colorbrewer2.org/#type=sequential&scheme=BuGn&n=3","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"GEMINIdata. Maintainer.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"GEMINI (2025). Rgemini: R Functions GEMINI Data. R package version 1.0.2, https://gemini-medicine.github.io/Rgemini/.","code":"@Manual{,   title = {Rgemini: R Functions for GEMINI Data},   author = {{GEMINI}},   year = {2025},   note = {R package version 1.0.2},   url = {https://gemini-medicine.github.io/Rgemini/}, }"},{"path":"https://gemini-medicine.github.io/Rgemini/index.html","id":"rgemini","dir":"","previous_headings":"","what":"R Functions for GEMINI Data","title":"R Functions for GEMINI Data","text":"Rgemini (GEMINI) custom R package provides variety functions perform data analyses GEMINI data. functions developed GEMINI team tested current version GEMINI database.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"R Functions for GEMINI Data","text":"Rgemini currently yet available CRAN. development version can installed GitHub following:","code":"remotes::install_github(\"GEMINI-Medicine/Rgemini\", build_vignettes = TRUE)"},{"path":"https://gemini-medicine.github.io/Rgemini/index.html","id":"alternatives","dir":"","previous_headings":"Installation","what":"Alternatives","title":"R Functions for GEMINI Data","text":"installation method work, try one following: Install using pak::pkg_install(\"GEMINI-Medicine/Rgemini\"). git clone package directory /path//repo, run devtools::install(\"/path//repo\", build_vignettes = TRUE). Download latest source tarball package releases directory /path//tarball run install.packages(\"/path//tarball\", repos = NULL, type=\"source\"). Try configuring secure downloads described blog post. none methods work, please create post discussion board.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/index.html","id":"hpc4health","dir":"","previous_headings":"Installation","what":"HPC4Health","title":"R Functions for GEMINI Data","text":"installing Rgemini GEMINI HPC4Health environment, simply call install.packages(\"Rgemini\"). R script dependency Rgemini like run script Slurm, please point library call local folder Rgemini installed. example:","code":"library(Rgemini, lib.loc = \"$HOME/R/x86_64-pc-linux-gnu-library/4.1\")"},{"path":"https://gemini-medicine.github.io/Rgemini/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"R Functions for GEMINI Data","text":"functions require access GEMINI database. access, functions can used follows: Please review extensive package documentation vignettes detailed examples sample code.","code":"library(Rgemini)  # establish DB connection drv <- DBI::dbDriver(\"PostgreSQL\") db <- DBI::dbConnect(   drv,   dbname = \"db_name\",   host = \"domain_name.ca\",   port = 1234,   user = getPass::getPass(\"Enter Username\"),   password = getPass::getPass(\"Enter Password\") )  # for newer HPC4Health datacuts (H4H >= v4.0.0): # set the schema according to the datacut name dbSendQuery(db, \"Set schema 'datacut_name'\");  # query data admdad <- DBI::dbGetQuery(   db,   \"SELECT * FROM admdad LIMIT 200;\" )  # run Rgemini function readm <- readmission(   db = db )"},{"path":"https://gemini-medicine.github.io/Rgemini/index.html","id":"contributing","dir":"","previous_headings":"","what":"Contributing","title":"R Functions for GEMINI Data","text":"Currently, GEMINI team members can directly contribute package. However, invite users share feedback suggestions us can continue improve Rgemini. identify package bugs like request enhancements, please open GitHub issue. also activated GitHub discussion forum submit questions package functionality discuss applications Rgemini functions research question. Note repository public, please share sensitive information /GEMINI data GitHub site! GEMINI team members: Please carefully review CONTRIBUTING.md file guidelines contribute review code.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/index.html","id":"package-versions","dir":"","previous_headings":"","what":"Package versions","title":"R Functions for GEMINI Data","text":"Different versions Rgemini released X.Y.Z. increments following conventions: Z: Patch version, bug fixes, documentation, tests, changing argument defaults, optimizing internals function without affecting external interface (argument names etc). Y: Minor version, new function added, large changes existing functions (including even changes type number arguments). X: Major version, change underlying DB code written (e.g., table variable names). Usually accumulate series changes develop release master version increment.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/index.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"R Functions for GEMINI Data","text":"find Rgemini useful, please cite publications using citation(\"Rgemini\"): GEMINI team (2023). Rgemini: R Functions GEMINI Data. R package version . https://gemini-medicine.github.io/Rgemini/ Note particular functions may require additional citations. Please consult references function-specific documentation whenever applicable.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/charlson_comorbidity_index.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Charlson comorbidity index (CCI) score — charlson_comorbidity_index","title":"Compute Charlson comorbidity index (CCI) score — charlson_comorbidity_index","text":"Based methodology Charlson et al. 1988, Quan H et al. 2005, Quan et al. 2011 using ICD-10 codes mapping algorithm, implemented R comorbidity package Gasparini, 2018. Can compute either CCI score admission based HSMR Methodology entire patient encounter. default compute comorbidity admission.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/charlson_comorbidity_index.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Charlson comorbidity index (CCI) score — charlson_comorbidity_index","text":"","code":"charlson_comorbidity_index(   ipdiag,   erdiag,   at_admission = TRUE,   raw_comorbidities = FALSE )"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/charlson_comorbidity_index.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Charlson comorbidity index (CCI) score — charlson_comorbidity_index","text":"ipdiag (data.table data.frame)ipdiagnosis table defined GEMINI Data Repository Dictionary. erdiag (data.table data.frame)erdiagnosis table defined GEMINI Data Repository Dictionary. Typically, ER diagnoses included deriving comorbidity order increase sensitivity. However, certain scenarios, users may choose include IP diagnoses specifying erdiag = NULL. may useful comparing cohorts different rates ER admissions. at_admission (logical) Whether calculate score comorbidities pre-admit comorbidities. raw_comorbidities (logical) Whether output data.table raw comorbidities opposed pre-computed scores.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/charlson_comorbidity_index.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Charlson comorbidity index (CCI) score — charlson_comorbidity_index","text":"(data.table) default, encounter, outputs comorbidity score. raw_comorbidities TRUE, outputs wide data.table column comorbidity encounter.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/charlson_comorbidity_index.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute Charlson comorbidity index (CCI) score — charlson_comorbidity_index","text":"hierarchy comorbidities used calculating cormorbidity score, outputting raw_comorbidites. affects comorbidities present patient different degrees severity. See documentation comorbidity::comorbidity() details.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/charlson_comorbidity_index.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Compute Charlson comorbidity index (CCI) score — charlson_comorbidity_index","text":"Charlson M, et al. Journal Chronic Diseases, 1988. https://doi.org/10.1016/0021-9681(87)90171-8 Quen H, et al. Med Care, 2005. https://www.jstor.org/stable/3768193 Quan H, et al. J Epidemiol, 2011. https://doi.org/10.1093/aje/kwq433 Gasparini . JOSS, 2018. https://doi.org/10.21105/joss.00648","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/check_input.html","id":null,"dir":"Reference","previous_headings":"","what":"Check user inputs — check_input","title":"Check user inputs — check_input","text":"Function checking whether user-provided inputs function appropriate. following check applied inputs: Whether input correct type (e.g., logical, numeric, character etc.) input types, following additional checks can applied optionally: Check whether length provided input expected numeric/integer inputs: Check whether provided input within acceptable interval (e.g., 1-100). character (categorical) inputs: Check whether input corresponds one acceptable categories. data.table|data.frame inputs: 1) Check whether required columns exist table, 2) whether column specified type, 3) whether entries unique.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/check_input.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check user inputs — check_input","text":"","code":"check_input(   arginput,   argtype,   length = NULL,   categories = NULL,   interval = NULL,   colnames = NULL,   coltypes = NULL,   unique = FALSE )"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/check_input.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check user inputs — check_input","text":"arginput (character) Input argument checked. Users can provide multiple inputs checked within single call function providing inputs list (e.g., arginput = list(input1, input2)). However, works input arguments (e.g., input1 input2) supposed meet criteria (e.g., numeric within interval 0-10). argtype (character) Required type input argument based class(). Example type(s) users can specify: \"logical\" \"character\" \"numeric\" (\"integer\" specifically checking integers) \"data.table\" \"data.frame\" \"DBI\" | \"dbcon\" | \"PostgreSQL\" DB connection input \"list\" \"Date\", \"POSIXct\", \"POSIXt\" ... input object can one several acceptable types (e.g., data.table data.frame), types provided character vector (e.g., argtype = c(\"data.frame\", \"data.table\")). argtype \"integer\", tests pass class(input) == \"integer\" class(input) == \"numeric\" number integer argtype \"numeric\", inputs class \"integer\" also pass. words, integers treated special case numeric case argtype. Therefore, checks argtype = c(\"integer\", \"numeric\") (.e., input either integer numeric) meaningful avoided. Instead, users specify inputs need \"integer\" specifically (argtype = \"integer\"), just need \"numeric\" input (argtype = \"numeric\"). length (numeric) Optional input specifying expected length given input argument (e.g., use length = 2 check vector/list contains 2 elements). categories (character) Optional input argtype \"character\". Character vector specifying acceptable categories character inputs (e.g., categories = c(\"none\", \"\")) interval (numeric) Optional input argtype \"numeric\" \"integer\". Numeric vector specifying acceptable range numeric inputs (e.g., interval = c(1,100), non-negative numbers: interval = c(0, Inf)). Note interval specifies closed interval (.e., end points included). colnames (character) Optional input argtype \"data.frame\" \"data.table\". Character vector specifying columns need exist input table (e.g., colnames = c(\"genc_id\", \"discharge_date_time\")). coltypes (character) Optional input argtype \"data.frame\" \"data.table\". Character vector specifying required data type column colnames (e.g., coltypes = c(\"integer\", \"character\")) order vector elements correspond order entries colnames. column can multiple acceptable types, types separated | (e.g., coltypes = c(\"integer|numeric\", \"character|POSIXct\"))). columns particular type, simply specify \"\" (e.g., coltypes = c(\"integer|numeric\", \"\")). Note: opposed argtype, coltypes need strictly correspond type returned class(column). means type \"integer\" special case \"numeric\", treated separate type. relevant genc_id columns, class \"integer\", therefore coltype = \"numeric\" return error. unique (logical) Optional input argtype \"data.frame\" \"data.table\". Flag indicating whether rows provided input table need distinct.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/check_input.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check user inputs — check_input","text":"input checks fail, function return error message stop execution parent Rgemini function. Otherwise, function return anything.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/check_input.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check user inputs — check_input","text":"","code":"if (FALSE) { # \\dontrun{ my_function <- function(input1 = TRUE, # logical                         input2 = 2, # numeric                         input3 = 1.5, # numeric                         input4 = data.frame(                           genc_id = as.integer(5),                           discharge_date_time = Sys.time(),                           hospital_num = 1                         )) {   # check single input   check_input(input1, \"logical\")    # check multiple inputs that should be of same type/meet same criteria   check_input(     arginput = list(input2, input3), argtype = \"numeric\",     length = 1, interval = c(1, 10)   )    # check table input (can be either data.frame or data.table)   check_input(input4,     argtype = c(\"data.table\", \"data.frame\"),     colnames = c(\"genc_id\", \"discharge_date_time\", \"hospital_num\"),     coltypes = c(\"integer\", \"character|POSIXct\", \"\"),     unique = TRUE   ) }  # will not result in any errors (default inputs are correct) my_function()  # will result in an error my_function(input1 = 1) # input 1 has to be logical } # }"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/coerce_to_datatable.html","id":null,"dir":"Reference","previous_headings":"","what":"Coerce to data.table — coerce_to_datatable","title":"Coerce to data.table — coerce_to_datatable","text":"Rgemini functions rely data.table operations assume input provided data.table format.  , coerce message ensure function logic works without breaking.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/coerce_to_datatable.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Coerce to data.table — coerce_to_datatable","text":"","code":"coerce_to_datatable(data)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/coerce_to_datatable.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Coerce to data.table — coerce_to_datatable","text":"data (data.frame data.table) data check class coerce data.table necessary.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/coerce_to_datatable.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Coerce to data.table — coerce_to_datatable","text":"(data.table) original data provided argument, data.table.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/coerce_to_datatable.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Coerce to data.table — coerce_to_datatable","text":"","code":"mtcars <- coerce_to_datatable(mtcars) #> Warning: mtcars was passed as a data.frame and has been coerced to a data.table."},{"path":"https://gemini-medicine.github.io/Rgemini/reference/comorbidity_index.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Comorbidity Index — comorbidity_index","title":"Compute Comorbidity Index — comorbidity_index","text":"generic function wrapped charlson_comorbidity_index() elixhauser_comorbidity_index() meant used directly. function interface comorbidity::comorbidity() GEMINI data, providing options outputting raw comorbidities comorbidities admission.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/comorbidity_index.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Comorbidity Index — comorbidity_index","text":"","code":"comorbidity_index(   ipdiag,   erdiag,   map,   weights,   at_admission = TRUE,   raw_comorbidities = FALSE )"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/comorbidity_index.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Comorbidity Index — comorbidity_index","text":"ipdiag (data.table data.frame)ipdiagnosis table defined GEMINI Data Repository Dictionary. erdiag (data.table data.frame)erdiagnosis table defined GEMINI Data Repository Dictionary. Typically, ER diagnoses included deriving comorbidity order increase sensitivity. However, certain scenarios, users may choose include IP diagnoses specifying erdiag = NULL. may useful comparing cohorts different rates ER admissions. map String denoting mapping algorithm used (values case-insensitive). Possible values Charlson score either ICD-10 ICD-9-CM codes (charlson_icd10_quan, charlson_icd9_quan) Elixhauser score, using either ICD-10 ICD-9-CM (elixhauser_icd10_quan, elixhauser_icd9_quan). mapping based paper Quan et al. (2011). also possible obtain Swedish (charlson_icd10_se) Australian (charlson_icd10_am) modification Charlson score using ICD-10 codes. weights string denoting weighting system used, depend mapping algorithm. Possible values Charlson index : charlson, original weights Charlson et al. (1987); quan, revised weights Quan et al. (2011). Possible values Elixhauser score : vw, weights van Walraven et al. (2009); swiss, Swiss Elixhauser weights Sharma et al. (2021). Defaults NULL, case unweighted score used. at_admission (logical) Whether calculate score comorbidities pre-admit comorbidities. raw_comorbidities (logical) Whether output data.table raw comorbidities opposed pre-computed scores.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/comorbidity_index.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Comorbidity Index — comorbidity_index","text":"(data.table) default, encounter, outputs comorbidity score. raw_comorbidities TRUE, outputs wide data.table column comorbidity encounter.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/comorbidity_index.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute Comorbidity Index — comorbidity_index","text":"hierarchy comorbidities used calculating cormorbidity score, outputting raw_comorbidites. affects comorbidities present patient different degrees severity. See documentation comorbidity::comorbidity() details.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/convert_dt.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert date-time variables into POSIXct/POSIXt format. — convert_dt","title":"Convert date-time variables into POSIXct/POSIXt format. — convert_dt","text":"function converts date-time variables user-specified format. convert_dt called Rgemini functions make sure date-time inputs expected order (typically \"ymd HM\"). can also used independently Rgemini functions clean date-times analyses. function additionally returns warning messages missing/invalid date-time entries can useful debugging.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/convert_dt.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert date-time variables into POSIXct/POSIXt format. — convert_dt","text":"","code":"convert_dt(   dt_var,   orders = \"ymd HM\",   check_ts_zeros = FALSE,   dt_varname = NULL,   addtl_msg = NULL,   ... )"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/convert_dt.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert date-time variables into POSIXct/POSIXt format. — convert_dt","text":"dt_var vector containing date-time values converted specified format. vector can class can converted date-times lubridate::parse_date_time() (usually \"character\" \"POSIXct\"). users already pre-processed date-time variables POSIXct (e.g., using lubridate::ymd_hm()) prior running function, convert_dt() simply return original dt_var. orders (character) Order(s) used parse dt_var, \"ymd HM\" (default), \"ymd HMS\", \"ymd\" etc. passed lubridate::parse_date_time(), accepts date-time formats without expecting \"%\" prefix (see orders input argument parse_date_time. Multiple acceptable formats can specified providing character vector, e.g. format = c(\"ymd HM\", \"ymd HMS\", \"ymd\"). expecting date format \"ymd\" (regardless whether timestamp exists ), use convert_dt(dt_var, orders = \"ymdHMS\", truncated = 3). check_ts_zeros (logical) Whether check timestamps \"00:00\", may represent missing times variables. user species orders containing time information, e.g., orders = c(\"ymd HM\", \"ymd HMS\"). dt_varname (character) Name variable referring user-provided date-time variable. used warning messages improve clarity. Usually, dt_varname can inferred directly based provided input, cases inputs passed multiple functions, can helpful specify variable name explicitly (example, see stat_holidays_ON(). addtl_msg (character) Additional warning message shown missing/invalid date-time entries found. addtl_msg = NULL, following message shown default: \"Please carefully consider deal missing/invalid date-time entries perform additional pre-processing prior running function [function_name] (e.g., impute missing dates/timestamps etc.).\" ... Additional parameters passed lubridate::parse_date_time(), truncated , exact, etc.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/convert_dt.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert date-time variables into POSIXct/POSIXt format. — convert_dt","text":"(POSIXct | POSIXt) Returns converted dt_var parsed according specified date-time orders. also return following warning messages (applicable): Number (%) entries dt_var missing (NA, \"\", \" \") Number (%) entries dt_var parsed specified format formats containing (non-optional) timestamps: Number (%) entries dt_var contain date information missing/invalid date-time entries returned NA function.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/convert_dt.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert date-time variables into POSIXct/POSIXt format. — convert_dt","text":"","code":"my_date_time <- c(\"2020-01-01 12:00\", \"2021-03-06 09:25\") convert_dt(my_date_time, orders = \"ymd HM\") #> [1] \"2020-01-01 12:00:00 UTC\" \"2021-03-06 09:25:00 UTC\""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/coverage_message.html","id":null,"dir":"Reference","previous_headings":"","what":"Coverage Message — coverage_message","title":"Coverage Message — coverage_message","text":"Message display inform user function used check clinical data coverage.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/coverage_message.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Coverage Message — coverage_message","text":"","code":"coverage_message(what, addtl = NULL)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/coverage_message.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Coverage Message — coverage_message","text":"(character) clinical table used. addtl (character) additional, specific message append generic message.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/coverage_message.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Coverage Message — coverage_message","text":"Prints message console.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/covid_flag.html","id":null,"dir":"Reference","previous_headings":"","what":"COVID Flag — covid_flag","title":"COVID Flag — covid_flag","text":"covid_flag returns COVID-19 diagnosis status genc_id based ICD-10-CA diagnosis codes. Returns table two separate flags identifying encounters confirmed suspected COVID-19 diagnoses using ICD-10-CA U07.1 U07.2 respectively. confirmed COVID-19 diagnosis (U07.1) coded positive COVID-19 test. Effective April 1 2023, U07.1 coded COVID-19 confirmed COVID-19 test, including polymerase chain reaction (PCR) tests, point--care molecular tests (POCT), rapid antigen tests (RAT). data prior April 1, 2023, U07.1 coded COVID-19 confirmed PCR lab test (details, see CIHI diagnosis type definitions). suspected COVID-19 diagnosis (U07.2) coded encounter clinically epidemiological diagnosed associated COVID-19 tests inconclusive, available, performed.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/covid_flag.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"COVID Flag — covid_flag","text":"","code":"covid_flag(cohort, ipdiag, erdiag)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/covid_flag.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"COVID Flag — covid_flag","text":"cohort (data.frame data.table) Cohort table relevant encounters interest, row corresponds single encounter. Must contain GEMINI Encounter ID (genc_id). ipdiag (data.table) ipdiagnosis table defined GEMINI Data Repository Dictionary. table must contain genc_id diagnosis_code (ICD-10-CA alphanumeric code) long format. erdiag (data.table) erdiagnosis table defined GEMINI Data Repository Dictionary. table must contain genc_id er_diagnosis_code (ICD-10-CA alphanumeric code) long format. Typically, ER diagnoses included deriving COVID flags order increase sensitivity. However, certain scenarios, users may choose include IP diagnoses specifying erdiag = NULL. may useful comparing cohorts different rates ER admissions.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/covid_flag.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"COVID Flag — covid_flag","text":"data.table number rows input cohort additional derived boolean fields labelled \"covid_icd_confirmed_flag\" \"covid_icd_suspected_flag\". Possible values TRUE, FALSE NA. NA indicates encounter diagnosis code diagnosis table input. one tries left-join output function another table (another list admissions left), make sure list admissions (patient) aligns tables.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/covid_flag.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"COVID Flag — covid_flag","text":"current ICD-10-CA diagnosis codes related COVID-19. details, please refer references page. U07.1 : confirmed cases COVID-19, assign U07.1 Emergency use U07.1 (COVID-19, virus identified) U07.2 : suspected cases COVID-19, assign U07.2 Emergency use U07.2 (COVID-19, virus identified) U07.3 : Multisystem inflammatory syndrome associated COVID-19 U07.4 : post COVID-19 condition U07.5 : personal history COVID-19 U07.6 : Need immunization COVID-19. code use person encounters health services sole purpose receiving COVID-19 vaccine. U07.7 : COVID-19 vaccines causing adverse effect therapeutic use. emergency use code external cause code. code normally located ICD-10-CA block Y40-Y59 Drugs, medicaments biological substances causing adverse effects therapeutic use.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/covid_flag.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"COVID Flag — covid_flag","text":"function differentiate diagnosis types. , COVID flags derived based diagnosis codes provided input function. default, users include diagnosis types identify COVID. However, users wish include certain diagnosis types (e.g., type-M responsible discharge diagnosis), ipdiag erdiag input tables filtered accordingly based diagnosis_type prior running function (details, see CIHI diagnosis type definitions.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/covid_flag.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"COVID Flag — covid_flag","text":"CIHI COVID-19 data collection coding direction","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/covid_flag.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"COVID Flag — covid_flag","text":"","code":"if (FALSE) { # \\dontrun{ drv <- dbDriver(\"PostgreSQL\") dbcon <- DBI::dbConnect(drv,   dbname = \"db\",   host = \"domain_name.ca\",   port = 1234,   user = getPass(\"Enter user:\"),   password = getPass(\"password\") )  ipadm <- dbGetQuery(dbcon, \"select * from admdad\") %>% data.table() ipdiagnosis <- dbGetQuery(dbcon, \"select * from ipdiagnosis\") %>% data.table() erdiagnosis <- dbGetQuery(dbcon, \"select * from erdiagnosis\") %>% data.table()  covid <- covid_flag(cohort = ipadm, ipdiag = ipdiagnosis, erdiag = ) } # }"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/daily_census.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute daily census — daily_census","title":"Compute daily census — daily_census","text":"Calculates daily number patients hospitalized site specified time period. daily census defined cross-sectional count bed occupancy given time day (8am default). calculated number patients admitted discharged point time (.e., number patients occupied bed 8am day). Results returned raw counts well capacity ratio (= census/capacity). capacity ratio indicates whether number hospitalized patients particular day (>1) (<1) typical occupancy (max occupancy) time period interest. default, capacity estimated median(census) users can specify measures typical/max capacity (see capacity_func input). Note cohorts filtered/grouped based patient characteristics (e.g., diagnosis, age etc.), indicator simply reflects standardized measure patient counts, rather measure true capacity limitations medical wards.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/daily_census.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute daily census — daily_census","text":"","code":"daily_census(   cohort,   time_period = NULL,   scu_exclude = NULL,   group_var = NULL,   capacity_func = \"median\",   buffer = 30,   time_of_day = \"08:00:00\",   include_zero = TRUE )"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/daily_census.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute daily census — daily_census","text":"cohort (data.frame data.table) Cohort table relevant encounters interest, row corresponds single encounter. Must contain following columns: genc_id (integer): GEMINI encounter ID hospital_num hospital_id (integer character): Hospital ID admission_date_time (character | POSIXct POSIXt): Date-time admission YYYY-MM-DD HH:MM format discharge_date_time (character | POSIXct POSIXt): Date-time discharge YYYY-MM-DD HH:MM format group_var specified (see ), included cohort table well. time_period (character) start end points study period, e.g., c('2019-01-01', '2019-12-31'). specified valid date format (e.g., 'yyyy-mm-dd'). scu_exclude (data.frame | data.table) Optional table containing special care unit (SCU) encounters. required patients SCU excluded census calculation time periods SCU. scu_exclude table typically refers ipscu table (see GEMINI database schema). However, users may want filter ipscu table specific SCU unit numbers excluded census calculation. Entries scu_unit_number = 99 (\"SCU\") automatically removed function. scu_exclude input table needs contain following columns: genc_id (integer): GEMINI encounter ID scu_admit_date_time (character | POSIXct POSIXt): Date-time SCU admission YYYY-MM-DD HH:MM format scu_discharge_date_time (character | POSIXct POSIXt): Date-time SCU discharge YYYY-MM-DD HH:MM format entries scu_exclude table valid scu_admit_date_time scu_discharge_date_time, encounter counted towards census time periods SCU (.e., time periods occupy bed non-SCU ward). input provided argument, exclusion applied. group_var (character) Optional input specifying one (multiple) grouping variables. Census numbers capacity ratio calculated separately level given grouping variable. Note: Users need specify hospital grouping variable since function automatically groups output hospital_num. Therefore, group_var specified additional grouping (e.g., different medical subservices, physicians etc.) required. Multiple grouping variables can provided character vector (e.g., group_var = c(\"medical_subservice\",\"physician\")). grouping variable specified (default: group_var = NA), function returns total daily census numbers capacity ratios per hospital. capacity_func (character) Optional input specifying function used define capacity capacity_ratio output. Can either measure central tendency obtain typical occupancy (median, mean, mode) max obtain maximum occupancy. capacity_ratio calculated census/capacity_func(census). Default median (.e., capacity_ratio = census/median(census)). \"mode\" selected census multiple modes, median modes used calculate capacity ratio. Note capacity calculated separately site (grouping variable, ). types measures (e.g., trimmed means), year--year capacity ratios calculated based raw census counts output (see vignette details). buffer (integer) Buffer period (days) applied end data availability period. Default 30 days, .e., census counts (capacity ratio) set NA last 30 days available data hospital. relevant time period interest towards end data availability period given hospital. example, time_period = c(\"2020-01-01\",\"2021-12-31\"), data available Dec 31 2021 hospital , census counts drop sharply last days Dec 2021 due \"truncation bias\". Specifically, example scenario, encounters hospital admitted prior Dec 31 2021, yet discharged. Due fact encounters appear GEMINI database discharged, census counts late December decline abruptly hospital patients discharged yet included database. prevent decrease patient numbers affecting census counts & capacity ratio, outputs set NA last 30 days hospital . default buffer period set 30 vast majority patients discharged within 30 days. , 30-day buffer period ensures admitted patients already discharged, thus, included data. However, users may specify different buffer period since length stays can vary widely cohorts. Therefore, users explore buffer period makes sense data work . Note data availability differs across hospitals. Therefore, actual buffer applied calculated separately hospital. hospital's data availability ends prior end time period interest, buffer includes last X days hospital's data (e.g., 30 days default). hospital's data availability goes past end time period interest, actual buffer applied based difference specified buffer latest available discharge date hospital. example, buffer = 30 given hospital 30 extra days data past time period interest, additional buffer applied. time_of_day (character | numeric) Optional input specifying time day census/capacity ratio calculated . Default 8am (time_of_day = \"8:00:00\"). times can specified character (e.g., \"10:30\" 10.30am) numeric input (e.g., 14 2pm). include_zero (logical) Flag indicating whether days census counts 0 treated real 0s whether returned census = NA. Note relevant edge cases function applied small cohorts users specify group_var small samples resulting counts 0 days. cases, decision whether include 0s can affect estimated typical capacity (thus, capacity_ratio output). default (include_zero = TRUE), function return days genc_ids hospitalized census = 0. desired behavior cases counts 0 patients conceptually meaningful. example, users want analyze many patients rare condition hospital typical day, days census = 0 represent true counts 0 patients (assuming cohort provides sufficient coverage hospitalized patients). Note: data availability periods differ hospitals, census counts set 0 dates fall within min-max date range particular site. scenarios, users may want disregard days census = 0 specifying include_zero = FALSE. example, looking daily census counts per physician, days census = 0 likely reflect days given physician service. Therefore, days included estimate physicians' typical patient volume.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/daily_census.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute daily census — daily_census","text":"(data.table) data.table daily counts hospitalized patients (census) hospital. Additionally, capacity_ratio (census relative typical occupancy time period interest) returned. Dates within time period interest data available given site included output. dates inside buffer period, census capacity_ratio returned NA.","code":""},{"path":[]},{"path":"https://gemini-medicine.github.io/Rgemini/reference/daily_census.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute daily census — daily_census","text":"","code":"## calculate census of all in-patient admissions (ipadm): if (FALSE) { # \\dontrun{ drv <- dbDriver(\"PostgreSQL\") dbcon <- DBI::dbConnect(drv,                         dbname = \"db\",                         host = \"domain_name.ca\",                         port = 1234,                         user = getPass(\"Enter user:\"),                         password = getPass(\"password\"))  ipadm <- dbGetQuery(dbcon, \"select * from admdad\") %>% data.table()  ipadm_census <- daily_census(ipadm) } # }"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/day_time_of_admission.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute day & time of hospital admissions — day_time_of_admission","title":"Compute day & time of hospital admissions — day_time_of_admission","text":"day_time_of_admission returns whether patient admitted day/night time weekday/weekend.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/day_time_of_admission.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute day & time of hospital admissions — day_time_of_admission","text":"","code":"day_time_of_admission(ipadmdad, dtvar = \"admission_date_time\")"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/day_time_of_admission.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute day & time of hospital admissions — day_time_of_admission","text":"ipadmdad (data.table data.frame) Table relevant encounters interest DRM table \"ipadmdad\" (see GEMINI Data Repository Dictionary). Must contain two fields: genc_id date-time variable (typically admission_date_time \"yyyy-mm-dd hh:mm\" format). dtvar (character) Character string defining date-time variable interest (e.g., \"admission_date_time\").","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/day_time_of_admission.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute day & time of hospital admissions — day_time_of_admission","text":"data.table number rows input \"ipadmdad\", additional derived character fields labelled \"day_of_admission_derived\" \"time_of_admission_derived\". Possible values fields \"weekend\" \"weekday\" former, \"daytime\" \"nighttime\" latter.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/day_time_of_admission.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute day & time of hospital admissions — day_time_of_admission","text":"Day time defined 08:00 ~ 16:59, 17:00 ~ 07:59 Night time. Weekday Monday ~ Friday, weekend Sunday Saturday. classification might useful baseline admission characteristic Epidemiological studies.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/day_time_of_admission.html","id":"warning","dir":"Reference","previous_headings":"","what":"Warning","title":"Compute day & time of hospital admissions — day_time_of_admission","text":"NA values returned data.table indicates either missing admission date time format incorrect.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/day_time_of_admission.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Compute day & time of hospital admissions — day_time_of_admission","text":"function takes optional input specifying field label date-time variable interest. default, admission_date_time users specify different variable (e.g., discharge_date_time). input can also used case differences variable names databases.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/diagnoses_at_admission.html","id":null,"dir":"Reference","previous_headings":"","what":"Determine Diagnoses at Admission — diagnoses_at_admission","title":"Determine Diagnoses at Admission — diagnoses_at_admission","text":"See CIHI's HSMR Methodology. Specifically page 19 inclusion/exclusion criteria.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/diagnoses_at_admission.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Determine Diagnoses at Admission — diagnoses_at_admission","text":"","code":"diagnoses_at_admission(ipdiag, erdiag)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/diagnoses_at_admission.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Determine Diagnoses at Admission — diagnoses_at_admission","text":"ipdiag (data.table data.frame)ipdiagnosis table defined GEMINI Data Repository Dictionary. erdiag (data.table data.frame)erdiagnosis table defined GEMINI Data Repository Dictionary. Typically, ER diagnoses included deriving comorbidity order increase sensitivity. However, certain scenarios, users may choose include IP diagnoses specifying erdiag = NULL. may useful comparing cohorts different rates ER admissions.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/diagnoses_at_admission.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Determine Diagnoses at Admission — diagnoses_at_admission","text":"(data.table) encounters genc_id diagnosis_type diagnosis_code diagnoses admission.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/disability.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify encounters with disability — disability","title":"Identify encounters with disability — disability","text":"function identifies whether encounter ICD-10-CA diagnosis code(s) indicating physical, sensory, intellectual/ developmental disability defined Brown et al., 2021. Broadly, includes diagnosis codes conditions likely result functional limitations considered chronic (see Supplemental eTable 2 Brown et al., 2021 full list diagnosis codes). However, note function searches relevant diagnosis codes encounter level check whether chronic conditions coded consistently across different encounters given patient. setting component_wise TRUE, users can choose return identified diagnosis codes encounters disability, together disability category code matched (e.g., physical/sensory/ developmental disability - see ).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/disability.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify encounters with disability — disability","text":"","code":"disability(cohort, ipdiag, erdiag, component_wise = FALSE)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/disability.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify encounters with disability — disability","text":"cohort (data.frame data.table) Cohort table relevant encounters interest, row corresponds single encounter. Must contain GEMINI Encounter ID (genc_id). ipdiag (data.table) ipdiagnosis table defined GEMINI Data Repository Dictionary. table must contain genc_id diagnosis_code (ICD-10-CA alphanumeric code) long format. erdiag (data.table) erdiagnosis table defined GEMINI Data Repository Dictionary. table must contain genc_id er_diagnosis_code (ICD-10-CA alphanumeric code) long format. Typically, ER diagnoses included deriving disability order increase sensitivity. However, certain scenarios, users may choose include IP diagnoses specifying erdiag = NULL. may useful comparing cohorts different rates ER admissions. component_wise (logical) component_wise == FALSE (default), function calculates single (global) disability flag indicating whether genc_id diagnosed disability. component_wise == TRUE, genc_id disability, identified disability diagnosis codes returned, together one following 7 disability categories: Physical disability - Congenital Anomalies Physical disability - Musculoskeletal disorders Physical disability - Neurological disorders Physical disability - Permanent Injuries Sensory disabilities - Hearing impairments Sensory disabilities - Vision impairments Developmental Disabilities","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/disability.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify encounters with disability — disability","text":"data.table component_wise == FALSE, returns table encounters identified cohort table input additional derived field disability (logical) indicating whether diagnosis code disability identified. genc_id entry diagnosis table , disability = NA. Note rare: additional filtering performed, >99.9% genc_ids entry ipdiagnosis (>99.9% genc_ids admitted via ER entry erdiagnosis table). component_wise == TRUE, return genc_ids disability. output returned long format, row corresponds disability diagnosis (diagnosis_code) corresponding disability_category (character).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/disability.html","id":"notes","dir":"Reference","previous_headings":"","what":"Notes","title":"Identify encounters with disability — disability","text":"function differentiate diagnosis types. , disability flags derived based diagnosis codes provided input function. default, users include diagnosis types identify disabilities. However, users wish include certain diagnosis types (e.g., type-M responsible discharge diagnosis), ipdiag erdiag input tables filtered accordingly based diagnosis_type prior running function (details, see CIHI diagnosis type definitions.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/disability.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Identify encounters with disability — disability","text":"Brown HK, et al. JAMA Netw Open, 2021. https://doi.org/10.1001/jamanetworkopen.2020.34993","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/disability.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Identify encounters with disability — disability","text":"","code":"if (FALSE) { # \\dontrun{ drv <- dbDriver(\"PostgreSQL\") dbcon <- DBI::dbConnect(drv,   dbname = \"db\",   host = \"domain_name.ca\",   port = 1234,   user = getPass(\"Enter user:\"),   password = getPass(\"password\") )  ipadmdad <- dbGetQuery(dbcon, \"select * from admdad\") %>% data.table() ipdiagnosis <- dbGetQuery(dbcon, \"select * from ipdiagnosis\") %>% data.table() erdiagnosis <- dbGetQuery(db, \"select * from erdiagnosis\") %>% data.table()  # including ER diagnosis codes disability(cohort = ipadmdad, ipdiag = ipdiagnosis, erdiag = erdiagnosis)  # not including ER diagnosis codes disability(cohort = ipadmdad, ipdiag = ipdiagnosis, erdiag = NULL)  # returning component-wise disability categories disability(ipadmdad, ipdiagnosis, erdiagnosis, component_wise = TRUE) } # }"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_admdad.html","id":null,"dir":"Reference","previous_headings":"","what":"Generated simulated administrative data — dummy_admdad","title":"Generated simulated administrative data — dummy_admdad","text":"Designed partially mimic admdad table defined GEMINI Data Repository Dictionary.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_admdad.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generated simulated administrative data — dummy_admdad","text":"","code":"dummy_admdad(id, admtime)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_admdad.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generated simulated administrative data — dummy_admdad","text":"id (numeric) single identifier repeated match length value. admtime (character) format yyyy-mm-dd hh:mm. Corresponds admission time encounter.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_admdad.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generated simulated administrative data — dummy_admdad","text":"(data.table) columns id admission_date_time described .","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_admdad.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generated simulated administrative data — dummy_admdad","text":"","code":"admdad <- dummy_admdad(1, \"2023-01-02 00:00\")"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_ccsr.html","id":null,"dir":"Reference","previous_headings":"","what":"Dummy CCSR data — dummy_ccsr","title":"Dummy CCSR data — dummy_ccsr","text":"Used generate mock output icd_to_ccsr vignette.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_census.html","id":null,"dir":"Reference","previous_headings":"","what":"Dummy daily census data — dummy_census","title":"Dummy daily census data — dummy_census","text":"Used generate mock output daily_census vignette.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_diag.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Simulated Diagnosis Data Table — dummy_diag","title":"Generate Simulated Diagnosis Data Table — dummy_diag","text":"function generates simulated data table resembling ipdiagnosis erdiagnosis tables can used testing demonstration purposes. internally calls sample_icd() function sample ICD-10 codes accepts arguments passed sample_icd() customizing sampling scheme.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_diag.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Simulated Diagnosis Data Table — dummy_diag","text":"","code":"dummy_diag(nid = 5, nrow = 50, ipdiagnosis = TRUE, diagnosis_type = NULL, ...)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_diag.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Simulated Diagnosis Data Table — dummy_diag","text":"nid (integer) Number unique encounter IDs (genc_id) simulate. Value must greater 0. nrow (integer) Total number rows simulated long format diagnosis table. Value must greater equal nid. ipdiagnosis (logical) Default \"TRUE\" returns simulated \"ipdiagnosis\" table. FALSE, returns simulated \"erdiagnosis\" table. See tables GEMINI Data Repository Dictionary. diagnosis_type (character vector) type(s) diagnosis return. Possible diagnosis types (\"M\", 1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"9\", \"W\", \"X\", \"Y\"). Regardless diagnosis_type input, ipdiagnosis table defaulted always return type \"M\" first row encounter. ... Additional arguments ICD code sampling scheme. See sample_icd() details.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_diag.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Simulated Diagnosis Data Table — dummy_diag","text":"(data.table) data table containing simulated data genc_id, (er)_diagnosis_code, (er)_diagnosis_type, hospital_num, fields found respective diagnosis table.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_diag.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate Simulated Diagnosis Data Table — dummy_diag","text":"ensure simulated table resembles \"ip(er)diagnosis\" table, following characteristics applied fields: genc_id:  Numerical identification encounters starting 1. number unique encounters defined nid. total number rows defined nrow, number rows encounter random, encounter least one row. hospital_num: Numerical identification hospitals 1 5. rows encounter linked single hospital diagnosis_code: \"ipdiagnosis\" table . Simulated ICD-10 diagnosis codes. encounter can associated multiple diagnosis codes long format. diagnosis_type: \"ipdiagnosis\" table . first row encounter consistently assigned diagnosis type \"M\". remaining rows, diagnosis_type specified users, diagnosis types sampled randomly values provided; diagnosis_type NULL, diagnosis types sampled (\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"9\", \"W\", \"X\", \"Y\"), sampling probability proportionate prevalence \"ipdiagnosis\" table. diagnosis_cluster: \"ipdiagnosis\" table . Proportionally sampled values prevalence 1% \"diagnosis_cluster\" field \"ipdiagnosis\" table, (\"\", \"\", \"B\"). diagnosis_prefix: \"ipdiagnosis\" table . Proportionally sampled values prevalence 1% \"diagnosis_prefix\" field \"ipdiagnosis\" table, (\"\", \"N\", \"Q\", \"6\"). er_diagnosis_code: \"erdiagnosis\" table . Simulated ICD-10 diagnosis codes. encounter can associated multiple diagnosis codes long format. er_diagnosis_type: \"erdiagnosis\" table . Proportionally sampled values prevalence 1% \"er_diagnosis_type\" field \"erdiagnosis\" table, (\"\", \"M\", \"9\", \"3\", \"O\").","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_diag.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Generate Simulated Diagnosis Data Table — dummy_diag","text":"following fields (er)diagnosis_code, (er)diagnosis_type, diagnosis_cluster, diagnosis_prefix simulated independently. Therefore, simulated combinations may reflect interrelationships fields actual data. example, specific diagnosis codes may associated specific diagnosis types, diagnosis clusters, diagnosis prefix reality. However, relationships maintained purpose generating dummy data. Users require specific linkages fields consider customizing output data manually generating desired combinations.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_diag.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate Simulated Diagnosis Data Table — dummy_diag","text":"","code":"### Simulate a erdiagnosis table for 5 unique subjects with total 20 records: if (FALSE) { # \\dontrun{ set.seed(1) erdiag <- dummy_diag(nid = 5, nrow = 20, ipdiagnosis = F) } # }  ### Simulate a ipdiagnosis table with diagnosis codes starting with \"E11\": if (FALSE) { # \\dontrun{ set.seed(1) ipdiag <- dummy_diag(nid = 5, nrow = 20, ipdiagnosis = T, pattern = \"^E11\") } # }  ### Simulate a ipdiagnosis table with random diagnosis codes in diagnosis type 3 or 6 only: if (FALSE) { # \\dontrun{ set.seed(1) ipdiag <- dummy_diag(nid = 5, nrow = 20, diagnosis_type = (c(\"3\", \"6\"))) %>%   filter(diagnosis_type != \"M\") # remove default rows with diagnosis_type=\"M\" from each ID } # }  ### Simulate a ipdiagnosis table with ICD-10-CA codes: if (FALSE) { # \\dontrun{ drv <- dbDriver(\"PostgreSQL\") dbcon <- DBI::dbConnect(drv,   dbname = \"db\",   host = \"172.XX.XX.XXX\",   port = 1234,   user = getPass(\"Enter user:\"),   password = getPass(\"password\") )  set.seed(1) ipdiag <- dummy_diag(nid = 5, nrow = 20, ipdiagnosis = T, dbcon = dbcon, source = \"icd_lookup\") } # }"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_ipadmdad.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate ipadmdad data — dummy_ipadmdad","title":"Simulate ipadmdad data — dummy_ipadmdad","text":"function creates dummy dataset subset variables contained GEMINI \"ipadmdad\" table (see details GEMINI Data Repository Dictionary). simulated encounter-level variables returned function currently: Admission date-time, discharge date-time, age, gender, discharge disposition, transfer alternate level care (ALC), ALC days. distribution simulated variables roughly mimics real distribution variable observed GIM cohort 2015-2022. Admission date-time simulated conjunction discharge date-time mimic realistic length stay. variables simulated independently , .e., correlation age, gender, discharge disposition etc. may exist real data. One exception number_of_alc_days, > 0 entries alc_service_transfer_flag == TRUE length ALC capped total length stay. function simulates patient populations differ across hospitals. , patient characteristics simulated separately hospital, different, randomly drawn distribution mean (.e., random intercepts). However, degree hospital-level variation simulated function arbitrary reflect true differences hospitals real GEMINI dataset.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_ipadmdad.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate ipadmdad data — dummy_ipadmdad","text":"","code":"dummy_ipadmdad(n = 1000, n_hospitals = 10, time_period = c(2015, 2023))"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_ipadmdad.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate ipadmdad data — dummy_ipadmdad","text":"n (integer) Total number encounters (genc_ids) simulated. n_hospitals (integer) Number hospitals simulated. Total number genc_ids split pseudo-randomly hospitals ensure roughly equal sample size hospital. time_period (numeric) numeric vector containing time period, specified fiscal years (starting April year). example, c(2015, 2019) generates data 2015-04-01 2020-03-31.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_ipadmdad.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate ipadmdad data — dummy_ipadmdad","text":"(data.frame) data.frame object similar \"ipadmdad\" table containing following fields: genc_id (integer): GEMINI encounter ID hospital_num (integer): Hospital ID admission_date_time (character): Date-time admission YYYY-MM-DD HH:MM format discharge_date_time (character): Date-time discharge YYYY-MM-DD HH:MM format age (integer): Patient age gender (character): Patient gender (F/M/O Female/Male/) discharge_disposition (integer): valid categories according DAD abstracting manual 2022-2023 4: Home Support/Referral 5: Private Home 8: Cadaveric Donor (exist GEMINI data) 9: Stillbirth (exist GEMINI data) 10: Transfer Inpatient Care 20: Transfer ED Ambulatory Care 30: Transfer Residential Care 40: Transfer Group/Supportive Living 90: Transfer Correctional Facility 61: Absent Without Leave (AWOL) 62: Left Medical Advice (LAMA) 65: Return Pass/Leave 66: Died Pass/Leave 67: Suicide Facility (exist GEMINI data) 72: Died Facility 73: Medical Assistance Dying (MAID) 74: Suicide Facility alc_service_transfer_flag (character): Variable indicating whether patient transferred alternate level care (ALC) hospital stay. Coding messy varies across sites. Possible values : Missing: NA, \"\" True: \"TRUE\"/\"true\"/\"T\", \"y\"/\"Y\", \"1\"/\"99\", \"ALC\" False: \"FALSE\"/\"false\", \"N\", \"0\", \"non-ALC\" entries missing alc_service_transfer_flag can inferred based value number_of_alc_days (see ) number_of_alc_days (integer): Number days spent ALC (rounded nearest integer). number_of_alc_days = 0, ALC occurred; number_of_alc_days > 0, ALC occurred. Note days spent ALC usually < length stay. However, due fact ALC days rounded , possible number_of_alc_days larger los_days_derived.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_ipadmdad.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulate ipadmdad data — dummy_ipadmdad","text":"","code":"# Simulate 10,000 encounters from 10 hospitals for fiscal years 2018-2020. ipadmdad <- dummy_ipadmdad(n = 10000, n_hospitals = 10, time_period = c(2018, 2020))"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_ipdiagnosis.html","id":null,"dir":"Reference","previous_headings":"","what":"Dummy ipdiagnosis data — dummy_ipdiagnosis","title":"Dummy ipdiagnosis data — dummy_ipdiagnosis","text":"mimics GEMINI ipdiagnosis table. generated dummy_diag function. See GEMINI Data Repository Dictionary details.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_lab.html","id":null,"dir":"Reference","previous_headings":"","what":"Generated simulated lab data — dummy_lab","title":"Generated simulated lab data — dummy_lab","text":"Designed mimic important elements GEMINI lab table defined GEMINI Data Repository Dictionary.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_lab.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generated simulated lab data — dummy_lab","text":"","code":"dummy_lab(id, omop, value, unit, mintime)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_lab.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generated simulated lab data — dummy_lab","text":"id (numeric) single identifier repeated match length value. omop (character) Codes corresponding OMOP concept identifiers. value (numeric) Simulated result values lab test measurement. unit (character) Units corresponding particular lab test defined omop. repeated match length value. mintime (character) format yyyy-mm-dd hh:mm. Earliest recorded test performed time.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_lab.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generated simulated lab data — dummy_lab","text":"(data.table) columns, id, omop, value, unit, collection_date_time described .","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/dummy_lab.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generated simulated lab data — dummy_lab","text":"","code":"lab <- dummy_lab(1, 3024641, c(7, 8, 15, 30), \"mmol/L\", \"2023-01-02 08:00\")"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/elixhauser_comorbidity_index.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Elixhauser comorbidity score — elixhauser_comorbidity_index","title":"Compute Elixhauser comorbidity score — elixhauser_comorbidity_index","text":"Based methodology Elixhauser et al. 1998, Quan H et al. 2005, van Walraven C et al. 2009 using ICD-10 codes mapping algorithm, implemented R comorbidity package Gasparini, 2018. Can compute either Elixhauser score admission based HSMR Methodology entire patient encounter. default compute comorbidity admission.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/elixhauser_comorbidity_index.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Elixhauser comorbidity score — elixhauser_comorbidity_index","text":"","code":"elixhauser_comorbidity_index(   ipdiag,   erdiag,   at_admission = TRUE,   raw_comorbidities = FALSE )"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/elixhauser_comorbidity_index.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Elixhauser comorbidity score — elixhauser_comorbidity_index","text":"ipdiag (data.table data.frame)ipdiagnosis table defined GEMINI Data Repository Dictionary. erdiag (data.table data.frame)erdiagnosis table defined GEMINI Data Repository Dictionary. Typically, ER diagnoses included deriving comorbidity order increase sensitivity. However, certain scenarios, users may choose include IP diagnoses specifying erdiag = NULL. may useful comparing cohorts different rates ER admissions. at_admission (logical) Whether calculate score comorbidities pre-admit comorbidities. raw_comorbidities (logical) Whether output data.table raw comorbidities opposed pre-computed scores.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/elixhauser_comorbidity_index.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Elixhauser comorbidity score — elixhauser_comorbidity_index","text":"(data.table) default, encounter, outputs comorbidity score. raw_comorbidities TRUE, outputs wide data.table column comorbidity encounter.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/elixhauser_comorbidity_index.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute Elixhauser comorbidity score — elixhauser_comorbidity_index","text":"hierarchy comorbidities used calculating cormorbidity score, outputting raw_comorbidites. affects comorbidities present patient different degrees severity. See documentation comorbidity::comorbidity() details.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/elixhauser_comorbidity_index.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Compute Elixhauser comorbidity score — elixhauser_comorbidity_index","text":"Elixhauser , et al. Med Care, 1998. https://www.jstor.org/stable/3766985 Quen H, et al. Med Care, 2005. https://www.jstor.org/stable/3768193 Van Walraven C, et al. Med Care, 2009. https://doi.org/10.1097/MLR.0b013e31819432e5 Gasparini . JOSS, 2018. https://doi.org/10.21105/joss.00648","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/episodes_of_care.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify episodes of care — episodes_of_care","title":"Identify episodes of care — episodes_of_care","text":"episodes_of_care() function groups encounters linked via transfers single episode care. derived episodes care used readmission() function avoid counting transfers readmissions. Therefore, criteria transfers used function based CIHI guidelines readmission calculations. However, episodes_of_care function can also used independently compute episodes care outside readmission. Transfer information obtained GEMINI database table lookup_transfer (see GEMINI database schema). default, function queries encounters admdad table ensure encounters may linked via transfers accurately grouped episode care. Note: Users typically need calculate episodes care , rather use derived epicares variable GEMINI database, available. due fact derived variable calculated based available GEMINI encounters, therefore, provides accurate identification episodes care. contrast, datacuts cohorts pre-filtered may miss certain encounters, resulting loss information. However, certain situations, users may still find function useful 1) understand derived variable calculated 2) case users need re-calculate episodes care readmission rates restricted cohort (see ).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/episodes_of_care.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify episodes of care — episodes_of_care","text":"","code":"episodes_of_care(dbcon, restricted_cohort = NULL)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/episodes_of_care.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify episodes of care — episodes_of_care","text":"dbcon (DBIConnection) database connection GEMINI database. restricted_cohort (data.table | data.frame) User specified cohort restricted subset encounters DRM table \"ipadmdad\" (see GEMINI Data Repository Dictionary). Must contain genc_id identifier. Default Null, loads entire \"ipadmdad\" table user-provided database (recommended approach).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/episodes_of_care.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify episodes of care — episodes_of_care","text":"(data.frame) function returns data.table excluding records invalid patient_id_hashed, age < 18, admit_category cadaveric donors line CIHI guidelines. Nine columns returned: genc_id, patient_id_hashed, time_to_next_admission (numeric), time_since_last_admission (numeric), AT_in_coded (TRUE/FALSE), AT_out_coded (TRUE/FALSE), AT_in_occurred (TRUE/FALSE/NA), AT_out_occurred (TRUE/FALSE/NA), epicare (numeric)","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/episodes_of_care.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Identify episodes of care — episodes_of_care","text":"episode care refers contiguous inpatient hospitalizations admitted medical intensive care service within GEMINI. Episodes involving inter-facility transfers linked regardless diagnosis. acute care transfer assumed occurred either following criteria met (see CIHI guidelines: admission occurs within 7 hours discharge, regardless whether transfer coded hospitals. admission occurs within 7-12 hours discharge, least one hospital coded transfer. Acute transfers coded hospitals (AT_in_coded AT_out_coded) defined DAD fields institution_from institution_to: AT_in_coded/AT_out_coded TRUE, 'institution_from == \"\" 'institution_to == \"\". remaining entries set FALSE. Acute transfers actually occurred (AT_in_occurred AT_out_occurred) defined follows: AT_in_occurred/AT_out_occurred TRUE admission within 7 hrs discharge regardless transfer coding, , admission within 7-12hrs discharge least one hospital coded transfer. AT_in_occurred/AT_out_occurred NA transfer coded admission time since previous discharge unknown. determined transfer actually took place . AT_in_occurred/AT_out_occurred FALSE, remaining entries. episode care (epicare) defined linked transfers identified based AT_in_occurred/ AT_out_occurred. unique numeric ID assigned unique episode care. , contiguous encounters linked transfers epicare number.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/episodes_of_care.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Identify episodes of care — episodes_of_care","text":"recommend users run function entire GEMINI data set (default setting) ensure transfers /omitted. Please review function documentation & vignette carefully. comprehensive understanding following concepts needed proper use function: transfer coded vs. transfer occurred, episode care definition.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/episodes_of_care.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Identify episodes of care — episodes_of_care","text":"CIHI readmission guidelines","code":""},{"path":[]},{"path":"https://gemini-medicine.github.io/Rgemini/reference/episodes_of_care.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Identify episodes of care — episodes_of_care","text":"","code":"if (FALSE) { # \\dontrun{ drv <- dbDriver(\"PostgreSQL\") dbcon <- DBI::dbConnect(drv,                         dbname = \"db\",                         host = \"domain_name.ca\",                         port = 1234,                         user = getPass(\"Enter user:\"),                         password = getPass(\"password\"))  epicare_table <- episodes_of_care(dbcon) } # }"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/er_los.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Length of Stay in Emergency Room — er_los","title":"Compute Length of Stay in Emergency Room — er_los","text":"Calculate total duration Emergency Room (ER) encounter spent hospitalization using CIHI National Ambulatory Care Reporting System (NACRS) fields","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/er_los.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Length of Stay in Emergency Room — er_los","text":"","code":"er_los(cohort, er)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/er_los.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Length of Stay in Emergency Room — er_los","text":"cohort (data.table data.frame) Table relevant encounters interest, row corresponds single encounter. Must contain GEMINI Encounter ID (genc_id). er (data.table data.frame) Table equivalent er table defined GEMINI Data Repository Dictionary. Table must contain fields: GEMINI Encounter ID (genc_id), ER triage date-time (triage_date_time \"yyyy-mm-dd hh:mm\" format), Left ER date-time (left_er_date_time \"yyyy-mm-dd hh:mm\" format).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/er_los.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Length of Stay in Emergency Room — er_los","text":"(data.table) default, encounter input cohort returns corresponding derived numeric fields er_los_hrs_derived er_los_days_derived.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/er_los.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute Length of Stay in Emergency Room — er_los","text":"function calculates length stay (LoS) hours days encounter spent ER hospital stay. uses NACRS fields Triage Date Time (Data Element Number 24/25) Date Time Patient Left Emergency Department (Data Element Number 116/117).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/er_los.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Compute Length of Stay in Emergency Room — er_los","text":"Encounter IDs cohort table present er table assumed ER visit returned er_los = 0. Please check entries might due data availability issues consider removing analyses. Encounter IDs er table missing/invalid triage_date_time left_er_date_time returned er_los = NA.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/er_los.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute Length of Stay in Emergency Room — er_los","text":"","code":"# Compute ER LoS for all encounters in ipadmdad; if (FALSE) { # \\dontrun{ er_los(cohort = ipadmdad, er = er) } # }"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/find_db_tablename.html","id":null,"dir":"Reference","previous_headings":"","what":"Find DB table/view name in database. — find_db_tablename","title":"Find DB table/view name in database. — find_db_tablename","text":"Rgemini functions internally query DB tables. table names hard-coded functions since tables HPC datacuts _subset suffix. function searches table names user-specified database match DRM (Data Reference Model) table interest. Currently, function expects relevant tables databases differ based suffix (e.g., \"ipintervention\" vs. \"ipintervention_subset\"). strict search (opposed flexible regex search) used allow broad range table names searched avoiding false positive matches.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/find_db_tablename.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Find DB table/view name in database. — find_db_tablename","text":"","code":"find_db_tablename(dbcon, drm_table, verbose = FALSE)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/find_db_tablename.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Find DB table/view name in database. — find_db_tablename","text":"dbcon (DBIConnection) database connection GEMINI database. drm_table (character) Table name searched, based DRM (e.g., \"admdad\", \"lab\", \"physicians\", \"lookup_transfer\" etc.). Users need specify full DRM table name (e.g., \"admdad\" instead \"adm\") avoid potential confusion tables. verbose (logical) Whether show message indicating DB table found.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/find_db_tablename.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Find DB table/view name in database. — find_db_tablename","text":"(character) Returns full name relevant DB table character.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/find_db_tablename.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Find DB table/view name in database. — find_db_tablename","text":"","code":"if (FALSE) { # \\dontrun{ drv <- dbDriver(\"PostgreSQL\") dbcon <- DBI::dbConnect(drv,   dbname = \"db\",   host = \"domain_name.ca\",   port = 1234,   user = getPass(\"Enter user:\"),   password = getPass(\"password\") )  admdad_name <- find_db_tablename(dbcon, \"admdad\", verbose = TRUE)  # query identified table admdad <- dbGetQuery(dbcon, paste0(\"select * from \", admdad_name, \";\")) } # }"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/fix_var_str.html","id":null,"dir":"Reference","previous_headings":"","what":"Fix variable strings — fix_var_str","title":"Fix variable strings — fix_var_str","text":"Removes \"_\" variable names applies title case capitalization. currently used axis labels/titles plotting functions.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/fix_var_str.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fix variable strings — fix_var_str","text":"","code":"fix_var_str(str)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/fix_var_str.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fix variable strings — fix_var_str","text":"str (character) Character string cleaned ","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/frailty_score.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute CIHI Hospital Frailty Risk Score — frailty_score","title":"Compute CIHI Hospital Frailty Risk Score — frailty_score","text":"frailty_score returns number frailty conditions hospital admissions based CIHI hospital frailty risk score (HFRS). setting component_wise TRUE, function alternatively returns identified frailty-related diagnosis codes corresponding frailty conditions.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/frailty_score.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute CIHI Hospital Frailty Risk Score — frailty_score","text":"","code":"frailty_score(cohort, ipdiag, erdiag, component_wise = FALSE)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/frailty_score.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute CIHI Hospital Frailty Risk Score — frailty_score","text":"cohort (data.table, data.frame) Cohort table encounters interest corresponding age. row corresponds single encounter. Must contain GEMINI encounter ID (genc_id), age encounter (age). ipdiag (data.table, data.frame)ipdiagnosis table defined GEMINI Data Repository Dictionary. table must contain genc_id diagnosis_code fields long format. diagnosis codes must free punctuation special characters. erdiag (data.table, data.frame)erdiagnosis table defined GEMINI Data Repository Dictionary. table must contain genc_id er_diagnosis_code fields long format. diagnosis codes must free punctuation special characters. component_wise (logical) Default FALSE. TRUE, function aggregate score instead outputs table long format shows frailty conditions contributed score encounter. Encounters frailty conditions found (frailty_score_derived=0) excluded.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/frailty_score.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute CIHI Hospital Frailty Risk Score — frailty_score","text":"(data.frame) component_wise == FALSE: genc_id (numeric),frailty_score_derived (numeric) total number frailty conditions encounter. component_wise == TRUE: genc_id (numeric),diagnosis_code (character), ICD-10-CA diagnosis codes associated encounter frailty_categories (character) frailty category ICD-10-CA code mapped ","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/frailty_score.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute CIHI Hospital Frailty Risk Score — frailty_score","text":"CIHI HFRS contextual measure frailty patients aged 65 years older. categorizes list ICD-10-CA diagnosis codes 36 distinct frailty-related conditions. level frailty determined cumulative number distinct frailty conditions (equal-weight algorithm) present individual. diagnoses included calculation (.e. emergency department (ER) -patient (IP) diagnoses, diagnosis types). none frailty conditions present individual, score zero assigned. function closely adheres CIHI HFRS following adaptations: look-back period: Score computed encounter level. 2-year look-back CIHI HFRS implemented. adaptation systematically underestimates frailty ensures comparable scores across time hospitals considering variations data availability Score format: Integer scores returned representing sum number frailty conditions. scores can easily converted different formats (.e. continuous fractions, 8 risk groups, binary) defined CIHI HFRS. example, dividing returned score 36 (maximum number conditions possible) gives continuous CIHI HFRS. Users interested categorizing scores refer Amuah et al, 2023.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/frailty_score.html","id":"warnings","dir":"Reference","previous_headings":"","what":"Warnings","title":"Compute CIHI Hospital Frailty Risk Score — frailty_score","text":"warning message returned user-provided cohort includes encounters qualified assessing frailty. Encounters age cutoff frailty assessment excluded results. Encounters diagnosis data excluded results. size exclusion detailed warning message. frailty_score_derived encounters NAs, joining result table original cohort. warning message returned erdiag explicitly set NULL. possible exclude diagnoses emergency department consideration explicitly specifying erdiag=NULL. However, excluding types diagnoses recommended. CIHI frailty score developed validated based diagnoses present medical records (NACRS DAD). Excluding diagnoses NACRS found underestimate frailty levels (Amuah et al, 2023).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/frailty_score.html","id":"notes","dir":"Reference","previous_headings":"","what":"Notes","title":"Compute CIHI Hospital Frailty Risk Score — frailty_score","text":"original development paper CIHI HFRS maped 595 ICD-10-CA diagnosis codes frailty conditions. Three codes (Z96.62, U07.1 U07.2) added mapping CIHI methodology notes. function uses mapping 598 ICD-10-CA diagnosis codes CIHI methodology notes identify frailty conditions. previous frailty_score() function calculated UK HFRS (Gilbert, 2018), now deprecated. Using similar approach UK HFRS, CIHI HFRS developed validated based Canadian cohorts, making particularly suited GEMINI data. UK version remains available Rgemini version 0.3.1 earlier receive future maintenance. Users interested UK version refer original publications important differences diagnostic coding practices age threshold.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/frailty_score.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Compute CIHI Hospital Frailty Risk Score — frailty_score","text":"recommend referencing original articles (UK HFRS CIHI HFRS) using function: UK HFRS: Gilbert T, et al. Lancet, 2018. http://dx.doi.org/10.1016/S0140-6736(18)30668-8 CIHI HFRS: Amuah JE, et al. CMAJ, 2023. https://doi.org/10.1503/cmaj.220926 CIHI methodology notes","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/frailty_score.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute CIHI Hospital Frailty Risk Score — frailty_score","text":"","code":"if (FALSE) { # \\dontrun{ cohort_dum <- data.table(genc_id=c(1, 2, 3), age=c(64, 65, 80)) ipdiag_dum <- dummy_diag(nid=3, nrow=10, ipdiagnosis=TRUE, pattern = \"C20$|R460$\") # frailty conditions erdiag_dum <- dummy_diag(nid=3, nrow=5, ipdiagnosis=FALSE, pattern = \"M121$\") # not a frailty condition frailty_score(cohort_dum, ipdiag_dum, erdiag_dum, component_wise = FALSE) } # }"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/gemini_colors.html","id":null,"dir":"Reference","previous_headings":"","what":"GEMINI colors — gemini_colors","title":"GEMINI colors — gemini_colors","text":"Compilation commonly used color palettes plotting purposes.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/gemini_colors.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"GEMINI colors — gemini_colors","text":"","code":"gemini_colors(palette = 1)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/gemini_colors.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"GEMINI colors — gemini_colors","text":"palette (character numeric) Name index color palette. Run plot_color_palettes() see options. default, first palette (\"GEMINI Rainbow\") returned.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/gemini_colors.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"GEMINI colors — gemini_colors","text":"Vignettes colorblind accessible marked *. palettes without *, colorblind friendly combinations can picked according number colors needed (e.g., users need 2-3 colors, pick ones easily distinguishable).","code":""},{"path":[]},{"path":"https://gemini-medicine.github.io/Rgemini/reference/grapes-ni-grapes.html","id":null,"dir":"Reference","previous_headings":"","what":"Not In — %ni%","title":"Not In — %ni%","text":"Infix function opposite %%.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/grapes-ni-grapes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Not In — %ni%","text":"","code":"x %ni% y"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/grapes-ni-grapes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Not In — %ni%","text":"x (vector NULL) values matched. Long vectors supported. y (vector NULL) values matched . Long vectors supported.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/grapes-ni-grapes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Not In — %ni%","text":"(logical) vector logical values length x, value represents whether particular element x exists y.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/grapes-ni-grapes.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Not In — %ni%","text":"","code":"c(\"x\", \"y\") %ni% \"x\" #> [1] FALSE  TRUE"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/homelessness.html","id":null,"dir":"Reference","previous_headings":"","what":"Homelessness flag — homelessness","title":"Homelessness flag — homelessness","text":"homelessness() returns homelessness status genc_id based ICD-10-CA diagnosis codes Z59.0 Z59.1. Coding homelessness became mandatory 2018. therefore recommend users apply function encounters discharged since 2018 (see details). data since 2018, previous studies shown ICD-10-CA codes sensitivity 60-70% detecting whether patient experienced homelessness time hospitalization (Richard et al, 2024).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/homelessness.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Homelessness flag — homelessness","text":"","code":"homelessness(cohort, ipdiag, erdiag)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/homelessness.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Homelessness flag — homelessness","text":"cohort (data.frame data.table) Cohort table relevant encounters interest, row corresponds single encounter. Must contain GEMINI Encounter ID (genc_id). ipdiag (data.table) ipdiagnosis table defined GEMINI Data Repository Dictionary. table must contain genc_id diagnosis_code (ICD-10-CA alphanumeric code) long format. erdiag (data.table) erdiagnosis table defined GEMINI Data Repository Dictionary. table must contain genc_id er_diagnosis_code (ICD-10-CA alphanumeric code) long format. Typically, ER diagnoses included deriving homelessness flags order increase sensitivity. However, certain scenarios, users may choose include IP diagnoses specifying erdiag = NULL. may useful comparing cohorts different rates ER admissions.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/homelessness.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Homelessness flag — homelessness","text":"data.table number rows input cohort additional derived boolean field labelled \"homelessness_icd__flag\". Possible values TRUE, FALSE NA. NA indicates encounter diagnosis code diagnosis table input.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/homelessness.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Homelessness flag — homelessness","text":"current ICD-10-CA codes related homelessness, coded regardless diagnosis type. information, please refer references page. Z59.0: confirmed homelessness assign Z59.0. Z59.1: confirmed inadequate housing due factors relating safety accessibility, necessarily complete lack housing assign Z59.1. Homelessness (Z59.0) coded individual determined homeless. Effective year 2018-2019, CIHI mandated Z59.0 coded \"patient's record shows homeless upon admission\". mandate, prevalence flag increased 84% compared previous year, suggesting ICD-10-CA diagnosis codes underestimate true homelessness rates prior reporting mandate. (details, see 2018 CIHI mandate code homelessness) Inadequate housing (Z59.1) coded individual determined experiencing poor housing conditions, usual housing uninhabitable, experiencing lack utilities. examples include unsafe living conditions, safety issues lack heating, home safely inhabitable due repairs progress.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/homelessness.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Homelessness flag — homelessness","text":"ICD-10-CA codes identifying homelessness. Identification homelessness using health administrative data Ontario: Richard Lucie, et al. J. Clin. Epidimiol., 2024. https://doi.org/10.1016/j.jclinepi.2024.111430","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/homelessness.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Homelessness flag — homelessness","text":"","code":"if (FALSE) { # \\dontrun{ drv <- dbDriver(\"PostgreSQL\") dbcon <- DBI::dbConnect(drv,   dbname = \"db\",   host = \"domain_name.ca\",   port = 1234,   user = getPass(\"Enter user:\"),   password = getPass(\"password\") ) ipadm <- dbGetQuery(dbcon, \"select * from admdad\") %>% data.table() ipdiagnosis <- dbGetQuery(dbcon, \"select * from ipdiagnosis\") %>% data.table() erdiagnosis <- dbGetQuery(dbcon, \"select * from erdiagnosis\") %>% data.table() homeless <- homelessness(cohort = ipadm, ipdiag = ipdiagnosis, erdiag = erdiagnosis) # view only genc_id's with homelessness flag homeless <- homeless %>% filter(homeless$homelessness_icd_flag == TRUE) } # }"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/hospital_fiscal_year.html","id":null,"dir":"Reference","previous_headings":"","what":"Get hospital fiscal year — hospital_fiscal_year","title":"Get hospital fiscal year — hospital_fiscal_year","text":"hospital_fiscal_year returns corresponding hospital fiscal years set dates provided.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/hospital_fiscal_year.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get hospital fiscal year — hospital_fiscal_year","text":"","code":"hospital_fiscal_year(date_ymd)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/hospital_fiscal_year.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get hospital fiscal year — hospital_fiscal_year","text":"date_ymd (character) character vector dates date-times. date value must yyyy-mm-dd format.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/hospital_fiscal_year.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get hospital fiscal year — hospital_fiscal_year","text":"Numeric vector number entries input, containing derived fiscal year input dates (e.g., 2010, 2011, 2012, ).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/hospital_fiscal_year.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get hospital fiscal year — hospital_fiscal_year","text":"Hospital fiscal year defined April ~ March. example, case 2015-02-25, fiscal year 2014.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/hospital_fiscal_year.html","id":"warning","dir":"Reference","previous_headings":"","what":"Warning","title":"Get hospital fiscal year — hospital_fiscal_year","text":"NA values returned vector indicates either missing date format incorrect. dates must yyyy-mm-dd format precede timestamp (e.g., yyyy-mm-dd hh:mm).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/hospital_fiscal_year.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get hospital fiscal year — hospital_fiscal_year","text":"","code":"# Get fiscal year for `discharge_date_time` variable in `ipadmdad` table if (FALSE) { # \\dontrun{ ipadmdad$fisc_year <- hospital_fiscal_year(ipadmdad$discharge_date_time) } # }"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/hospitalizations_last_n_days.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute number of previous hospitalizations for an encounter in a given window. — hospitalizations_last_n_days","title":"Compute number of previous hospitalizations for an encounter in a given window. — hospitalizations_last_n_days","text":"Computes number hospitalizations encounter specified time period, using admission & discharge date-times CIHI Discharge Abstract Database (DAD).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/hospitalizations_last_n_days.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute number of previous hospitalizations for an encounter in a given window. — hospitalizations_last_n_days","text":"","code":"hospitalizations_last_n_days(   cohort,   n_days = 30,   admit_dt = \"admission_date_time\",   discharge_dt = \"discharge_date_time\" )"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/hospitalizations_last_n_days.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute number of previous hospitalizations for an encounter in a given window. — hospitalizations_last_n_days","text":"cohort (data.table, data.frame) Cohort table relevant encounters interest, row corresponds single encounter. Must contain following columns: genc_id (integer): GEMINI encounter ID patient_id_hashed (Varchar): Unique hash patient's health card number admission_date_time (character): date time patient officially registered inpatient current hospital admission. Must YYYY-MM-DD HH:MM. discharge_date_time (character): date time patient formally discharged current hospital admission. Must YYYY-MM-DD HH:MM. n_days (integer) Window calculating number hospitalizations. n_days set 30 days default. admit_dt (character) Admission date-time Variable representing admission date-time. Set admission_date_time default. discharge_dt Discharge date-time Variable representing discharge date-time. Set discharge_date_time default.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/hospitalizations_last_n_days.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute number of previous hospitalizations for an encounter in a given window. — hospitalizations_last_n_days","text":"(data.table) data.table containing number rows input cohort table. data.table contains genc_id, along n_hospitalizations, represents number previous hospitalizations given window. values n_hospitalizations 0, 1, 2+.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/hospitalizations_last_n_days.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute number of previous hospitalizations for an encounter in a given window. — hospitalizations_last_n_days","text":"function uses DAD fields Admission date-time (Group 04 Fields 01/02), Discharge date-time (Group 05 Fields 01/02) along patient_id_hashed calculate number previous hospitalizations encounter specified window.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/hospitalizations_last_n_days.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute number of previous hospitalizations for an encounter in a given window. — hospitalizations_last_n_days","text":"","code":"# Default n_days of 30: if (FALSE) { # \\dontrun{ hospitalizations_last_n_days(cohort) } # }  # User-input window of 182 days (6 months) if (FALSE) { # \\dontrun{ hospitalizations_last_n_days(cohort, n_days = 182) } # }"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/icd_to_ccsr.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify CCSR categories for ICD-10-CA diagnosis codes — icd_to_ccsr","title":"Identify CCSR categories for ICD-10-CA diagnosis codes — icd_to_ccsr","text":"CCSR Clinical Classifications Software Refined provides grouping individual ICD-10 diagnosis codes broader, clinically meaningful disease categories. original CCSR grouping developed based US ICD-10-CM codes. GEMINI developed algorithm mapping Canadian diagnosis codes (ICD-10-CA) CCSR categories. full mapping procedure described . function returns GEMINI-derived CCSR mapping ICD-10-CA diagnosis diagnosis_table input. default, function return CCSR category(s) responsible discharge diagnosis (MRDx). typically refers type-M diagnoses, unless patient type-6 diagnosis (see CIHI definition MRDx page 13). Users can choose obtain CCSR categories diagnosis types setting type_mrdx FALSE.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/icd_to_ccsr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify CCSR categories for ICD-10-CA diagnosis codes — icd_to_ccsr","text":"","code":"icd_to_ccsr(   dbcon,   dxtable,   type_mrdx = TRUE,   unique_mrdx = FALSE,   replace_invalidpdx = TRUE )"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/icd_to_ccsr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify CCSR categories for ICD-10-CA diagnosis codes — icd_to_ccsr","text":"dbcon (DBIConnection) database connection GEMINI database. dxtable (data.frame | data.table) Table containing ICD-10-CA diagnosis codes interest. Typically, refers ipdiagnosis table, contains CIHI -patient diagnoses encounter (see GEMINI database schema). different type diagnosis table provided input (e.g., erdiagnosis), please make sure table contains column named diagnosis_code (character) row refers single, alphanumeric diagnosis code consisting 3-7 characters. type_mrdx set TRUE, following additional columns required: genc_id (integer): GEMINI encounter ID diagnosis_type (character): Type diagnosis code according CIHI diagnosis type definitions. Note, encounter may multiple rows, referring diagnosis codes different types. However, typically, encounter single MRDx. case type_mrdx set TRUE, function return warning encounters multiple MRDx codes. default, encounters returned multiple rows (one per MRDx). However, users may specify unique_mrdx = TRUE (see ), cause function quit case multiple MRDx codes found. type_mrdx (logical) Flag indicating whether filter responsible discharge diagnosis. TRUE (default), MRDx codes (type 6 present, otherwise, type M) returned. option recommended typically return single diagnosis code per encounter. multiple MRDx codes found, warning message shown (unique_mrdx = TRUE, function stop). Additionally, function show warning encounters missing MRDx code. type_mrdx = FALSE, function return diagnosis codes (diagnosis type) present dxtable. case, customized filtering specific diagnosis types applied user outside function. using option, please refer function's vignette find potential issues interpreting default CCSR categories non-MRDx diagnosis types. unique_mrdx (logical) Flag indicating whether requirement unique MRDx code per encounter strict. relevant type_mrdx = TRUE. FALSE (default), multiple MRDx codes/encounter result warning inform user. function finish running return multiple rows per encounter. TRUE, function quit genc_ids multiple MRDx codes found user advised investigate cause multiple MRDx codes. replace_invalidpdx (logical) Flag indicating whether replace invalid default CCSR categories (default = TRUE). set FALSE, function return CCSR default categories derived based original US CCSR tool, may include ICD-10-CA codes ccsr_default = 'XXX000' (\"invalid PDX\"; see details). set TRUE (default), XXX000 values replaced one (valid) CCSR categories 1-6 mapped given code. Specifically, given ICD-10-CA code mapped single CCSR category (ccsr_1), XXX000 replaced category.  Otherwise, code mapped multiple CCSR 1-6 categories, function check one frequent CCSR default category among ICD-10-CA codes start first 3 characters (ICD-10 chapter). codes ICD-10 chapter share CCSR default category (default XXX000 ), ccsr_1 used default.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/icd_to_ccsr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify CCSR categories for ICD-10-CA diagnosis codes — icd_to_ccsr","text":"data.table function returns table containing ICD-10-CA diagnosis codes interest, together corresponding (GEMINI-derived) CCSR category(s). row output table, following variables returned: diagnosis_code: ICD-10-CA code diagnosis_code_desc: description ICD-10-CA code ccsr_default: default CCSR category, main disease group assigned diagnosis code typically main category interest used analyses. ccsr_default_desc: description CCSR default category ccsr_1 ccsr_6: 1-6 CCSR categories mapped given code. Although ccsr_default typically main category interest, ICD-10-CA codes mapped 1 (6) CCSR categories. circumstances, may interest analyse 1-6 CCSR categories, instead analyzing default CCSR. required, descriptions CCSR 1-6 categories can obtained lookup_ccsr table.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/icd_to_ccsr.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Identify CCSR categories for ICD-10-CA diagnosis codes — icd_to_ccsr","text":"GEMINI-derived CCSR mappings validated clinical experts; however, users advised spot-check mappings ensure accuracy. Please notify GEMINI team encounter issues. mappings derived based older version CCSR (v2020.3) may subject change future updates. diagnosis codes, ccsr_default NA (ccsr_default_desc = 'Unmapped'), indicates diagnosis code mapped CCSR category yet. less likely happen type_mrdx set TRUE (default) since vast majority MRDx codes mapped GEMINI. Note: Type-4 morphology codes always returned 'Unmapped' since numeric codes based ICD-0 (oncology) diagnoses, meant mapped CCSR categories. diagnosis codes returned ccsr_default = 'XXX000', indicates diagnosis code valid -patient principal diagnosis (PDX) according US diagnostic coding following Medicare Code Edits guidelines (see . Due mapping ambiguity differences coding US Canada, may find ICD-10-CA MRDx codes returned 'XXX000'(invalid PDX). Additionally, clinical research projects, distinction valid vs. invalid principle diagnosis coding may relevant. Similarly, users interested CCSR groups diagnosis types (type_mrdx = FALSE), definition CCSR default categories valid vs. invalid PDX categories might meaningful. Therefore, default, replace_invalidpdx set TRUE. However, please carefully read documentation understand exactly invalid PDX categories replaced within function.","code":""},{"path":[]},{"path":"https://gemini-medicine.github.io/Rgemini/reference/icd_to_ccsr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Identify CCSR categories for ICD-10-CA diagnosis codes — icd_to_ccsr","text":"","code":"if (FALSE) { # \\dontrun{ drv <- dbDriver(\"PostgreSQL\") dbcon <- DBI::dbConnect(drv,                         dbname = \"db\",                         host = \"domain_name.ca\",                         port = 1234,                         user = getPass(\"Enter user:\"),                         password = getPass(\"password\"))  dxtable <- dbGetQuery(dbcon, \"select * from ipdiagnosis\") %>% data.table() icd_to_ccsr(dbcon, dxtable) } # }"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/icu_entry.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute entry to Intensive Care Unit — icu_entry","title":"Compute entry to Intensive Care Unit — icu_entry","text":"Determines whether encounter entered Intensive Care Unit (ICU) hospital stay using CIHI Discharge Abstract Database (DAD) fields.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/icu_entry.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute entry to Intensive Care Unit — icu_entry","text":"","code":"icu_entry(   cohort,   ipscu,   as_outcome = FALSE,   exclude_cutoff = 0,   entry_since_cutoff = c(24, 48, 72) )"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/icu_entry.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute entry to Intensive Care Unit — icu_entry","text":"cohort (data.table, data.frame) Cohort table relevant encounters interest, row corresponds single encounter. Must contain following columns: genc_id (integer): GEMINI encounter ID admission_date_time (character): Date-time admission YYYY-MM-DD HH:MM format ipscu (data.table, data.frame) Table equivalent ipscu table defined GEMINI Data Repository Dictionary. Table must contain fields: GEMINI Encounter ID (genc_id), SCU admission time (scu_admit_date_time), SCU number (scu_unit_number). as_outcome (logical) Whether ICU admission clinical outcome . Default FALSE. set TRUE, records direct ICU admission admitted inpatient care (IP admission) (.e. scu_admit_date_time <= admission_date_time) excluded. exclude_cutoff (integer) number hours add IP admission time establish cutoff time excluding records identified ICU admissions. parameter relevant as_outcome=TRUE. example, exclude_cutoff = 12, records ICU entry time scu_admit_date_time <= admission_date_time + 12 hours excluded identified ICU admissions. Default exclude_cutoff = 0, ICU entries IP admission time excluded. entry_since_cutoff (integer, vector) Time window ICU entry since IP admission (since x hours post IP admission user specifies exclude_cutoff), hours. parameter, together exclude_cutoff specifies time interval ICU admissions identified. default, exclude_cutoff = 0 entry_since_cutoff = c(24, 48, 72), function calculates ICU entry within 24, 48 72 hours since IP admission. Users can specify different values two parameters customize time interval interest. example, exclude_cutoff = 24 entry_since_cutoff = 48, function determines whether patient admitted ICU 24 72 (24+48) hours post IP admission (.e. time interval (24, 72] hours)).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/icu_entry.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute entry to Intensive Care Unit — icu_entry","text":"(data.table) default, encounter input \"cohort\" returns corresponding derived boolean (TRUE/FALSE) fields \"icu_entry_derived\", \"icu_entry_in_24hr_derived\", \"icu_entry_in_48hr_derived\" \"icu_entry_in_72hr_derived\". user specified time window x hour used, field \"icu_entry_in_xhr_derived\" computed addition \"icu_entry_derived\".","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/icu_entry.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute entry to Intensive Care Unit — icu_entry","text":"function uses DAD fields Admission date-time (Group 04 Fields 01/02), SCU Admit date-time (Group 13, Field 03/04) derive boolean fields indicating ICU entries time hospital stay, within specified time window since hospital admission. definition DAD (Group 13, Field 02), SCUs include ICUs Step-Units. Step-Units considered ICUs. Therefore, function excludes CIHI defined Step-Units numbers calculation: 90 : Step-Medical Unit 93 : Combined Medical/Surgical Step-Unit 95 : Step-Surgical Unit 99 : SCU Please refer CIHI DAD abstracting manual details.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/icu_entry.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Compute entry to Intensive Care Unit — icu_entry","text":": design, function return NA values icu_entry, unless flag time sensitive (.e., as_outcome TRUE, deriving ICU admission within certain time window/cut-). time sensitive flags, genc_ids ICU entry valid ICU admission date-time returned NA. genc_id least one valid ICU admission date-time, valid entries included calculation. Note lot invalid ICU admission date-times contain date information . Users may choose impute missing timestamps prior running function. one tries left-join output function another table, make sure list encounters aligns tables. 2 dependent parameters (exclude_cutoff, entry_since_cutoff) determining time interval ICU admissions identified, please read function documentation carefully specifying non-default value parameters ensure identification time interval intented. See examples common use cases.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/icu_entry.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute entry to Intensive Care Unit — icu_entry","text":"","code":"## ICU admission within the first 24 hours since IP admission (i.e. you are interested in knowing % of encounters admitted to ICU): if (FALSE) { # \\dontrun{  icu_entry (cohort, ipscu, as_outcome=FALSE, entry_since_cutoff=24) } # }  ## ICU admission within the first 24 hours since IP admission, as a clinical outcome ## excluding records with ICU entries prior to IP admission: if (FALSE) { # \\dontrun{  icu_entry (cohort, ipscu, as_outcome=TRUE, entry_since_cutoff=24) } # }  ## ICU admission within the first 72 hours since IP admission, as a clinical outcome ## excluding records with ICU entries prior to the first 24 hours of IP admission (i.e. you are interested in knowing ## patients who were admitted to ICU between the interval of (24, 72] hours since IP admission): if (FALSE) { # \\dontrun{  icu_entry (cohort, ipscu, as_outcome=TRUE, exclude_cutoff=24, entry_since_cutoff=48) # Note: entry_since_cutoff=48 (instead of 72) because 24+48=72 } # }"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/icu_los.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Length of Stay in Intensive Care Unit — icu_los","title":"Compute Length of Stay in Intensive Care Unit — icu_los","text":"Calculates total duration Intensive Care Unit (ICU) encounter spent hospital stay using CIHI Discharge Abstract Database (DAD) fields","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/icu_los.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Length of Stay in Intensive Care Unit — icu_los","text":"","code":"icu_los(cohort, ipscu)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/icu_los.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Length of Stay in Intensive Care Unit — icu_los","text":"cohort (data.table data.frame) Table relevant encounters interest, row corresponds single encounter. Must contain GEMINI Encounter ID (genc_id). ipscu (data.table data.frame) Table equivalent ipscu table defined GEMINI Data Repository Dictionary. Table must contain fields: GEMINI Encounter ID (genc_id), SCU admission time (scu_admit_date_time \"yyyy-mm-dd hh:mm\" format), SCU discharge time (scu_discharge_date_time \"yyyy-mm-dd hh:mm\" format), SCU number (scu_unit_number).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/icu_los.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Length of Stay in Intensive Care Unit — icu_los","text":"(data.table) default, encounter input \"cohort\" returns corresponding derived numeric fields \"icu_los_hrs_derived\" \"icu_los_days_derived\".","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/icu_los.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute Length of Stay in Intensive Care Unit — icu_los","text":"function calculates length stay (LoS) hours days encounter spent ICU hospital stay. uses DAD fields SCU Admit date-time (Group 13, Field 03/04) SCU Discharge date-time (Group 13, Field 05/06) derive numeric fields. Rows either SCU Admit/Discharge date-time fields missing, counted calculation. encounters multiple ICU visits, function returns sum duration visit. definition DAD (Group 13, Field 02), SCUs include ICUs Step-Units. Step-Units considered ICUs. Therefore, function excludes CIHI defined Step-Units numbers calculation: 90 : Step-Medical Unit 93 : Combined Medical/Surgical Step-Unit 95 : Step-Surgical Unit 99 : SCU Please refer CIHI DAD abstracting manual details.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/icu_los.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Compute Length of Stay in Intensive Care Unit — icu_los","text":": Encounter IDs cohort table present ipscu table assumed visits ICU. encounters, value 0 assigned derived fields. Encounter IDs ipscu table missing/invalid scu_admit_date_time scu_discharge_date_time returned icu_los = NA. entries valid date information (timestamp). Users may choose impute missing timestamps prior running function. one tries left-join output function another table, make sure list encounters aligns tables.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/icu_los.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute Length of Stay in Intensive Care Unit — icu_los","text":"","code":"# Compute ICU LoS for all encounters in ipadmdad: if (FALSE) { # \\dontrun{ icu_los (cohort=ipadmdad, ipscu=ipscu) } # }"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/in_hospital_mortality.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute in-hospital mortality using CIHI DAD — in_hospital_mortality","title":"Compute in-hospital mortality using CIHI DAD — in_hospital_mortality","text":"in_hospital_mortality returns whether patient deceased hospital based CIHI DAD field discharge disposition","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/in_hospital_mortality.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute in-hospital mortality using CIHI DAD — in_hospital_mortality","text":"","code":"in_hospital_mortality(ipadmdad, suicide = FALSE)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/in_hospital_mortality.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute in-hospital mortality using CIHI DAD — in_hospital_mortality","text":"ipadmdad (data.frame data.table) Table relevant encounters interest DRM table \"ipadmdad\" (see GEMINI Data Repository Dictionary). Must contain two fields: genc_id discharge_disposition. suicide (logical) TRUE/FALSE argument indicating whether suicides facility counted towards -hospital mortality rate .","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/in_hospital_mortality.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute in-hospital mortality using CIHI DAD — in_hospital_mortality","text":"data.table number rows input ipadmdad, additional derived boolean field labelled in_hospital_mortality_derived. Possible values TRUE, FALSE NA, NA indicates missing discharge disposition.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/in_hospital_mortality.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute in-hospital mortality using CIHI DAD — in_hospital_mortality","text":"function takes CIHI DAD \"discharge disposition\" field (Group 05, Field 05 19/20 CIHI DAD) generates boolean variable indicating whether patient deceased hospital stay. current version function captures four possible values indicating patient deceased hospital: 7 :  Died (Deprecated post 2017) 72 : Died Facility 73 : Medical Assistance Dying 74 : Suicide Facility (Excluded calculation default; can included setting suicide argument TRUE)","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/in_hospital_mortality.html","id":"warning","dir":"Reference","previous_headings":"","what":"Warning","title":"Compute in-hospital mortality using CIHI DAD — in_hospital_mortality","text":"NA values returned data.table indicate missing discharge disposition field values.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/laps_assign_test.html","id":null,"dir":"Reference","previous_headings":"","what":"Assign score to LAPS component — laps_assign_test","title":"Assign score to LAPS component — laps_assign_test","text":"Assign score LAPS component","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/laps_assign_test.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Assign score to LAPS component — laps_assign_test","text":"","code":"laps_assign_test(x, breaks, points)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/laps_assign_test.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Assign score to LAPS component — laps_assign_test","text":"x (character) vector result values particular lab test. breaks (numeric) vector intervals particular test correspond different number points. points (numeric) vector scores interval breaks.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/laps_assign_test.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Assign score to LAPS component — laps_assign_test","text":"(numeric) vector scores lab result value provided x.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/laps_assign_test.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Assign score to LAPS component — laps_assign_test","text":"","code":"x <- c(\"0.3\", \"0.7\") breaks <- c(0, 0.2, 0.4, 0.8, Inf) points <- c(1, 2, 3, 4)  laps_assign_test(x, breaks, points) #> [1] 2 3"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/length_of_stay.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute hospital Length of Stay (LoS) — length_of_stay","title":"Compute hospital Length of Stay (LoS) — length_of_stay","text":"length_of_stay returns Length Stay hospital admissions unit hours days.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/length_of_stay.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute hospital Length of Stay (LoS) — length_of_stay","text":"","code":"length_of_stay(   ipadmdad,   adm_dtvar = \"admission_date_time\",   dis_dtvar = \"discharge_date_time\" )"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/length_of_stay.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute hospital Length of Stay (LoS) — length_of_stay","text":"ipadmdad (data.frame data.table) Table relevant encounters interest DRM table \"ipadmdad\" (see GEMINI Data Repository Dictionary). Must contain three fields: encounter ID (genc_id), two date-time variables corresponding admission discharge (typically admission_date_time discharge_date_time). Date-time variables must \"yyyy-mm-dd hh:mm\" format. adm_dtvar (character) Character string defining column name admission date-time (typically \"admission_date_time\"). dis_dtvar (character) Character string defining column name discharge date-time (typically \"discharge_date_time\").","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/length_of_stay.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute hospital Length of Stay (LoS) — length_of_stay","text":"data.table number rows input \"ipadmdad\", additional derived numeric fields labelled \"los_hrs_derived\" \"los_days_derived\".","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/length_of_stay.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute hospital Length of Stay (LoS) — length_of_stay","text":"Length Stay defined duration hospital -patient stay, thus, calculated (discharge_date_time - admission_date_time). currently major patient outcome various research studies one physician performance indicators MyPracticeReport. Researchers might consider modifications metric. One example adjusting patient receives palliative care. transfer palliative unit within hospital trackable (e.g. room transfer data), might good idea re-define discharge point palliative unit entrance. reduce bias metric since patient care palliative order different.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/length_of_stay.html","id":"warning","dir":"Reference","previous_headings":"","what":"Warning","title":"Compute hospital Length of Stay (LoS) — length_of_stay","text":"NA values returned data.table indicates either missing admission/discharge date time format incorrect.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/length_of_stay.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Compute hospital Length of Stay (LoS) — length_of_stay","text":"function takes two optional input arguments defining admission discharge date-time variables interest (default admission_date_time discharge_date_time).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/loop_mlaps.html","id":null,"dir":"Reference","previous_headings":"","what":"Loop mLAPS — loop_mlaps","title":"Loop mLAPS — loop_mlaps","text":"wrapper around mlaps() function breaks calculation mLAPS large number encounters hospital-year. avoids memory issues can caused loading large chunks lab table.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/loop_mlaps.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Loop mLAPS — loop_mlaps","text":"","code":"loop_mlaps(   db,   cohort = NULL,   hours_after_admission = 0,   component_wise = FALSE )"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/loop_mlaps.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Loop mLAPS — loop_mlaps","text":"db (DBIConnection) RPostgres DB connection. cohort (data.frame data.table) Containing column genc_ids restrict calculation . hours_after_admission (numeric) Consider lab tests collected hours_after_admission hours inpatient admission calculation. Default hours_after_admission set 0, lab tests collected Emergency Department (inpatient admission) considered mLAPS calculation. Since encounters admitted Emergency Department, depending research question, can relevant consider lab tests collected early inpatient admission. Typically, hours_after_admission can set 24 consider lab tests collected Emergency Department 24 hours inpatient admission. component_wise (logical) aggregate score instead outputs LAPS component (test) contribution overall score.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/loop_mlaps.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Loop mLAPS — loop_mlaps","text":"(data.frame) output_laps_components == TRUE: genc_id (numeric),test_type_mapped_omop (character),mlaps (numeric) max score test. output_laps_components == FALSE: genc_id (numeric),mlaps (numeric) sum max scores relevant test encounter.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/loop_mlaps.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Loop mLAPS — loop_mlaps","text":"function used, please cite following: https://doi.org/10.1097/MLR.0b013e3181589bb6 https://doi.org/10.1007/s11606-023-08245-w https://doi.org/10.1101/2023.01.06.23284273","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/loop_mlaps.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Loop mLAPS — loop_mlaps","text":"","code":"if (FALSE) { # \\dontrun{ drv <- DBI::dbDriver(\"PostgreSQL\") db <- DBI::dbConnect(   drv,   dbname = \"db_name\",   host = \"domain_name.ca\",   port = 1234,   user = getPass::getPass(\"Enter Username\"),   password = getPass::getPass(\"Enter Password\")   )  cohort <- DBI::dbGetQuery(db, \"SELECT genc_id FROM public.admdad LIMIT 200;\")  laps <- loop_laps(db, cohort = cohort) } # }"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/lunique.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns number of unique values — lunique","title":"Returns number of unique values — lunique","text":"Returns number unique values","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/lunique.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns number of unique values — lunique","text":"","code":"lunique(x)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/lunique.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns number of unique values — lunique","text":"x (vector)","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/lunique.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Returns number of unique values — lunique","text":"","code":"lunique(c(1, 1, 2, 2, 2, 3)) #> [1] 3"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/mapping_cihi_frailty.html","id":null,"dir":"Reference","previous_headings":"","what":"Mapping data for frailty_score function — mapping_cihi_frailty","title":"Mapping data for frailty_score function — mapping_cihi_frailty","text":"Mapping data frailty_score function","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/mapping_disability.html","id":null,"dir":"Reference","previous_headings":"","what":"Mapping data for disability function — mapping_disability","title":"Mapping data for disability function — mapping_disability","text":"Mapping data disability function","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/mapping_message.html","id":null,"dir":"Reference","previous_headings":"","what":"Mapping Message — mapping_message","title":"Mapping Message — mapping_message","text":"Message display inform user function used relies GEMINI SME mapped values.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/mapping_message.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Mapping Message — mapping_message","text":"","code":"mapping_message(what, addtl = NULL)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/mapping_message.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Mapping Message — mapping_message","text":"(character) values mapped. addtl (character) additional, specific message append generic message.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/mapping_message.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Mapping Message — mapping_message","text":"Prints message console.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/max_pairwise_smd.html","id":null,"dir":"Reference","previous_headings":"","what":"Maximum Pairwise Standardized Mean Difference — max_pairwise_smd","title":"Maximum Pairwise Standardized Mean Difference — max_pairwise_smd","text":"Maximum Pairwise Standardized Mean Difference","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/max_pairwise_smd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Maximum Pairwise Standardized Mean Difference — max_pairwise_smd","text":"","code":"max_pairwise_smd(x, name, round_to = 3, ...)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/max_pairwise_smd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Maximum Pairwise Standardized Mean Difference — max_pairwise_smd","text":"x named (list) list element vector corresponding observations variable interest particular strata (corresponding name). See example can constructed. name (character) Unused variable required supported extra.col table1::table1(). round_to (numeric) many digits round standardized mean difference . ... Additional arguments passed table1::table1().","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/max_pairwise_smd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Maximum Pairwise Standardized Mean Difference — max_pairwise_smd","text":"(numeric) maximum pairwise standardized mean difference strata particular variable.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/max_pairwise_smd.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Maximum Pairwise Standardized Mean Difference — max_pairwise_smd","text":"implementation stddiff package fragile, smd package. However, smd package uses population variance calculate SMD opposed sample variance. can cause small inaccuracies final result. Therefore elect implement stddiff. Another consideration stddiff can maximally precise 3 decimal places. Additionally, large cohorts, standardized mean differences calculated categorical variables using stddiff package may throw n[1] * n[2] : NAs produced integer overflow. implementation issue stddiff calculation standard errors standardized mean differences. However, since standard errors used final output, can safely ignored.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/max_pairwise_smd.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Maximum Pairwise Standardized Mean Difference — max_pairwise_smd","text":"","code":"max_pairwise_smd(split(mtcars$disp, mtcars$am)) #> [1] 1.478"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/max_result_value.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculates maxima when input vector is not empty, else returns NA. — max_result_value","title":"Calculates maxima when input vector is not empty, else returns NA. — max_result_value","text":"Calculates maxima input vector empty, else returns NA.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/max_result_value.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculates maxima when input vector is not empty, else returns NA. — max_result_value","text":"","code":"max_result_value(x)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/max_result_value.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculates maxima when input vector is not empty, else returns NA. — max_result_value","text":"x (numeric) vecctor numerical values.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/max_result_value.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculates maxima when input vector is not empty, else returns NA. — max_result_value","text":"(numeric) numerical value NA","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/max_result_value.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculates maxima when input vector is not empty, else returns NA. — max_result_value","text":"helper function suppress default warning message `base::max()“ function elements input vector NA, can problematic unit testing. Default remove NA values maxima calculation.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/min_result_value.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculates minima when input vector is not empty, else returns NA. — min_result_value","title":"Calculates minima when input vector is not empty, else returns NA. — min_result_value","text":"Calculates minima input vector empty, else returns NA.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/min_result_value.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculates minima when input vector is not empty, else returns NA. — min_result_value","text":"","code":"min_result_value(x)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/min_result_value.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculates minima when input vector is not empty, else returns NA. — min_result_value","text":"x (numeric) vecctor numerical values.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/min_result_value.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculates minima when input vector is not empty, else returns NA. — min_result_value","text":"(numeric) numerical value NA","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/min_result_value.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculates minima when input vector is not empty, else returns NA. — min_result_value","text":"helper function suppress default warning message `base::min()“ function elements input vector NA, can problematic unit testing. Default remove NA values minima calculation.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/mlaps.html","id":null,"dir":"Reference","previous_headings":"","what":"mLAPS — mlaps","title":"mLAPS — mlaps","text":"mLAPS","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/mlaps.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"mLAPS — mlaps","text":"","code":"mlaps(ipadmdad, lab, hours_after_admission = 0, component_wise = FALSE)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/mlaps.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"mLAPS — mlaps","text":"ipadmdad (data.frame) Table equivalent subset admdad table defined GEMINI Data Repository Dictionary. lab (data.table, data.frame) Table equivalent subset lab table defined GEMINI Data Repository Dictionary. hours_after_admission (numeric) Consider lab tests collected hours_after_admission hours inpatient admission calculation. Default hours_after_admission set 0, lab tests collected Emergency Department (inpatient admission) considered mLAPS calculation. Since encounters admitted Emergency Department, depending research question, can relevant consider lab tests collected early inpatient admission. Typically, hours_after_admission can set 24 consider lab tests collected Emergency Department 24 hours inpatient admission. component_wise (logical) aggregate score instead outputs LAPS component (test) contribution overall score.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/mlaps.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"mLAPS — mlaps","text":"(data.frame) componentwise == TRUE: genc_id (numeric),test_type_mapped_omop (character),mlaps (numeric) max score test. componentwise == FALSE: genc_id (numeric),mlaps (numeric) sum max scores relevant test encounter.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/mlaps.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"mLAPS — mlaps","text":"Modified Laboratory based Acute Physiology Score (mLAPS) uses 12 lab test values 11 unique lab tests. modified version, troponin tests considered mLAPS calculation.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/mlaps.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"mLAPS — mlaps","text":"encounter multiple recorded lab results given \"LAPS-relevant\" test, test result results worst possible LAPS contribution taken conservative estimate. Patients without entries lab table within hours_of_admission returned. encounters returned, may reasonable impute LAPS score zero lab data principle available site time period. lab data unavailable, might accurate assign LAPS score encounters NA. general recommended take care intentional imputing LAPS scores.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/mlaps.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"mLAPS — mlaps","text":"function used, please cite following: Escobar G, et al. Med Care, 2008. https://doi.org/10.1097/MLR.0b013e3181589bb6 Roberts SB, et al. J Gen Intern Med, 2023. https://doi.org/10.1007/s11606-023-08245-w Roberts SB, et al. medRxiv (preprint), 2023. https://doi.org/10.1101/2023.01.06.23284273","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_imaging.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute the number of radiology tests per encounter — n_imaging","title":"Compute the number of radiology tests per encounter — n_imaging","text":"n_imaging returns number radiology tests hospital admission.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_imaging.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute the number of radiology tests per encounter — n_imaging","text":"","code":"n_imaging(dbcon, cohort, exclude_ed = FALSE)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_imaging.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute the number of radiology tests per encounter — n_imaging","text":"dbcon (DBIConnection) database connection GEMINI database. DBI connection accepted odbc connection may cause connection issues certain environment. cohort (data.frame data.table) Cohort table relevant encounters interest, row corresponds single encounter. Must contain GEMINI Encounter ID (genc_id). exclude_ed (logical) Whether exclude tests emergency department. set TRUE, tests performed ED (testing time admission time) counted. set FALSE, tests filtered time tests radiology table counted. Please aware may include tests triage time, tests discharge time, tests without testing time. Tests ED defined ordered_date_time earlier admission_date_time. ordered_date_time available, performed_date_time used instead.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_imaging.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute the number of radiology tests per encounter — n_imaging","text":"data.table number rows input cohort, additional derived numeric fields labelled \"n_img_xray_derived\",  \"n_img_ct_derived\", \"n_img_mri_derived\",  \"n_img_us_derived\", \"n_img_other_derived\", \"n_img_int_derived\" \"n_img_ct_mri_us_derived\".","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_imaging.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute the number of radiology tests per encounter — n_imaging","text":"function takes list admissions GEMINI database connection generate numeric fields counting number different radiology tests admission. Imaging table database include field classifies test 7 categories. 1 : X-Ray 2 : CT 3 : MRI 4 : Ultrasound 5 : 6 : Interventional radiology procedures 7 : Echo (Excluded) Therefore, function run standardization efforts imaging table (performed GEMINI team). Currently, number advanced radiology tests one performance metrics MyPracticeReport. CT, MRI Ultrasound considered advance imaging tests, can retrieved derived variable (n_img_ct_mri_us_derived).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_imaging.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Compute the number of radiology tests per encounter — n_imaging","text":"Currently, function take radiology data coverage account. patients without imaging tests, function return 0 result columns. User check radiology data coverage decide whether imputed 0s appropriate .","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_imaging.html","id":"warning","dir":"Reference","previous_headings":"","what":"Warning","title":"Compute the number of radiology tests per encounter — n_imaging","text":"Function returns data.table id field several numeric fields. design, function return NA values. one tries left-join output function another table (another list admissions left), make sure list admissions (patient) aligns tables.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_missing.html","id":null,"dir":"Reference","previous_headings":"","what":"Number of missingness — n_missing","title":"Number of missingness — n_missing","text":"function checks number missingness vector, data.frame data table. returns results exact number (percentage) returns index missingness","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_missing.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Number of missingness — n_missing","text":"","code":"n_missing(x, na_strings = c(\"\"), index = FALSE)  mi2(x, na_strings = c(\"\"), index = FALSE)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_missing.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Number of missingness — n_missing","text":"x (vector data.frame data.table) object checked na_strings (character) character vector strings interpreted NA values. default n_missing \"\", treat empty strings NA. index (logical) true function returns index missing values instead number (percentage). vector input, logical vector length returned. data.frame data.table input, function returns vector length equal number rows input table missingness row result returned value TRUE row.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_missing.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Number of missingness — n_missing","text":"(character logical) vector input, character vector length x value represents whether particular element missing. data.frame data.table input, logical vector length number rows input table value represents whether element row missing.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_missing.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Number of missingness — n_missing","text":"","code":"df <- data.frame(   x = c(1, 2, NA, 4, 5),   y = as.POSIXct(c(\"2023-12-01 15:00\", \"2021-07-09 19:30\", \"2020-01-02 09:00\",                    \"1998-08-23 15:23\", NA)),   z = c(\"NA\", NA, \"a\", \" \", \"\"),   v = as.Date(c(\"2023-10-23\", \"2012-06-30\", NA, \"2023-08-12\", \"2009-01-01\")) ) n_missing(df) #>           x           y           z           v  #> \"1 (20.0%)\" \"1 (20.0%)\" \"2 (40.0%)\" \"1 (20.0%)\"  n_missing(df$z) #> [1] \"2 (40.0%)\" n_missing(df, na_strings = c(\"\", \"NA\", \" \")) #>           x           y           z           v  #> \"1 (20.0%)\" \"1 (20.0%)\" \"4 (80.0%)\" \"1 (20.0%)\"  n_missing(df$z, index = TRUE) #> [1] FALSE  TRUE FALSE FALSE  TRUE n_missing(df, na_strings = c(\"\", \"NA\", \" \"), index = TRUE) #> [1] TRUE TRUE TRUE TRUE TRUE"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_rbc_transfusions.html","id":null,"dir":"Reference","previous_headings":"","what":"Count the number Red Blood Cell (RBC) Transfusions per encounter — n_rbc_transfusions","title":"Count the number Red Blood Cell (RBC) Transfusions per encounter — n_rbc_transfusions","text":"function calculates number appropriate transfusions total transfusions per encounter. definition appropriate transfusion can found sample Practice Report. transfusion defined procedure codes: 4144461. 4137859 4022173 appropriate transfusion also requires patients pre-transfusion hemoglobin levels  80 g/L. Athena definition hemoglobin test: 3000963 Red blood cell transfusions hemoglobin measurement within 48 hours prior transfusion excluded. scenarios rare, typically occurring approximately 2% blood transfusions GEMINI data.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_rbc_transfusions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Count the number Red Blood Cell (RBC) Transfusions per encounter — n_rbc_transfusions","text":"","code":"n_rbc_transfusions(dbcon, cohort, exclude_ed = FALSE)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_rbc_transfusions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Count the number Red Blood Cell (RBC) Transfusions per encounter — n_rbc_transfusions","text":"dbcon (DBIConnection) database connection GEMINI database. DBI connection accepted odbc connection may cause connection issues certain environment. cohort (data.frame data.table) Cohort table relevant encounters interest row corresponds single encounter. Must contain following columns: genc_id (integer): GEMINI encounter ID hospital_num (integer): Hospital number exclude_ed (logical) Whether exclude transfusions emergency department. set TRUE, transfusions performed ED (admission time) counted. set FALSE, transfusions filtered time RBC transfusions transfusion table counted. Please aware may include transfusions triage time, transfusions discharge time, transfusions without issuing time. Transfusions ED defined issue_date_time earlier admission_date_time. Transfusions missing issue_date_time excluded exclude_ed set TRUE.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_rbc_transfusions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Count the number Red Blood Cell (RBC) Transfusions per encounter — n_rbc_transfusions","text":"(data.table) Table three columns: genc_id, n_app_rbc_transfusion_derived (number appropriate RBC transfusions), n_rbc_transfusion_derived (total RBC transfusions). Encounters without transfusion get 0.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_rbc_transfusions.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Count the number Red Blood Cell (RBC) Transfusions per encounter — n_rbc_transfusions","text":"Transfusion data two hospitals known data quality issues automatically removed function. genc_ids sites included returned output. merging output function another table, genc_ids value NA. Currently, function take transfusion lab data coverage account. patients without RBC transfusion, function return 0 result columns. User check transfusion lab data coverage decide whether imputed 0s appropriate .","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_routine_bloodwork.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute the number of routine bloodwork tests per encounter — n_routine_bloodwork","title":"Compute the number of routine bloodwork tests per encounter — n_routine_bloodwork","text":"n_routine_bloodwork returns number routine bloodwork (Sodium Hemoglobin tests) hospital admission. Sodium Hemoglobin tests defined OMOP codes. Sodium code 3019550. Hemoglobin 3000963.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_routine_bloodwork.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute the number of routine bloodwork tests per encounter — n_routine_bloodwork","text":"","code":"n_routine_bloodwork(dbcon, cohort, exclude_ed = FALSE)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_routine_bloodwork.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute the number of routine bloodwork tests per encounter — n_routine_bloodwork","text":"dbcon (DBIConnection) database connection GEMINI database. DBI connection accepted odbc connection may cause connection issues certain environment. cohort (data.frame data.table) Cohort table relevant encounters interest, row corresponds single encounter. Must contain GEMINI Encounter ID (genc_id). exclude_ed (logical) Whether exclude tests emergency department. set TRUE, tests performed ED settings (testing time admission time) counted. set FALSE, tests filtered time tests lab table counted. Please aware may include tests triage time, tests discharge time, tests without testing time. Tests ED defined collection_date_time earlier admission_date_time. Tests missing collection_date_time excluded exclude_ed set TRUE.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_routine_bloodwork.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute the number of routine bloodwork tests per encounter — n_routine_bloodwork","text":"data.table object number rows input \"cohort\", additional derived numeric field labelled \"n_routine_bloodwork_derived\"","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_routine_bloodwork.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute the number of routine bloodwork tests per encounter — n_routine_bloodwork","text":"function takes list admissions GEMINI databse connection generate numeric fields counting number Sodium Hemoglobin tests admission. Lab table database include field classifies test different categories. Therefore, function run standardization efforts lab table (performed GEMINI). Currently, number routine bloodwork tests one performance metrics MyPracticeReport. Function removes tests without valid numeric result value include tests blood drawn patients.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/n_routine_bloodwork.html","id":"warning","dir":"Reference","previous_headings":"","what":"Warning","title":"Compute the number of routine bloodwork tests per encounter — n_routine_bloodwork","text":"Function returns data.table id field genc_id one numeric field indicating number bloodwork tests per encounter. design, function return NA values. genc_id entries \"lab\" table, admission gets assigned 0 number tests. User check lab data coverage decide whether imputed 0s appropriate . one tries left-join output function another table (another list admissions left), make sure list admissions (patient) aligns tables. function requires mappings Subject Matter Expert ensure tests mapped 3019550 - Sodium (Moles/volume) Serum Plasma, 3000963 - Hemoglobin (Mass/volume) Blood","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/plot_color_palettes.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot GEMINI color palettes — plot_color_palettes","title":"Plot GEMINI color palettes — plot_color_palettes","text":"Plots available GEMINI color palettes.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/plot_color_palettes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot GEMINI color palettes — plot_color_palettes","text":"","code":"plot_color_palettes(plot_palettes = \"all\")"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/plot_color_palettes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot GEMINI color palettes — plot_color_palettes","text":"plot_palettes (character numeric) palettes plot. default, plots palettes.","code":""},{"path":[]},{"path":"https://gemini-medicine.github.io/Rgemini/reference/plot_over_time.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot variable over time — plot_over_time","title":"Plot variable over time — plot_over_time","text":"Function plotting variable interest time (hospital, grouping variables).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/plot_over_time.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot variable over time — plot_over_time","text":"","code":"plot_over_time(   data,   plot_var = NULL,   time_var = \"discharge_date_time\",   line_group = \"hospital_num\",   color_group = NULL,   facet_group = \"hospital_num\",   time_int = \"month\",   func = \"mean\",   plot_cat = NULL,   show_overall = TRUE,   smooth_method = NULL,   line_width = 1,   ylimits = NULL,   min_n = 0,   colors = gemini_colors(1),   base_size = 12,   return_data = FALSE,   ... )"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/plot_over_time.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot variable over time — plot_over_time","text":"data (data.frame | data.table) table containing relevant data plotted. plot_var (character) name outcome variable plot. time_var (character) name variable specifying time. default: \"discharge_date_time\". line_group (character) Grouping variable representing individual lines. default: \"hospital_num\" (unless \"hospital_num\" exist, case function check \"hospital_id\" instead). color_group (character) Grouping variable used color coding. facet_group (character) Grouping variable specifying facet plots. time_int (character) Time interval used plotting (.e., x-axis intervals). Currently, function can automatically calculate following time intervals date-time variables: \"month\" (default) \"quarter\" \"year\" \"fisc_year\" hospital fiscal year starting April \"season\" custom time intervals (e.g., weeks), users can calculate desired time interval prior running function. long custom time variable exists data input, users can specify variable time_int input. example, users derive weekly time variable called \"week\" data table, specify time_int = \"week\". time_var equal c(\"month\", \"quarter\", \"year\", \"fisc_year\") user- provided variable name data input, function default variable exists user-provided input. func (character) summary function used aggregate data time & hospital. one following: \"mean\" (default) \"median\" \"%\" \"prct\"/\"perc\" (categorical variables), users also need specify plot_cat specify category plot percentage (see ) \"n\" \"count\" plot count rows per hospital/time period \"missing\" \"na\" plot_cat Required func = \"%\" /plotting categorical/factor variables. Users need specify level categorical variables plotted. example, plot percentage female encounters, plot_cat = \"F\". Multiple categories can provided vector, e.g., plot non-male encounters: plot_cat = c(\"F\", \"O\"). plot_cat specified, function sort unique entries specified plot_var plot percentage rows matching highest value (e.g., logical variables, % TRUE plotted default). plot_cat can also used numeric variables, e.g., plot_cat = 0 plot encounters Charlson Comorbidity Index = 0. show_overall (logical) Flag indicating whether plot thick line representing overall value across hospitals. smooth_method (character) Character specifying smoothing method apply (). default, set NULL (.e., smoothing applied). users specify method (e.g., smooth_method = \"glm\"), individual data points shown dots smoothed time trend shown line. line_width (numeric) Width individual lines. Summary line 2 * line_width. ylimits (numeric) Numeric vector specifying limits y-axis e.g. c(0, 100). specify lower/upper limit, use NA (e.g., c(NA, 100) fix upper limit ). min_n (numeric) Minimum number data points required hospital * time point combination. Data points cell count < min_n suppressed. colors (character) Character vector specifying line color(s). base_size (numeric) Numeric input determine base font size subplot pts (default = 12) return_data (logical) Flag indicating whether return list 2 data.tables aggregated data ([1] hospital [2] overall). FALSE (default), return plot. ... facet_group specified: Additional arguments passed lemon::facet_rep_wrap() (wrapper ggplot2::facet_wrap), e.g., scales = \"fixed\" (default) vs. scales = \"free\", nrow/ncol etc.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/plot_over_time.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot variable over time — plot_over_time","text":"default, returns ggplot figure. return_data = TRUE, returns data.tables containing aggregated data.","code":""},{"path":[]},{"path":"https://gemini-medicine.github.io/Rgemini/reference/plot_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot descriptive summary statistics of multiple variables — plot_summary","title":"Plot descriptive summary statistics of multiple variables — plot_summary","text":"function plots distributions (histograms/barplots) shows basic summary statistics (e.g., median [Q1, Q3], % missing etc.) multiple variables.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/plot_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot descriptive summary statistics of multiple variables — plot_summary","text":"","code":"plot_summary(   data,   plot_vars = NULL,   facet_group = NULL,   show_stats = TRUE,   prct = FALSE,   base_size = NULL,   color = \"lightblue\",   ... )"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/plot_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot descriptive summary statistics of multiple variables — plot_summary","text":"data (data.frame | data.table) Table containing data plotted. plot_vars (character | list) Character vector list variables plotted. plot_vars input provided, function automatically plot variables, ignoring encounter/patient/physician IDs date-time variables. facet_group (character) Name variable used facet variable. works plot_vars specifies 1 variable plotted. Users can create separate subplots per facet_group level, example, plot separate histograms/ barplots hospital (facet_group = \"hospital_num\")/ show_stats (logical) Flag indicating whether show descriptive stats plot. prct (logical) Flag indicating whether y-axis labels show percentage (%). FALSE (default), counts (n) shown. base_size (numeric) Numeric input defining base font size (pts) subplot. default, function automatically determine appropriate size depending number subplots (base_size = 11 single subplot). color (character) Plotting color used \"fill\". Default R's built-\"lightblue\". ... Additional arguments passed ggpubr::ggarrange() allow finer control subplot arrangement (e.g., ncol, nrow, widths, heights, align etc.; see ? ggarrange details).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/plot_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot descriptive summary statistics of multiple variables — plot_summary","text":"(ggplot) ggplot figure subplots showing histograms/ barplots variables specified plot_vars.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/plot_summary.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Plot descriptive summary statistics of multiple variables — plot_summary","text":"plots meant publication-ready figures. Instead, goal function provide quick easy means visually inspect data obtain information distributional properties wide range variables, requiring just single line code.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/plot_summary.html","id":"additional-inputs-when-providing-plot-vars-as-a-list","dir":"Reference","previous_headings":"","what":"Additional inputs when providing plot_vars as a list","title":"Plot descriptive summary statistics of multiple variables — plot_summary","text":"plot_vars provided list, users can specify additional characteristics individual variable, : class (character): variable type, e.g., \"numeric\", \"character\", \"logical\" etc. sort (character): categorical variables, whether sort bars ascending (\"^\") descending (starting \"^d\") frequency binwidth/bins/breaks: numeric/integer variables, specifying histogram bins normal: numeric/integer variables, whether assume normal distribution (show mean [SD] show_stats = TRUE)","code":""},{"path":[]},{"path":"https://gemini-medicine.github.io/Rgemini/reference/plot_summary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot descriptive summary statistics of multiple variables — plot_summary","text":"","code":"# simulate GEMINI data table admdad <- dummy_ipadmdad(   n = 10000,   n_hospitals = 20,   time_period = c(2015, 2022) )  ## Providing plot_vars as a character vector plot_summary(   data = admdad,   plot_vars = c(\"age\", \"gender\", \"discharge_disposition\") ) #> `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. #> `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. #> `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. #> `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.   ## Providing plot_vars as a list input plot_summary(   admdad,   plot_vars = list(     `Discharge disposition` = list(         plot_var = \"discharge_disposition\",         class = \"character\",         sort = \"desc\"     ),     `# Days in ALC` = list(         plot_var = \"number_of_alc_days\",         binwidth = 1,         breaks = seq(0, 7, 1)     )   ) )"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/plot_theme.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot theme for ggplots — plot_theme","title":"Plot theme for ggplots — plot_theme","text":"Common plotting theme can applied ggplot object. theme based ggthemes::theme_foundation(), additional features.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/plot_theme.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot theme for ggplots — plot_theme","text":"","code":"plot_theme(base_size = 12, base_family = \"sans\", show_grid = NULL, ...)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/plot_theme.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot theme for ggplots — plot_theme","text":"base_size (numeric) Numeric input specifying base font size, passed ggthemes::theme_foundation(). base_family (character) Base font family (e.g., \"sans\", \"mono\", \"serif\"). Run windowsFonts() check available options. Input passed ggthemes::theme_foundation(). show_grid (character) Character inputs specifying whether show \"major\" \"minor\" grid lines. Default NULL show grid lines. \"major\" \"minor\" grid lines can plotted providing character vector, .e., show_grid = c(\"major\", \"minor\"). ... Additional arguments passed ggplot2::theme().","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/plot_theme.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot theme for ggplots — plot_theme","text":"ggplot specified theme","code":""},{"path":[]},{"path":"https://gemini-medicine.github.io/Rgemini/reference/readmission.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute readmission and episodes of care. — readmission","title":"Compute readmission and episodes of care. — readmission","text":"readmission.R computes whether patient associated episode care readmitted GEMINI hospital within time window interest. default readmission time window 7 30 days. line CIHI guidelines, readmission calculations based episodes care instead individual encounters order avoid linked transfers counted readmissions (also see documentation episodes_of_care()). Specifically, episode care refers contiguous inpatient hospitalizations medical intensive care service within GEMINI network. Episodes involving inter-facility transfers linked regardless diagnosis. acute care transfer assumed occurred either following criteria met: admission medical intensive care service GEMINI hospital within 7 hours discharge another GEMINI hospital, regardless whether transfer coded admission medical intensive care service GEMINI hospital within 7-12 hours discharge another GEMINI hospital, least 1 hospital coded transfer: Coded transfers based DAD Institution Institution fields episodes care involving acute care transfers, readmissions attributed last hospital patient discharged readmission.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/readmission.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute readmission and episodes of care. — readmission","text":"","code":"readmission(   dbcon,   elective_admit = TRUE,   death = TRUE,   MAID = FALSE,   palliative = FALSE,   chemo = FALSE,   mental = FALSE,   obstetric = FALSE,   signout = FALSE,   restricted_cohort = NULL,   readm_win = c(7, 30) )"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/readmission.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute readmission and episodes of care. — readmission","text":"dbcon (DBIConnection) database connection GEMINI database. elective_admit (logical) TRUE (default), elective episodes care considered true readmissions, therefore removed numerator. Specifically, first encounter (n)th episode care elective (admit_category = 'L'), (n-1)th episode care considered followed readmission (readmit(n-1) = FALSE). death (logical) TRUE (default), episodes care ending -hospital death removed denominator. Specifically, (n)th episode care ended death, impossible patient readmitted, therefore episode care considered readmission calculation (readmit(n) = NA). MAID (logical) TRUE (default): Episodes care involve MAID considered true readmissions, therefore removed numerator. Specifically, encounter (n)th episode care involves MAID, (n-1)th episode care considered followed readmission (readmit(n-1) = FALSE). Note episodes care involving MAID end death, however, removed denominator unless death flag set TRUE well (recommended approach). palliative (logical) TRUE (default): Episodes care involving palliative care excluded numerator denominator. Specifically, episode care palliative care type-M diagnosis considered true readmissions (readmit(n-1) = FALSE). Additionally, similarly death, palliative episodes care followed future readmission therefore excluded denominator (readmit(n) = NA) chemo (logical) TRUE (default): Episodes care involve chemotherapy considered true readmissions, therefore removed numerator. Specifically, encounter (n)th episode care involves chemotherapy, (n-1)th episode care considered followed readmission (readmit(n-1) = FALSE). mental (logical) TRUE (default): Episodes care mental health excluded numerator denominator. Specifically, episodes care fall CIHI's Major Clinical Category (MCC) 17 considered true readmissions therefore removed numerator (readmit(n-1) = FALSE). Additionally, considered acute care therefore included readmission denominator (readmit(n) = NA) obstetric (logical) TRUE (default): Episodes care involve obstetric delivery considered true readmissions, therefore removed numerator. Specifically, encounter (n)th episode care involves obstetric delivery, (n-1)th episode care considered followed readmission (readmit(n-1) = FALSE). signout (logical) TRUE (default), episodes care last encounter self sign-/left medical advice (LAMA) removed denominator. Specifically, (n)th episode care ended self-signout/LAMA, considered readmission calculation (readmit(n) = NA). restricted_cohort (data.frame data.table) User specified cohort restricted subset encounters DRM table \"ipadmdad\" (see GEMINI Data Repository Dictionary). Must contain genc_id identifier. Default Null, loads entire \"ipadmdad\" table user-provided database (recommended approach). readm_win (integer | vector) readmission window(s) interest, days (default: readm_win = c(7,30) calculate 7- & 30-day readmission)","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/readmission.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute readmission and episodes of care. — readmission","text":"function returns data.table containing genc_id, AT_in_occurred, AT_out_occurred, epicare (see episodes_of_care()), readmit7 (default), readmit30 (default). readmit7 readmit30 logical variables indicating whether episode care followed readmission. Note readmissions attributed last encounter episode care. Episodes care last encounter readmitX = NA removed denominator. Note: last encounter episode care transfer-coding (encounter associated transfer exist GEMINI database), episode care excluded readmission denominator (readmit(n) = NA). avoid inaccurate attribution potential readmission hospital associated intermediate (.e., last) encounter episode care.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/readmission.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute readmission and episodes of care. — readmission","text":"function calls episodes_of_care() function link encounters acute care transfers episodes care. conducting readmission calculations using function output, number encounters readmission == TRUE numerator, number eligible episodes care (readmission != NA) denominator. example, 7-day readmission rate can calculated mean(readmit7, na.rm=TRUE), readmit7 variable returned readmission() function. function designed consistent CIHI guidelines readmission calculations. Please carefully review reference applying function research purposes. Users may choose deviate CIHI definition readmission setting CIHI flags (see ) FALSE.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/readmission.html","id":"warning","dir":"Reference","previous_headings":"","what":"Warning","title":"Compute readmission and episodes of care. — readmission","text":"Warnings produced either death elective_admit flags set FALSE, input contains user-specified restricted cohort, 25% episodes care removed denominator due CIHI flags buffer period.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/readmission.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Compute readmission and episodes of care. — readmission","text":"CIHI readmission guidelines","code":""},{"path":[]},{"path":"https://gemini-medicine.github.io/Rgemini/reference/readmission.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute readmission and episodes of care. — readmission","text":"","code":"if (FALSE) { # \\dontrun{ drv <- dbDriver(\"PostgreSQL\") dbcon <- DBI::dbConnect(drv,                         dbname = \"db\",                         host = \"domain_name.ca\",                         port = 1234,                         user = getPass(\"Enter user:\"),                         password = getPass(\"password\"))  ## default readmission calculation (with elective = TRUE & death = TRUE by default) readmission(dbcon)  ## Readmission calculation following CIHI definition readmission(dbcon, elective_admit = TRUE, death = TRUE, MAID = TRUE, palliative = TRUE,                    chemo = TRUE, mental = TRUE, obstetric = TRUE, signout = TRUE)  } # }"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.categorical.html","id":null,"dir":"Reference","previous_headings":"","what":"Render Cell Suppression (Categorical) — render_cell_suppression.categorical","title":"Render Cell Suppression (Categorical) — render_cell_suppression.categorical","text":"custom render table1 categorical variables performs GEMINI \"cell suppression\" variable levels contain fewer 6 observations. total number variable levels fewer 6 observations less 6, cells levels variable must censored (possible indirectly deduce missing counts otherwise).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.categorical.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Render Cell Suppression (Categorical) — render_cell_suppression.categorical","text":"","code":"render_cell_suppression.categorical(x, ...)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.categorical.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Render Cell Suppression (Categorical) — render_cell_suppression.categorical","text":"x (character factor) categorical variable summarize. ... Optionally accept named digits (integer) single_level_binary (logical) argument specifies number digits round percentages . Also accepts additional inputs passed prettyNum() apply additional formatting shown results (e.g., big.mark = \",\").","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.categorical.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Render Cell Suppression (Categorical) — render_cell_suppression.categorical","text":"named (character) Concatenated \"\" shift values one row proper alignment.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.categorical.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Render Cell Suppression (Categorical) — render_cell_suppression.categorical","text":"","code":"x <- factor(c(rep(\"a\", times = nrow(mtcars)), \"b\"), levels = c(\"a\", \"b\")) render_cell_suppression.categorical(x) #>                             a              b  #>             \"\" \"(suppressed)\" \"(suppressed)\"   x2 <- factor(c(rep(\"a\", times = nrow(mtcars))), levels = c(\"a\", \"b\")) render_cell_suppression.categorical(x2) #>                           a             b  #>            \"\" \"32 (100.0%)\"    \"0 (0.0%)\"   y <- factor(   c(rep(\"a\", times = nrow(mtcars)), \"b\", \"c\", \"d\", \"e\", \"f\", \"g\"),   levels = c(\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\") ) render_cell_suppression.categorical(y) #>                                                     a  #>                         \"\"               \"32 (84.2%)\"  #>                          b                          c  #> \"&lt; 6 obs. (suppressed)\" \"&lt; 6 obs. (suppressed)\"  #>                          d                          e  #> \"&lt; 6 obs. (suppressed)\" \"&lt; 6 obs. (suppressed)\"  #>                          f                          g  #> \"&lt; 6 obs. (suppressed)\" \"&lt; 6 obs. (suppressed)\"   z <- factor(   c(     rep(\"a\", times = 100),     rep(\"b\", times = 50),     rep(\"c\", times = 7),     rep(\"d\", times = 2)   ),   levels = c(\"a\", \"b\", \"c\", \"d\", \"e\") )  render_cell_suppression.categorical(z) #>                             a              b              c              d  #>             \"\"  \"100 (62.9%)\"   \"50 (31.4%)\" \"(suppressed)\" \"(suppressed)\"  #>              e  #>     \"0 (0.0%)\""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.continuous.html","id":null,"dir":"Reference","previous_headings":"","what":"Render Cell Suppression (Continuous) — render_cell_suppression.continuous","title":"Render Cell Suppression (Continuous) — render_cell_suppression.continuous","text":"custom renderer table1 continuous variables performs GEMINI \"cell suppression\" variable levels contain fewer 6 observations.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.continuous.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Render Cell Suppression (Continuous) — render_cell_suppression.continuous","text":"","code":"render_cell_suppression.continuous(x, ...)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.continuous.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Render Cell Suppression (Continuous) — render_cell_suppression.continuous","text":"x (numeric) continuous variable summarize. ... arguments, continuous_fn, passed table1:::stats.apply.rounding(). Use continuous_fn specify summary statistics display, accepts character string: \"mean\", \"median\", c(\"mean\", \"median\") display . Defaults \"mean\".","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.continuous.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Render Cell Suppression (Continuous) — render_cell_suppression.continuous","text":"named (character) Concatenated \"\" shift values one row proper alignment.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.continuous.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Render Cell Suppression (Continuous) — render_cell_suppression.continuous","text":"","code":"x <- 1:6 render_cell_suppression.continuous(x) #>                                         Mean (SD)  #>                       \"\" \"3.500 (&plusmn; 1.871)\"   y <- 1:2 render_cell_suppression.continuous(y) #>                                             Mean (SD)  #>                         \"\" \"&lt; 6 obs. (suppressed)\"   ## Use in `table1`: if (FALSE) { # \\dontrun{ library(table1) dat <- expand.grid(id=1:10, treat=c(\"Treated\", \"Placebo\")) dat$age <- runif(nrow(dat), 10, 50) label(dat$age) <- \"Age\"  table1(~ age | treat, data=dat,        render.continuous = render_cell_suppression.continuous,        continuous_fn = c(\"mean\", \"median\"), # to display mean and median simultaneously        digits=2) } # }"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.default.html","id":null,"dir":"Reference","previous_headings":"","what":"Render Cell Suppression (Default) — render_cell_suppression.default","title":"Render Cell Suppression (Default) — render_cell_suppression.default","text":"wrapper around render functions type variable.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.default.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Render Cell Suppression (Default) — render_cell_suppression.default","text":"","code":"render_cell_suppression.default(   x,   name,   missing = any(is.na(x)),   transpose = FALSE,   render.empty = \"NA\",   render.continuous = render_cell_suppression.continuous,   render.categorical = render_cell_suppression.categorical,   render.missing = render_cell_suppression.missing,   ... )"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.default.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Render Cell Suppression (Default) — render_cell_suppression.default","text":"x (vector) vector numeric, factor, character logical values. name (character) Name variable rendered (ignored). missing (logical) missing values included? transpose (logical) Logical indicating whether table transposed. render.empty (character) character return x empty. render.continuous (function) function render continuous (.e. numeric) values. Can also character string, case passed table1:::parse.abbrev.render.code(). render.categorical (function) function render categorical (.e. factor, character logical) values. Can also character string, case passed table1:::parse.abbrev.render.code(). render.missing (function) function render missing (.e. NA) values. Can also character string, case passed table1:::parse.abbrev.render.code(). Set NULL ignore missing values. ... arguments, passed table1:::stats.apply.rounding() prettyNum() additional formatting (e.g., big.mark = \",\").","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.default.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Render Cell Suppression (Default) — render_cell_suppression.default","text":"(character) Summary variable character vector cell suppression applied.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.discrete.html","id":null,"dir":"Reference","previous_headings":"","what":"Render Cell Suppression (Discrete) — render_cell_suppression.discrete","title":"Render Cell Suppression (Discrete) — render_cell_suppression.discrete","text":"custom render table1 discrete variables performs GEMINI \"cell suppression\" variable levels contain fewer 6 observations. useful indicator variable example, like count total number events. [table1::render.default.categorical()] break indicator variable components first (0 1) give individual counts. simply count 1s (example).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.discrete.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Render Cell Suppression (Discrete) — render_cell_suppression.discrete","text":"","code":"render_cell_suppression.discrete(x)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.discrete.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Render Cell Suppression (Discrete) — render_cell_suppression.discrete","text":"x (character factor) discrete variable summarize.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.discrete.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Render Cell Suppression (Discrete) — render_cell_suppression.discrete","text":"named (character) Concatenated \"\" shift values one row proper alignment.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.discrete.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Render Cell Suppression (Discrete) — render_cell_suppression.discrete","text":"","code":"x <- 1:6 render_cell_suppression.discrete(x) #>       Sum  #>   \"\" \"21\"   y <- 1:2 render_cell_suppression.discrete(y) #>                                                   Sum  #>                         \"\" \"&lt; 6 obs. (suppressed)\""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.missing.html","id":null,"dir":"Reference","previous_headings":"","what":"Render Cell Suppression (Missing) — render_cell_suppression.missing","title":"Render Cell Suppression (Missing) — render_cell_suppression.missing","text":"custom render table1 missing variables performs GEMINI \"cell suppression\" variable levels contain fewer 6 observations. useful indicator variable example, like count total number events. [table1::render.default.categorical()] break indicator variable components first (0 1) give individual counts. simply count 1s (example).","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.missing.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Render Cell Suppression (Missing) — render_cell_suppression.missing","text":"","code":"render_cell_suppression.missing(x, ...)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.missing.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Render Cell Suppression (Missing) — render_cell_suppression.missing","text":"x (character factor) variable missing values summarize. ... arguments, passed table1:::stats.apply.rounding() prettyNum() additional formatting (e.g., big.mark = \",\").","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.missing.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Render Cell Suppression (Missing) — render_cell_suppression.missing","text":"named (character) Concatenated \"\" shift values one row proper alignment.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.missing.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Render Cell Suppression (Missing) — render_cell_suppression.missing","text":"","code":"x <- factor(sample(0:1, 99, replace = TRUE), labels = c(\"Female\", \"Male\")) x[1:3] <- NA render_cell_suppression.missing(x) #>                                               Missing  #>                         \"\" \"&lt; 6 obs. (suppressed)\"   x[5:10] <- NA render_cell_suppression.missing(x) #>    Missing  #> \"9 (9.1%)\""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.strat.html","id":null,"dir":"Reference","previous_headings":"","what":"Render Cell Suppression (Strata) — render_cell_suppression.strat","title":"Render Cell Suppression (Strata) — render_cell_suppression.strat","text":"custom render table1 stratification variables performs GEMINI \"cell suppression\" levels contain fewer 6 observations. Note even strata variable cell suppression, possible reverse-calculate total given overall column. Therefore recommended also hide \"Overall\" column call table1::table1().","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.strat.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Render Cell Suppression (Strata) — render_cell_suppression.strat","text":"","code":"render_cell_suppression.strat(label, n, transpose = FALSE)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.strat.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Render Cell Suppression (Strata) — render_cell_suppression.strat","text":"label (character) character vector containing labels. n (numeric character) numeric vector containing sizes. transpose (logical) Used internally table1::table1().","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.strat.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Render Cell Suppression (Strata) — render_cell_suppression.strat","text":"named (character) Concatenated \"\" shift values one row proper alignment.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_cell_suppression.strat.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Render Cell Suppression (Strata) — render_cell_suppression.strat","text":"Arguments function passed directly defined work internally table1::table1().","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_default.discrete.html","id":null,"dir":"Reference","previous_headings":"","what":"Render Default (Discrete) — render_default.discrete","title":"Render Default (Discrete) — render_default.discrete","text":"default render discrete variables table1 package. generate sum level variable.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_default.discrete.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Render Default (Discrete) — render_default.discrete","text":"","code":"render_default.discrete(x, ...)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_default.discrete.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Render Default (Discrete) — render_default.discrete","text":"x (character factor) discrete variable summarize. ... arguments, passed prettyNum() additional formatting (e.g., big.mark = \",\").","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_default.discrete.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Render Default (Discrete) — render_default.discrete","text":"named (character) Concatenated \"\" shift values one row proper alignment.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_default.discrete.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Render Default (Discrete) — render_default.discrete","text":"","code":"render_default.discrete(mtcars$vs) #>       Sum  #>   \"\" \"14\""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_mean.continuous.html","id":null,"dir":"Reference","previous_headings":"","what":"Render Mean (Continuous) — render_mean.continuous","title":"Render Mean (Continuous) — render_mean.continuous","text":"default renderer continuous variables table1 package. generate formatted mean standard deviation level variable.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_mean.continuous.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Render Mean (Continuous) — render_mean.continuous","text":"","code":"render_mean.continuous(x, ...)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_mean.continuous.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Render Mean (Continuous) — render_mean.continuous","text":"x (character factor) continuous variable summarize. ... arguments, passed table1:::stats.apply.rounding().","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_mean.continuous.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Render Mean (Continuous) — render_mean.continuous","text":"named (character) Concatenated \"\" shift values one row proper alignment.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_mean.continuous.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Render Mean (Continuous) — render_mean.continuous","text":"","code":"render_mean.continuous(mtcars$disp) #>                                                 Mean (SD)  #>                           \"\" \"230.722 (&plusmn; 123.939)\""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_median.continuous.html","id":null,"dir":"Reference","previous_headings":"","what":"Render Median (Continuous) — render_median.continuous","title":"Render Median (Continuous) — render_median.continuous","text":"default renderer continuous variables table1 package. generate formatted median first third quartiles level variable.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_median.continuous.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Render Median (Continuous) — render_median.continuous","text":"","code":"render_median.continuous(x, ...)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_median.continuous.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Render Median (Continuous) — render_median.continuous","text":"x (character factor) continuous variable summarize. ... arguments, passed table1:::stats.apply.rounding().","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_median.continuous.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Render Median (Continuous) — render_median.continuous","text":"named (character) Concatenated \"\" shift values one row proper alignment.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_median.continuous.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Render Median (Continuous) — render_median.continuous","text":"","code":"render_median.continuous(mtcars$disp) #>                                           Median [Q1, Q3]  #>                           \"\" \"196.300 [120.825, 326.000]\""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_strict_cell_suppression.categorical.html","id":null,"dir":"Reference","previous_headings":"","what":"Render Strict Cell Suppression (Categorical) — render_strict_cell_suppression.categorical","title":"Render Strict Cell Suppression (Categorical) — render_strict_cell_suppression.categorical","text":"Strictly suppress counts less 6 message. differs conservative logic render_cell_suppression.categorical().","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_strict_cell_suppression.categorical.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Render Strict Cell Suppression (Categorical) — render_strict_cell_suppression.categorical","text":"","code":"render_strict_cell_suppression.categorical(x, ...)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_strict_cell_suppression.categorical.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Render Strict Cell Suppression (Categorical) — render_strict_cell_suppression.categorical","text":"x (character factor) categorical variable summarize. ... Optionally accept named digits (integer) single_level_binary (logical) argument specifies number digits round percentages . Also accepts additional inputs passed prettyNum() apply additional formatting shown results (e.g., big.mark = \",\").","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_strict_cell_suppression.categorical.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Render Strict Cell Suppression (Categorical) — render_strict_cell_suppression.categorical","text":"named (character) Concatenated \"\" shift values one row proper alignment.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/render_strict_cell_suppression.categorical.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Render Strict Cell Suppression (Categorical) — render_strict_cell_suppression.categorical","text":"","code":"x <- factor(c(rep(\"a\", times = nrow(mtcars)), \"b\"), levels = c(\"a\", \"b\")) render_strict_cell_suppression.categorical(x) #>                                                     a  #>                         \"\"               \"32 (97.0%)\"  #>                          b  #> \"&lt; 6 obs. (suppressed)\"   x2 <- factor(c(rep(\"a\", times = nrow(mtcars))), levels = c(\"a\", \"b\")) render_strict_cell_suppression.categorical(x2) #>                           a             b  #>            \"\" \"32 (100.0%)\"    \"0 (0.0%)\"   y <- factor(   c(rep(\"a\", times = nrow(mtcars)), \"b\", \"c\", \"d\", \"e\", \"f\", \"g\"),   levels = c(\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\") ) render_strict_cell_suppression.categorical(y) #>                                                     a  #>                         \"\"               \"32 (84.2%)\"  #>                          b                          c  #> \"&lt; 6 obs. (suppressed)\" \"&lt; 6 obs. (suppressed)\"  #>                          d                          e  #> \"&lt; 6 obs. (suppressed)\" \"&lt; 6 obs. (suppressed)\"  #>                          f                          g  #> \"&lt; 6 obs. (suppressed)\" \"&lt; 6 obs. (suppressed)\"   z <- factor(   c(     rep(\"a\", times = 100),     rep(\"b\", times = 50),     rep(\"c\", times = 7),     rep(\"d\", times = 2)   ),   levels = c(\"a\", \"b\", \"c\", \"d\", \"e\") )  render_strict_cell_suppression.categorical(z) #>                                                     a  #>                         \"\"              \"100 (62.9%)\"  #>                          b                          c  #>               \"50 (31.4%)\"                 \"7 (4.4%)\"  #>                          d                          e  #> \"&lt; 6 obs. (suppressed)\"                 \"0 (0.0%)\""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/return_hospital_field.html","id":null,"dir":"Reference","previous_headings":"","what":"Return Hospital Field — return_hospital_field","title":"Return Hospital Field — return_hospital_field","text":"accommodate differences column names databases, find name column corresponding hospital downstream queries.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/return_hospital_field.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Return Hospital Field — return_hospital_field","text":"","code":"return_hospital_field(db)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/return_hospital_field.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Return Hospital Field — return_hospital_field","text":"db (DBIConnection) RPostgres DB connection.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/return_hospital_field.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Return Hospital Field — return_hospital_field","text":"(character)hospital_id hospital_num, preference given hospital_id exists.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/sample_icd.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate ICD-10 Diagnosis Codes — sample_icd","title":"Simulate ICD-10 Diagnosis Codes — sample_icd","text":"function simulates ICD-10 diagnosis codes random user specified pattern.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/sample_icd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate ICD-10 Diagnosis Codes — sample_icd","text":"","code":"sample_icd(n = 1, source = \"comorbidity\", dbcon = NULL, pattern = NULL)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/sample_icd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate ICD-10 Diagnosis Codes — sample_icd","text":"n (integer) Number ICD codes simulate. source (string) source ICD coding sample . Default \"comorbidity\" 2011 version ICD-10 codes implemented R comorbidity package. source icd_lookup, ICD-10-CA codes sampled lookup_icd10_ca_description table GEMINI database, see details GEMINI Data Repository Dictionary. dbcon (DBIConnection) database connection GEMINI database. Required source icd_lookup. pattern (string) valid regex expression specifies desired pattern returned ICD codes matched .","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/sample_icd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate ICD-10 Diagnosis Codes — sample_icd","text":"(vector) vector ICD diagnostic codes.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/sample_icd.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulate ICD-10 Diagnosis Codes — sample_icd","text":"","code":"### Simulate 100 ICD-10 codes based on the 2011 version. if (FALSE) { # \\dontrun{ sample_icd(100, source = \"comorbidity\") } # }  ### Simulate 100 ICD-10 codes starting with \"C2\" or \"E10\" based on the 2011 version. if (FALSE) { # \\dontrun{ sample_icd(100, source = \"comorbidity\", pattern = \"^C2|^E10\") } # }  ### Simulate 50 ICD-10-CA codes based on codes found in the `lookup_icd10_ca_description` table if (FALSE) { # \\dontrun{ drv <- dbDriver(\"PostgreSQL\") dbcon <- DBI::dbConnect(drv,   dbname = \"db\",   host = \"domain_name.ca\",   port = 1234,   user = getPass(\"Enter user:\"),   password = getPass(\"password\") ) sample_icd(50, source = \"icd_lookup\", dbcon = dbcon) } # }"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/scale_color_gemini.html","id":null,"dir":"Reference","previous_headings":"","what":"Wrapper function for ggplot2::scale_color_manual() that applies GEMINI color palettes to ggplot objects. — scale_color_gemini","title":"Wrapper function for ggplot2::scale_color_manual() that applies GEMINI color palettes to ggplot objects. — scale_color_gemini","text":"Wrapper function ggplot2::scale_color_manual() applies GEMINI color palettes ggplot objects.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/scale_color_gemini.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Wrapper function for ggplot2::scale_color_manual() that applies GEMINI color palettes to ggplot objects. — scale_color_gemini","text":"","code":"scale_color_gemini(palette = 1)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/scale_color_gemini.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Wrapper function for ggplot2::scale_color_manual() that applies GEMINI color palettes to ggplot objects. — scale_color_gemini","text":"palette (character numeric) Name index color palette. Run plot_color_palettes() see options. default, first palette (\"GEMINI Rainbow\") returned.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/scale_fill_gemini.html","id":null,"dir":"Reference","previous_headings":"","what":"Wrapper function for ggplot2::scale_fill_manual() that applies GEMINI color palettes to ggplot objects. — scale_fill_gemini","title":"Wrapper function for ggplot2::scale_fill_manual() that applies GEMINI color palettes to ggplot objects. — scale_fill_gemini","text":"Wrapper function ggplot2::scale_fill_manual() applies GEMINI color palettes ggplot objects.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/scale_fill_gemini.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Wrapper function for ggplot2::scale_fill_manual() that applies GEMINI color palettes to ggplot objects. — scale_fill_gemini","text":"","code":"scale_fill_gemini(palette = 1)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/scale_fill_gemini.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Wrapper function for ggplot2::scale_fill_manual() that applies GEMINI color palettes to ggplot objects. — scale_fill_gemini","text":"palette (character numeric) Name index color palette. Run plot_color_palettes() see options. default, first palette (\"GEMINI Rainbow\") returned.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/season.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Season — season","title":"Get Season — season","text":"Given date, return named season.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/season.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Season — season","text":"","code":"season(date)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/season.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Season — season","text":"date (Date)","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/season.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Season — season","text":"(character) One \"Spring\", \"Summer\", \"Fall\", \"Winter\".","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/season.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Season — season","text":"","code":"season(as.Date(Sys.Date())) #> [1] \"Winter\""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/stat_holidays_ON.html","id":null,"dir":"Reference","previous_headings":"","what":"Flag statutory holidays in Ontario — stat_holidays_ON","title":"Flag statutory holidays in Ontario — stat_holidays_ON","text":"function merges given table containing dates interest holiday table flag dates holidays/observed holidays.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/stat_holidays_ON.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Flag statutory holidays in Ontario — stat_holidays_ON","text":"","code":"stat_holidays_ON(data, date_column, include_observed_holidays = TRUE)"},{"path":"https://gemini-medicine.github.io/Rgemini/reference/stat_holidays_ON.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Flag statutory holidays in Ontario — stat_holidays_ON","text":"data (data.frame data.table) Table containing date_column can converted YYYY-MM-DD format date_column (character) Name column data corresponding relevant dates; merged holiday table. include_observed_holidays (logical) TRUE, observed holidays included output.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/stat_holidays_ON.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Flag statutory holidays in Ontario — stat_holidays_ON","text":"function returns provided input table data following additional columns: date: date_column YYY-MM-DD format holiday: flag indicating whether date corresponds holiday holiday_weekday: day week holiday occurred holiday_name: name holiday occurring given date include_observed_holidays == TRUE, 3 additional columns returned observed_holiday = TRUE dates holiday observed (whether corresponds actual date holiday). Additionally, corresponding weekday holiday name observed holidays returned separate columns.","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/reference/stat_holidays_ON.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Flag statutory holidays in Ontario — stat_holidays_ON","text":"","code":"if (FALSE) { # \\dontrun{ drv <- dbDriver(\"PostgreSQL\") dbcon <- DBI::dbConnect(drv,                         dbname = \"db\",                         host = \"domain_name.ca\",                         port = 1234,                         user = getPass(\"Enter user:\"),                         password = getPass(\"password\"))  # derive which encounters were discharged on a holiday ipadm <- dbGetQuery(db, \"SELECT discharge_date_time FROM admdad;\") holidays <- stat_holidays_ON(ipadm, \"discharge_date_time\") } # }"},{"path":"https://gemini-medicine.github.io/Rgemini/news/index.html","id":"rgemini-102","dir":"Changelog","previous_headings":"","what":"Rgemini 1.0.2","title":"Rgemini 1.0.2","text":"Small bug fix find_db_tablename() materialized views (H4H >= v4)","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/news/index.html","id":"rgemini-101","dir":"Changelog","previous_headings":"","what":"Rgemini 1.0.1","title":"Rgemini 1.0.1","text":"Enhanced find_db_tablename() work materialized views (H4H >= v4)","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/news/index.html","id":"rgemini-100","dir":"Changelog","previous_headings":"","what":"Rgemini 1.0.0","title":"Rgemini 1.0.0","text":"New function homelessness() derive encounter-level homelessness flag based ICD-10-CA diagnosis codes Enhanced cell_suppression.R renderers table1 support simultaneous display mean median Small fix episodes_of_care() compatibility future DB versions due change lookup_transfer table Tested GEMINI Data Repository v3","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/news/index.html","id":"rgemini-051","dir":"Changelog","previous_headings":"","what":"Rgemini 0.5.1","title":"Rgemini 0.5.1","text":"Improved query efficiency mlaps() functions clinical derived variables Removed duplicated code icu_entry()","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/news/index.html","id":"rgemini-050","dir":"Changelog","previous_headings":"","what":"Rgemini 0.5.0","title":"Rgemini 0.5.0","text":"New functions: Plotting functions & vignette data exploration: plot_summary() plot_over_time() Plotting functions & vignette plot aesthetics: plot_theme() gemini_colors() hospitalizations_last_n_days() calculate number previous hospitalizations given window convert_dt() handle date-time variables show missing/invalid entries Function enhancements: n_imaging, n_routine_bloodwork() n_rbc_transfusion() refactored updated able exclude clinical records ED Inclusion routine blood tests (regardless result value) n_routine_bloodwork() Option derive ICU entries clinical outcome customizable time windows icu_entry() functions date-time inputs: Allow character POSIXct inputs Improved efficiency mlaps() hospital query Minor bug fixes & updated unit tests: frailty_score(): Return frailty score 0 daily_census(): Limit time period discharge date disability(): return encounters cohort input Table 1 render functions: Enable prettyNum formatting Rgemini:::check_input(): Return error odbc connections Small documentation updates & clean-pkdgown reference file","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/news/index.html","id":"rgemini-042","dir":"Changelog","previous_headings":"","what":"Rgemini 0.4.2","title":"Rgemini 0.4.2","text":"Small bug fix Rgemini:::find_db_tablename()","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/news/index.html","id":"rgemini-041","dir":"Changelog","previous_headings":"","what":"Rgemini 0.4.1","title":"Rgemini 0.4.1","text":"Small bug fix Rgemini:::check_input()","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/news/index.html","id":"rgemini-040","dir":"Changelog","previous_headings":"","what":"Rgemini 0.4.0","title":"Rgemini 0.4.0","text":"Adds n_missing() function check number missingness Switch function frailty_score() calculate CIHI Hospital Frailty Risk Score encounter Deprecates function frailty_score() calculates UK Hospital Frailty Risk Score New utility function checking user inputs Adds core mlaps() function wrapper function run multiple sites years Adds er_los() function calculate emergency room length--stay New function dummy_ipadmdad() simulate “ipadmdad” data random hospital-level intercepts Enhanced daily_census() function allow exclusion days 0 counts Additional input argument covid_flag() inclusion ER diagnoses New function disability() derives disability flag encounter Adds function calculate Elixhauser comorbidity scores elixhauser_comorbidity_index() Adds utility function generate warning mapped values Standardizes citation format function references section","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/news/index.html","id":"rgemini-031","dir":"Changelog","previous_headings":"","what":"Rgemini 0.3.1","title":"Rgemini 0.3.1","text":"Allows user specify number digits round percentages cell suppression categorical variables, without forcing rounding integer Allows user render one level binary variables table1 Fixes singularity due missing levels table1 Fixes find_db_tablename() readmission() DBs foreign data wrappers","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/news/index.html","id":"rgemini-030","dir":"Changelog","previous_headings":"","what":"Rgemini 0.3.0","title":"Rgemini 0.3.0","text":"Exports n_rbc_transfusion() function Adds installation instructions GEMINI HPC Tested GEMINI Data Repository v2.1.2","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/news/index.html","id":"rgemini-020","dir":"Changelog","previous_headings":"","what":"Rgemini 0.2.0","title":"Rgemini 0.2.0","text":"Small bug fixes n_imaging() n_rbc_transfusion() Standardized argument names DB cohort inputs Standardized function names count functions Improved documentation","code":""},{"path":"https://gemini-medicine.github.io/Rgemini/news/index.html","id":"rgemini-010","dir":"Changelog","previous_headings":"","what":"Rgemini 0.1.0","title":"Rgemini 0.1.0","text":"initial release Rgemini, includes variety functions data analysis GEMINI dataset","code":""}]
