<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="covid_flag returns COVID-19 diagnoses status
for hospital admissions based on ICD-10-CA
Return a dataframe with two separate flags identifying
encounters with confirmed and suspected COVID-19 diagnoses
using ICD-10-CA U071 and U072 respectively
A confirmed COVID-19 diagnosis (U071) is coded when
there is a positive COVID-19 test regardless of the the test type.
A suspected COVID-19 diagnosis (U072) is coded when an
encounter is clinically or epidemiological diagnosed
but the associated COVID-19 tests are inconclusive,
not available, or not performed."><title>COVID Flag — covid_flag • Rgemini</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="COVID Flag — covid_flag"><meta property="og:description" content="covid_flag returns COVID-19 diagnoses status
for hospital admissions based on ICD-10-CA
Return a dataframe with two separate flags identifying
encounters with confirmed and suspected COVID-19 diagnoses
using ICD-10-CA U071 and U072 respectively
A confirmed COVID-19 diagnosis (U071) is coded when
there is a positive COVID-19 test regardless of the the test type.
A suspected COVID-19 diagnosis (U072) is coded when an
encounter is clinically or epidemiological diagnosed
but the associated COVID-19 tests are inconclusive,
not available, or not performed."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Rgemini</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/cell_suppression_and_table1.html">Cell Suppression and Table 1</a>
    <a class="dropdown-item" href="../articles/daily_census.html">Daily Census</a>
    <a class="dropdown-item" href="../articles/epicare_and_readmission.html">Episodes of care and Readmission</a>
    <a class="dropdown-item" href="../articles/icd_to_ccsr.html">ICD to CCSR</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>COVID Flag</h1>
      
      <div class="d-none name"><code>covid_flag.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>covid_flag</code> returns COVID-19 diagnoses status
for hospital admissions based on ICD-10-CA</p>
<p>Return a dataframe with two separate flags identifying
encounters with confirmed and suspected COVID-19 diagnoses
using ICD-10-CA U071 and U072 respectively</p>
<p>A confirmed COVID-19 diagnosis (U071) is coded when
there is a positive COVID-19 test regardless of the the test type.</p>
<p>A suspected COVID-19 diagnosis (U072) is coded when an
encounter is clinically or epidemiological diagnosed
but the associated COVID-19 tests are inconclusive,
not available, or not performed.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">covid_flag</span><span class="op">(</span><span class="va">cohort</span>, <span class="va">diagnosis</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>cohort</dt>
<dd><p>(<code>data.frame</code> or <code>data.table</code>)
Cohort table with all relevant encounters of interest, where each row
corresponds to a single encounter. Must contain GEMINI Encounter ID
(<code>genc_id</code>).</p></dd>


<dt>diagnosis</dt>
<dd><p>(<code>data.frame</code> or <code>data.table</code>)
A table equivalent to DRM table "ipdiagnosis".
Must contain two fields: <code>genc_id</code> and <code>diagnosis_code</code> (as ICD-10-CA). The
function handles long format table only. Diagnosis codes must be free from
any special characters.
If user wishes to use DRM table "erdiagnosis" instead or in combination with
"ipdiagnosis", be sure to rename field <code>er_diagnosis_code</code> to
<code>diagnosis_code</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>data.table with the same number of rows as input "cohort" with additional
derived boolean fields labelled as "covid_icd_confirmed_flag"
and "covid_icd_suspected_flag". Possible values are TRUE, FALSE or NA.
NA indicates that an encounter does not have a diagnosis code
in diagnosis table.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function takes a list of admissions and the list of ICD-10-CA
to generate boolean fields indicating whether
each admission had confirmed or suspected COVID-19 diagnoses.</p>
<p>Function can take any data frame object but coerced into data.table
with ICD-10-CA but these flags were meant to be calculated based on
in-patient diagnoses (ED diagnoses have lower sensitivity/specificity
for certain conditions).
Function does not differentiate between diagnosis type.</p>
<p>Below is the current ICD-10-CA codings related to COVID-19.
For more details, please refer to the references in this page.</p>
<ul><li><p>U07.1 : For confirmed cases of COVID-19, assign U07.1
Emergency use of U07.1 (COVID-19, virus identified)</p></li>
<li><p>U07.2 : For suspected cases of COVID-19, assign U07.2
Emergency use of U07.2 (COVID-19, virus not identified)</p></li>
<li><p>U07.3 : Multisystem inflammatory syndrome associated
with COVID-19</p></li>
<li><p>U07.4 : post COVID-19 condition</p></li>
<li><p>U07.5 : personal history of COVID-19</p></li>
<li><p>U07.6 : Need for immunization against COVID-19.
This code is for use when a person encounters health services
for the sole purpose of receiving the COVID-19 vaccine.</p></li>
<li><p>U07.7 : COVID-19 vaccines causing adverse effect in therapeutic use.
This emergency use code is an external cause code.
This code would normally be located at the ICD-10-CA block Y40-Y59 Drugs,
medicaments and biological substances causing
adverse effects in therapeutic use.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="warning">Warning<a class="anchor" aria-label="anchor" href="#warning"></a></h2>
    

<p>Function returns data.table with <code>genc_id</code> field and two boolen fields. NA
value in the output indicates that the encounter did not have any entry in
the diagnosis table.
When one tries to left-join the output of this function with another table
(another list of admissions in the left),
make sure list of admissions (or patient) aligns in both tables.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>https://www.cihi.ca/en/covid-19-resources/covid-19-data-collection-and-coding-direction</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">drv</span> <span class="op">&lt;-</span> <span class="fu">dbDriver</span><span class="op">(</span><span class="st">"PostgreSQL"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dbcon</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="va">drv</span>,</span></span>
<span class="r-in"><span>                        dbname <span class="op">=</span> <span class="st">"db"</span>,</span></span>
<span class="r-in"><span>                        host <span class="op">=</span> <span class="st">"172.XX.XX.XXX"</span>,</span></span>
<span class="r-in"><span>                        port <span class="op">=</span> <span class="fl">1234</span>,</span></span>
<span class="r-in"><span>                        user <span class="op">=</span> <span class="fu">getPass</span><span class="op">(</span><span class="st">"Enter user:"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        password <span class="op">=</span> <span class="fu">getPass</span><span class="op">(</span><span class="st">"password"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ipadm</span> <span class="op">&lt;-</span> <span class="fu">dbGetQuery</span><span class="op">(</span><span class="va">dbcon</span>, <span class="st">"select * from admdad"</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">data.table</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dx</span> <span class="op">&lt;-</span> <span class="fu">dbGetQuery</span><span class="op">(</span><span class="va">dbcon</span>, <span class="st">"select * from ipdiagnosis"</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">data.table</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="fu">covid_flag</span><span class="op">(</span>cohort <span class="op">=</span> <span class="va">ipadm</span>, diagnosis <span class="op">=</span> <span class="va">dx</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by GEMINIdata.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

