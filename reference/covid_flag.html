<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="covid_flag returns COVID-19 diagnosis status
for each genc_id based on ICD-10-CA diagnosis codes.
Returns a table with two separate flags identifying
encounters with confirmed and suspected COVID-19 diagnoses
using ICD-10-CA U07.1 and U07.2 respectively.
A confirmed COVID-19 diagnosis (U07.1) is coded when
there is a positive COVID-19 test. Effective April 1 2023, U07.1 is coded
when COVID-19 was confirmed by any COVID-19 test, including polymerase chain
reaction (PCR) tests, point-of-care molecular tests (POCT), or rapid antigen
tests (RAT). For data prior to April 1, 2023, U07.1 was only coded when
COVID-19 was confirmed by a PCR lab test (for details, see
CIHI diagnosis type definitions).
A suspected COVID-19 diagnosis (U07.2) is coded when an
encounter is clinically or epidemiological diagnosed
but the associated COVID-19 tests are inconclusive,
not available, or not performed."><title>COVID Flag — covid_flag • Rgemini</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="COVID Flag — covid_flag"><meta property="og:description" content="covid_flag returns COVID-19 diagnosis status
for each genc_id based on ICD-10-CA diagnosis codes.
Returns a table with two separate flags identifying
encounters with confirmed and suspected COVID-19 diagnoses
using ICD-10-CA U07.1 and U07.2 respectively.
A confirmed COVID-19 diagnosis (U07.1) is coded when
there is a positive COVID-19 test. Effective April 1 2023, U07.1 is coded
when COVID-19 was confirmed by any COVID-19 test, including polymerase chain
reaction (PCR) tests, point-of-care molecular tests (POCT), or rapid antigen
tests (RAT). For data prior to April 1, 2023, U07.1 was only coded when
COVID-19 was confirmed by a PCR lab test (for details, see
CIHI diagnosis type definitions).
A suspected COVID-19 diagnosis (U07.2) is coded when an
encounter is clinically or epidemiological diagnosed
but the associated COVID-19 tests are inconclusive,
not available, or not performed."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Rgemini</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/cell_suppression_and_table1.html">Cell Suppression and Table 1</a>
    <a class="dropdown-item" href="../articles/daily_census.html">Daily Census</a>
    <a class="dropdown-item" href="../articles/epicare_and_readmission.html">Episodes of care and Readmission</a>
    <a class="dropdown-item" href="../articles/icd_to_ccsr.html">ICD to CCSR</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>COVID Flag</h1>
      
      <div class="d-none name"><code>covid_flag.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>covid_flag</code> returns COVID-19 diagnosis status
for each <code>genc_id</code> based on ICD-10-CA diagnosis codes.</p>
<p>Returns a table with two separate flags identifying
encounters with confirmed and suspected COVID-19 diagnoses
using ICD-10-CA U07.1 and U07.2 respectively.</p>
<p>A confirmed COVID-19 diagnosis (U07.1) is coded when
there is a positive COVID-19 test. Effective April 1 2023, U07.1 is coded
when COVID-19 was confirmed by any COVID-19 test, including polymerase chain
reaction (PCR) tests, point-of-care molecular tests (POCT), or rapid antigen
tests (RAT). For data prior to April 1, 2023, U07.1 was only coded when
COVID-19 was confirmed by a PCR lab test (for details, see
<a href="https://www.cihi.ca/sites/default/files/document/mapping-covid-19-codes-icd-10-ca-to-base-icd-10-job-aid-en.pdf" class="external-link">CIHI diagnosis type definitions</a>).</p>
<p>A suspected COVID-19 diagnosis (U07.2) is coded when an
encounter is clinically or epidemiological diagnosed
but the associated COVID-19 tests are inconclusive,
not available, or not performed.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">covid_flag</span><span class="op">(</span><span class="va">cohort</span>, <span class="va">ipdiag</span>, <span class="va">erdiag</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>cohort</dt>
<dd><p>(<code>data.frame</code> or <code>data.table</code>)
Cohort table with all relevant encounters of interest, where each row
corresponds to a single encounter. Must contain GEMINI Encounter ID
(<code>genc_id</code>).</p></dd>


<dt>ipdiag</dt>
<dd><p>(<code>data.table</code>)
<code>ipdiagnosis</code> table as defined in the <a href="https://drive.google.com/uc?export=download&amp;id=1iwrTz1YVz4GBPtaaS9tJtU0E9Bx1QSM5" class="external-link">GEMINI Data Repository Dictionary</a>.
This table must contain <code>genc_id</code> and <code>diagnosis_code</code> (as ICD-10-CA
alphanumeric code) in long format.</p></dd>


<dt>erdiag</dt>
<dd><p>(<code>data.table</code>)
<code>erdiagnosis</code> table as defined in the <a href="https://drive.google.com/uc?export=download&amp;id=1iwrTz1YVz4GBPtaaS9tJtU0E9Bx1QSM5" class="external-link">GEMINI Data Repository Dictionary</a>.
This table must contain <code>genc_id</code> and <code>er_diagnosis_code</code> (as ICD-10-CA
alphanumeric code) in long format.
Typically, ER diagnoses should be included when deriving the COVID flags in
order to increase sensitivity. However, in certain scenarios, users may
choose to only include IP diagnoses by specifying <code>erdiag = NULL</code>. This may
be useful when comparing cohorts with different rates of ER admissions.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>data.table with the same number of rows as input <code>cohort</code> with additional
derived boolean fields labelled as <code>"covid_icd_confirmed_flag"</code></p>


<p>and <code>"covid_icd_suspected_flag"</code>. Possible values are <code>TRUE</code>, <code>FALSE</code> or
<code>NA</code>. <code>NA</code> indicates that an encounter does not have a diagnosis code
in the diagnosis table input.</p>


<p>When one tries to left-join the output of this function with another table
(another list of admissions in the left),
make sure list of admissions (or patient) aligns in both tables.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Below is the current ICD-10-CA diagnosis codes related to COVID-19.
For more details, please refer to the references in this page.</p>
<ul><li><p>U07.1 : For confirmed cases of COVID-19, assign U07.1
Emergency use of U07.1 (COVID-19, virus identified)</p></li>
<li><p>U07.2 : For suspected cases of COVID-19, assign U07.2
Emergency use of U07.2 (COVID-19, virus not identified)</p></li>
<li><p>U07.3 : Multisystem inflammatory syndrome associated
with COVID-19</p></li>
<li><p>U07.4 : post COVID-19 condition</p></li>
<li><p>U07.5 : personal history of COVID-19</p></li>
<li><p>U07.6 : Need for immunization against COVID-19.
This code is for use when a person encounters health services
for the sole purpose of receiving the COVID-19 vaccine.</p></li>
<li><p>U07.7 : COVID-19 vaccines causing adverse effect in therapeutic use.
This emergency use code is an external cause code.
This code would normally be located at the ICD-10-CA block Y40-Y59 Drugs,
medicaments and biological substances causing
adverse effects in therapeutic use.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    

<p>This function does not differentiate between diagnosis types. That is, the
COVID flags are derived based on all diagnosis codes that are provided
as input to this function. By default, users should include all diagnosis
types to identify COVID. However, if users wish to include only
certain diagnosis types (e.g., type-M for most responsible discharge
diagnosis), the <code>ipdiag</code> and <code>erdiag</code> input tables should be filtered
accordingly based on <code>diagnosis_type</code> <em>prior to running this function</em> (for
more details, see <a href="https://www.cihi.ca/sites/default/files/document/diagnosis-type-definitions-en.pdf" class="external-link">CIHI diagnosis type definitions</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p><a href="https://www.cihi.ca/en/covid-19-resources/covid-19-data-collection-and-coding-direction" class="external-link">CIHI COVID-19 data collection and coding direction</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">drv</span> <span class="op">&lt;-</span> <span class="fu">dbDriver</span><span class="op">(</span><span class="st">"PostgreSQL"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dbcon</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="va">drv</span>,</span></span>
<span class="r-in"><span>  dbname <span class="op">=</span> <span class="st">"db"</span>,</span></span>
<span class="r-in"><span>  host <span class="op">=</span> <span class="st">"domain_name.ca"</span>,</span></span>
<span class="r-in"><span>  port <span class="op">=</span> <span class="fl">1234</span>,</span></span>
<span class="r-in"><span>  user <span class="op">=</span> <span class="fu">getPass</span><span class="op">(</span><span class="st">"Enter user:"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  password <span class="op">=</span> <span class="fu">getPass</span><span class="op">(</span><span class="st">"password"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ipadm</span> <span class="op">&lt;-</span> <span class="fu">dbGetQuery</span><span class="op">(</span><span class="va">dbcon</span>, <span class="st">"select * from admdad"</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">data.table</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ipdiagnosis</span> <span class="op">&lt;-</span> <span class="fu">dbGetQuery</span><span class="op">(</span><span class="va">dbcon</span>, <span class="st">"select * from ipdiagnosis"</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">data.table</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">erdiagnosis</span> <span class="op">&lt;-</span> <span class="fu">dbGetQuery</span><span class="op">(</span><span class="va">dbcon</span>, <span class="st">"select * from erdiagnosis"</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">data.table</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="fu">covid_flag</span><span class="op">(</span>cohort <span class="op">=</span> <span class="va">ipadm</span>, ipdiag <span class="op">=</span> <span class="va">ipdiagnosis</span>, erdiag <span class="op">=</span> <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by GEMINIdata.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

