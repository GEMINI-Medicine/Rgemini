<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="frailty_score returns the number of frailty conditions for hospital admissions based on the CIHI hospital frailty risk score (HFRS).
By setting component_wise to TRUE, function alternatively returns identified frailty-related diagnosis codes and their corresponding frailty conditions."><title>Compute CIHI Hospital Frailty Risk Score — frailty_score • Rgemini</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute CIHI Hospital Frailty Risk Score — frailty_score"><meta property="og:description" content="frailty_score returns the number of frailty conditions for hospital admissions based on the CIHI hospital frailty risk score (HFRS).
By setting component_wise to TRUE, function alternatively returns identified frailty-related diagnosis codes and their corresponding frailty conditions."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Rgemini</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/cell_suppression_and_table1.html">Cell Suppression and Table 1</a>
    <a class="dropdown-item" href="../articles/daily_census.html">Daily Census</a>
    <a class="dropdown-item" href="../articles/epicare_and_readmission.html">Episodes of care and Readmission</a>
    <a class="dropdown-item" href="../articles/icd_to_ccsr.html">ICD to CCSR</a>
    <a class="dropdown-item" href="../articles/plotting_data_exploration.html">Plotting Functions - Easy Plots for Data Exploration</a>
    <a class="dropdown-item" href="../articles/plotting_theme.html">Plotting Functions - Themes &amp; Colors</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Compute CIHI Hospital Frailty Risk Score</h1>
      
      <div class="d-none name"><code>frailty_score.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>frailty_score</code> returns the number of frailty conditions for hospital admissions based on the CIHI hospital frailty risk score (HFRS).
By setting <code>component_wise</code> to <code>TRUE</code>, function alternatively returns identified frailty-related diagnosis codes and their corresponding frailty conditions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">frailty_score</span><span class="op">(</span><span class="va">cohort</span>, <span class="va">ipdiag</span>, <span class="va">erdiag</span>, component_wise <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>cohort</dt>
<dd><p>(<code>data.table</code>, <code>data.frame</code>)<br>
Cohort table with encounters of interest and their corresponding age.
Each row corresponds to a single encounter.
Must contain GEMINI encounter ID (<code>genc_id</code>), and age of the encounter (<code>age</code>).</p></dd>


<dt>ipdiag</dt>
<dd><p>(<code>data.table</code>, <code>data.frame</code>)<br><code>ipdiagnosis</code> table as defined in the <a href="https://drive.google.com/uc?export=download&amp;id=1iwrTz1YVz4GBPtaaS9tJtU0E9Bx1QSM5" class="external-link">GEMINI Data Repository Dictionary</a>.
This table must contain the <code>genc_id</code> and <code>diagnosis_code</code> fields in long format.
The diagnosis codes must be free from any punctuation or special characters.</p></dd>


<dt>erdiag</dt>
<dd><p>(<code>data.table</code>, <code>data.frame</code>)<br><code>erdiagnosis</code> table as defined in the <a href="https://drive.google.com/uc?export=download&amp;id=1iwrTz1YVz4GBPtaaS9tJtU0E9Bx1QSM5" class="external-link">GEMINI Data Repository Dictionary</a>.
This table must contain the <code>genc_id</code> and <code>er_diagnosis_code</code> fields in long format.
The diagnosis codes must be free from punctuation or special characters.</p></dd>


<dt>component_wise</dt>
<dd><p>(<code>logical</code>)<br>
Default is FALSE. When TRUE, the function does not aggregate the score and instead outputs a table in long format that
shows the frailty conditions contributed to the score for each encounter.
Encounters with no frailty conditions found (frailty_score_derived=0) are excluded.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>(<code>data.frame</code>)<br></p>


<p>If <code>component_wise == FALSE</code>:
<code>genc_id</code> (<code>numeric</code>),<br></p>


<p><code>frailty_score_derived</code> (<code>numeric</code>) total number of frailty conditions for the encounter.</p>


<p>If <code>component_wise == TRUE</code>:
<code>genc_id</code> (<code>numeric</code>),<br></p>


<p><code>diagnosis_code</code> (<code>character</code>),<br> ICD-10-CA diagnosis codes associated with the encounter
<code>frailty_categories</code> (<code>character</code>)<br> frailty category of the ICD-10-CA code mapped to</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The CIHI HFRS is a contextual measure of frailty for patients aged 65 years and older.
It categorizes a list of ICD-10-CA diagnosis codes into 36 distinct frailty-related conditions.
The level of frailty is determined as the cumulative number of distinct frailty conditions (an equal-weight algorithm) present in an individual.
ALL diagnoses are included to the calculation (i.e. all emergency department (ER) and in-patient (IP) diagnoses, all diagnosis types).
When none of the frailty conditions is present in an individual, a score of zero is assigned.</p>
<p>The function closely adheres to the CIHI HFRS with the following adaptations:</p><ul><li><p>No look-back period: Score is computed at encounter level. The 2-year look-back in the CIHI HFRS is not implemented.
This adaptation systematically underestimates frailty but ensures comparable scores across time and hospitals considering variations in data availability</p></li>
<li><p>Score format: Integer scores are returned representing the sum of the number of frailty conditions.
These scores can be easily converted to the different formats (i.e. continuous fractions, 8 risk groups, binary) defined by CIHI HFRS.
For example, dividing the returned score by 36 (maximum number of conditions possible) gives the continuous CIHI HFRS.
Users interested in further categorizing the scores should refer to <a href="https://doi.org/10.1503/cmaj.220926" class="external-link">Amuah et al, 2023</a>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="warnings">Warnings<a class="anchor" aria-label="anchor" href="#warnings"></a></h2>
    

<p>A warning message is returned when the user-provided cohort includes encounters not qualified for assessing frailty.
Encounters below the age cutoff for frailty assessment are excluded from the results.
Encounters with no diagnosis data are excluded from the results.
The size of exclusion is detailed in the warning message.
<code>frailty_score_derived</code> for these encounters are NAs, when joining the result table to the original cohort.</p>
<p>A warning message is returned if <code>erdiag</code> is explicitly set to <code>NULL</code>.
It's possible to exclude diagnoses at the emergency department from the consideration by explicitly specifying <code>erdiag=NULL</code>.
However, excluding any types of diagnoses is not recommended.
The CIHI frailty score was developed and validated based on all diagnoses present in medical records (both NACRS and DAD).
Excluding diagnoses in NACRS was found to underestimate frailty levels (Amuah et al, 2023).</p>
    </div>
    <div class="section level2">
    <h2 id="notes">Notes<a class="anchor" aria-label="anchor" href="#notes"></a></h2>
    

<p>The original development paper of CIHI HFRS maped 595 ICD-10-CA diagnosis codes to frailty conditions.
Three codes (Z96.62, U07.1 and U07.2) were added to this mapping in the CIHI methodology notes.
This function uses the mapping of 598 ICD-10-CA diagnosis codes in the CIHI methodology notes to identify frailty conditions.</p>
<p>The previous <code>frailty_score()</code> function calculated the UK HFRS (Gilbert, 2018), and it is now deprecated.
Using a similar approach as the UK HFRS, the CIHI HFRS was developed and validated based on Canadian cohorts, making it particularly suited for GEMINI data.
The UK version remains available in <code>Rgemini</code> version 0.3.1 and earlier but will not receive future maintenance.
Users interested in the UK version should refer to the original publications for important differences in diagnostic coding practices and age threshold.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>We recommend referencing both original articles (UK HFRS and CIHI HFRS) when using this function:</p><ul><li><p>UK HFRS: Gilbert T, et al. Lancet, 2018. http://dx.doi.org/10.1016/S0140-6736(18)30668-8</p></li>
<li><p>CIHI HFRS: Amuah JE, et al. CMAJ, 2023. https://doi.org/10.1503/cmaj.220926</p></li>
<li><p><a href="https://www.cihi.ca/sites/default/files/document/cihi-hospital-frailty-risk-measure-meth-notes-en.pdf" class="external-link">CIHI methodology notes</a></p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">cohort_dum</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="op">(</span>genc_id<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, age<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">64</span>, <span class="fl">65</span>, <span class="fl">80</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ipdiag_dum</span> <span class="op">&lt;-</span> <span class="fu"><a href="dummy_diag.html">dummy_diag</a></span><span class="op">(</span>nid<span class="op">=</span><span class="fl">3</span>, nrow<span class="op">=</span><span class="fl">10</span>, ipdiagnosis<span class="op">=</span><span class="cn">TRUE</span>, pattern <span class="op">=</span> <span class="st">"C20$|R460$"</span><span class="op">)</span> <span class="co"># frailty conditions</span></span></span>
<span class="r-in"><span><span class="va">erdiag_dum</span> <span class="op">&lt;-</span> <span class="fu"><a href="dummy_diag.html">dummy_diag</a></span><span class="op">(</span>nid<span class="op">=</span><span class="fl">3</span>, nrow<span class="op">=</span><span class="fl">5</span>, ipdiagnosis<span class="op">=</span><span class="cn">FALSE</span>, pattern <span class="op">=</span> <span class="st">"M121$"</span><span class="op">)</span> <span class="co"># not a frailty condition</span></span></span>
<span class="r-in"><span><span class="fu">frailty_score</span><span class="op">(</span><span class="va">cohort_dum</span>, <span class="va">ipdiag_dum</span>, <span class="va">erdiag_dum</span>, component_wise <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by GEMINIdata.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

