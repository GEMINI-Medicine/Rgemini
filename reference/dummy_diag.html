<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function generates simulated data table resembling ipdiagnosis or erdiagnosis tables
that can be used for testing or demonstration purposes.
It internally calls sample_icd() function to sample ICD-10 codes and
accepts arguments passed to sample_icd() for customizing the sampling scheme."><title>Generate Simulated Diagnosis Data Table — dummy_diag • Rgemini</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate Simulated Diagnosis Data Table — dummy_diag"><meta property="og:description" content="This function generates simulated data table resembling ipdiagnosis or erdiagnosis tables
that can be used for testing or demonstration purposes.
It internally calls sample_icd() function to sample ICD-10 codes and
accepts arguments passed to sample_icd() for customizing the sampling scheme."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Rgemini</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/cell_suppression_and_table1.html">Cell Suppression and Table 1</a>
    <a class="dropdown-item" href="../articles/daily_census.html">Daily Census</a>
    <a class="dropdown-item" href="../articles/epicare_and_readmission.html">Episodes of care and Readmission</a>
    <a class="dropdown-item" href="../articles/icd_to_ccsr.html">ICD to CCSR</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Generate Simulated Diagnosis Data Table</h1>
      
      <div class="d-none name"><code>dummy_diag.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function generates simulated data table resembling <code>ipdiagnosis</code> or <code>erdiagnosis</code> tables
that can be used for testing or demonstration purposes.
It internally calls <code><a href="sample_icd.html">sample_icd()</a></code> function to sample ICD-10 codes and
accepts arguments passed to <code><a href="sample_icd.html">sample_icd()</a></code> for customizing the sampling scheme.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dummy_diag</span><span class="op">(</span>nid <span class="op">=</span> <span class="fl">5</span>, nrow <span class="op">=</span> <span class="fl">50</span>, ipdiagnosis <span class="op">=</span> <span class="cn">TRUE</span>, diagnosis_type <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>nid</dt>
<dd><p>(<code>integer</code>)<br> Number of unique encounter IDs (<code>genc_id</code>) to simulate. Value must be greater than 0.</p></dd>


<dt>nrow</dt>
<dd><p>(<code>integer</code>)<br> Total number of rows of the simulated long format diagnosis table. Value must be greater than or equal to that in <code>nid</code>.</p></dd>


<dt>ipdiagnosis</dt>
<dd><p>(<code>logical</code>)<br> Default to "TRUE" and returns simulated "ipdiagnosis" table.
If FALSE, returns simulated "erdiagnosis" table.
See tables in <a href="https://drive.google.com/uc?export=download&amp;id=1iwrTz1YVz4GBPtaaS9tJtU0E9Bx1QSM5" class="external-link">GEMINI Data Repository Dictionary</a>.</p></dd>


<dt>diagnosis_type</dt>
<dd><p>(<code>character vector</code>)<br> The type(s) of diagnosis to return.
Possible diagnosis types are ("M", 1", "2", "3", "4", "5", "6", "9", "W", "X", and "Y").
Regardless of <code>diagnosis_type</code> input, the <code>ipdiagnosis</code> table is defaulted to always return type "M" for the first row of each encounter.</p></dd>


<dt>...</dt>
<dd><p>Additional arguments for ICD code sampling scheme. See <code><a href="sample_icd.html">sample_icd()</a></code> for details.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>(<code>data.table</code>)<br> A data table containing simulated data of
<code>genc_id</code>, <code>(er)_diagnosis_code</code>, <code>(er)_diagnosis_type</code>, <code>hospital_num</code>,
and other fields found in the respective diagnosis table.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>To ensure simulated table resembles "ip(er)diagnosis" table, the following characteristics are applied to fields:</p>
<ul><li><p><code>genc_id</code>:  Numerical identification of encounters starting from 1. The number of unique encounters is defined by <code>nid</code>. The total number of rows is defined by <code>nrow</code>,
where the number of rows for each encounter is random, but each encounter has at least one row.</p></li>
<li><p><code>hospital_num</code>: Numerical identification of hospitals from 1 to 5. All rows of an encounter are linked to a single hospital</p></li>
<li><p><code>diagnosis_code</code>: "ipdiagnosis" table only. Simulated ICD-10 diagnosis codes. Each encounter can be associated with multiple diagnosis codes in long format.</p></li>
<li><p><code>diagnosis_type</code>: "ipdiagnosis" table only. The first row of each encounter is consistently assigned to the diagnosis type "M".
For the remaining rows, if <code>diagnosis_type</code> is specified by users, diagnosis types are sampled randomly from values provided;
if <code>diagnosis_type</code> is NULL, diagnosis types are sampled from ("1", "2", "3", "4", "5", "6", "9", "W", "X", and "Y"), with sampling probability proportionate to their prevalence in the "ipdiagnosis" table.</p></li>
<li><p><code>diagnosis_cluster</code>: "ipdiagnosis" table only. Proportionally sampled from values that have a prevalence of more than 1% in the "diagnosis_cluster" field of the "ipdiagnosis" table, which are ("", "A", "B").</p></li>
<li><p><code>diagnosis_prefix</code>: "ipdiagnosis" table only. Proportionally sampled from values that have a prevalence of more than 1% in the "diagnosis_prefix" field of the "ipdiagnosis" table, which are ("", "N", "Q", "6").</p></li>
<li><p><code>er_diagnosis_code</code>: "erdiagnosis" table only. Simulated ICD-10 diagnosis codes. Each encounter can be associated with multiple diagnosis codes in long format.</p></li>
<li><p><code>er_diagnosis_type</code>: "erdiagnosis" table only. Proportionally sampled from values that have a prevalence of more than 1% in the "er_diagnosis_type" field of the "erdiagnosis" table, which are ("", "M", "9", "3", "O").</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>The following fields <code>(er)diagnosis_code</code>, <code>(er)diagnosis_type</code>, <code>diagnosis_cluster</code>, <code>diagnosis_prefix</code> are simulated independently.
Therefore, the simulated combinations may not reflect the interrelationships of these fields in actual data.
For example, specific diagnosis codes may be associated with specific diagnosis types, diagnosis clusters, or diagnosis prefix in reality.
However, these relationships are not maintained for the purpose of generating dummy data.
Users require specific linkages between these fields should consider customizing the output data or manually generating the desired combinations.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Simulate a erdiagnosis table for 5 unique subjects with total 20 records:</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">erdiag</span> <span class="op">&lt;-</span> <span class="fu">dummy_diag</span><span class="op">(</span>nid <span class="op">=</span> <span class="fl">5</span>, nrow <span class="op">=</span> <span class="fl">20</span>, ipdiagnosis <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Simulate a ipdiagnosis table with diagnosis codes starting with "E11":</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ipdiag</span> <span class="op">&lt;-</span> <span class="fu">dummy_diag</span><span class="op">(</span>nid <span class="op">=</span> <span class="fl">5</span>, nrow <span class="op">=</span> <span class="fl">20</span>, ipdiagnosis <span class="op">=</span> <span class="cn">T</span>, pattern <span class="op">=</span> <span class="st">"^E11"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Simulate a ipdiagnosis table with random diagnosis codes in diagnosis type 3 or 6 only:</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ipdiag</span> <span class="op">&lt;-</span> <span class="fu">dummy_diag</span><span class="op">(</span>nid <span class="op">=</span> <span class="fl">5</span>, nrow <span class="op">=</span> <span class="fl">20</span>, diagnosis_type <span class="op">=</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"3"</span>, <span class="st">"6"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">diagnosis_type</span> <span class="op">!=</span> <span class="st">"M"</span><span class="op">)</span> <span class="co"># remove default rows with diagnosis_type="M" from each ID</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Simulate a ipdiagnosis table with ICD-10-CA codes:</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">drv</span> <span class="op">&lt;-</span> <span class="fu">dbDriver</span><span class="op">(</span><span class="st">"PostgreSQL"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dbcon</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="va">drv</span>,</span></span>
<span class="r-in"><span>  dbname <span class="op">=</span> <span class="st">"db"</span>,</span></span>
<span class="r-in"><span>  host <span class="op">=</span> <span class="st">"172.XX.XX.XXX"</span>,</span></span>
<span class="r-in"><span>  port <span class="op">=</span> <span class="fl">1234</span>,</span></span>
<span class="r-in"><span>  user <span class="op">=</span> <span class="fu">getPass</span><span class="op">(</span><span class="st">"Enter user:"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  password <span class="op">=</span> <span class="fu">getPass</span><span class="op">(</span><span class="st">"password"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ipdiag</span> <span class="op">&lt;-</span> <span class="fu">dummy_diag</span><span class="op">(</span>nid <span class="op">=</span> <span class="fl">5</span>, nrow <span class="op">=</span> <span class="fl">20</span>, ipdiagnosis <span class="op">=</span> <span class="cn">T</span>, dbcon <span class="op">=</span> <span class="va">dbcon</span>, source <span class="op">=</span> <span class="st">"icd_lookup"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by GEMINIdata.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

