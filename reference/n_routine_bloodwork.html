<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compute the number of routine bloodwork tests per encounter — n_routine_bloodwork • Rgemini</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute the number of routine bloodwork tests per encounter — n_routine_bloodwork"><meta name="description" content="n_routine_bloodwork returns the number of routine bloodwork (Sodium and
Hemoglobin tests) for each hospital admission. Sodium and Hemoglobin tests
are defined by OMOP codes. Sodium is the code 3019550. Hemoglobin is 3000963."><meta property="og:description" content="n_routine_bloodwork returns the number of routine bloodwork (Sodium and
Hemoglobin tests) for each hospital admission. Sodium and Hemoglobin tests
are defined by OMOP codes. Sodium is the code 3019550. Hemoglobin is 3000963."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Rgemini</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/cell_suppression_and_table1.html">Cell Suppression and Table 1</a></li>
    <li><a class="dropdown-item" href="../articles/daily_census.html">Daily Census</a></li>
    <li><a class="dropdown-item" href="../articles/epicare_and_readmission.html">Episodes of care and Readmission</a></li>
    <li><a class="dropdown-item" href="../articles/icd_to_ccsr.html">ICD to CCSR</a></li>
    <li><a class="dropdown-item" href="../articles/plotting_data_exploration.html">Plotting Functions - Easy Plots for Data Exploration</a></li>
    <li><a class="dropdown-item" href="../articles/plotting_theme.html">Plotting Functions - Themes &amp; Colors</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compute the number of routine bloodwork tests per encounter</h1>

      <div class="d-none name"><code>n_routine_bloodwork.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>n_routine_bloodwork</code> returns the number of routine bloodwork (Sodium and
Hemoglobin tests) for each hospital admission. Sodium and Hemoglobin tests
are defined by OMOP codes. Sodium is the code 3019550. Hemoglobin is 3000963.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">n_routine_bloodwork</span><span class="op">(</span><span class="va">dbcon</span>, <span class="va">cohort</span>, exclude_ed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dbcon">dbcon<a class="anchor" aria-label="anchor" href="#arg-dbcon"></a></dt>
<dd><p>(<code>DBIConnection</code>)<br>
A database connection to any GEMINI database. Only <code>DBI</code> connection is
accepted as <code>odbc</code> connection may cause connection issues in certain environment.</p></dd>


<dt id="arg-cohort">cohort<a class="anchor" aria-label="anchor" href="#arg-cohort"></a></dt>
<dd><p>(<code>data.frame</code> or <code>data.table</code>)
Cohort table with all relevant encounters of interest, where each row
corresponds to a single encounter. Must contain GEMINI Encounter ID
(<code>genc_id</code>).</p></dd>


<dt id="arg-exclude-ed">exclude_ed<a class="anchor" aria-label="anchor" href="#arg-exclude-ed"></a></dt>
<dd><p>(<code>logical</code>)
Whether to exclude tests in emergency department. When set to <code>TRUE</code>, tests
performed in ED settings (testing time before admission time) will not be
counted. When set to <code>FALSE</code>, tests will not be filtered by time and all tests
in lab table will be counted. Please be aware that this may include tests before
triage time, tests after discharge time, and tests without testing time.
Tests in ED are defined as <code>collection_date_time</code> earlier than
<code>admission_date_time</code>. Tests with missing <code>collection_date_time</code> will be
excluded when <code>exclude_ed</code> is set to <code>TRUE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>data.table object with the same number of rows as input "cohort", with
additional derived numeric field labelled as "n_routine_bloodwork_derived"</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function takes a list of admissions and an GEMINI databse connection to
generate numeric fields counting the number of Sodium and Hemoglobin tests
for each admission.</p>
<p>Lab table in the database should include field that classifies each test into
a few different categories. Therefore, this function should be run after some
standardization efforts on lab table (performed by GEMINI). Currently, the
number of routine bloodwork tests is one of the performance metrics in
<a href="https://www.hqontario.ca/Quality-Improvement/Practice-Reports/MyPractice-General-Medicine" class="external-link">MyPracticeReport</a>.</p>
<p>Function does NOT removes tests without valid numeric result value to include
all tests where blood was drawn from the patients.</p>
    </div>
    <div class="section level2">
    <h2 id="warning">Warning<a class="anchor" aria-label="anchor" href="#warning"></a></h2>


<p>Function returns data.table with id field <code>genc_id</code> and one numeric field
indicating the number of bloodwork tests per encounter. By design,
function will not return any NA values. If a <code>genc_id</code> does not have any
entries in the "lab" table, the admission gets assigned 0 number of tests.
User should check lab data coverage and decide whether the imputed <code>0</code>s are
appropriate or not.
When one tries to left-join the output of this function with another table
(another list of admissions in the left), make sure list of admissions (or
patient) aligns in both tables.</p>
<p>This function requires mappings by a Subject Matter Expert to ensure that all
tests are mapped to
3019550 - Sodium (Moles/volume) in Serum or Plasma, and
3000963 - Hemoglobin (Mass/volume) in Blood</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by GEMINIdata.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

