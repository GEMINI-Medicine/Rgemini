<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The episodes_of_care() function groups encounters that are linked via transfers into a single episode of
care. The derived episodes of care are used in the readmission() function to avoid counting transfers as
readmissions. Therefore, the criteria for transfers used in this function are based on
CIHI guidelines for readmission calculations.
However, the episodes_of_care function can also be used independently to compute episodes
of care outside of readmission.
Transfer information is obtained from the GEMINI database table lookup_transfer (see
GEMINI database schema).
By default, the function queries all encounters in the admdad table to ensure that any encounters that may be
linked via transfers are accurately grouped into the same episode of care.
Note: Users do not typically need to calculate episodes of care themselves, but rather should use the derived
epicares variable in the GEMINI database, if available. This is due to the fact that the derived variable
is calculated based on all available GEMINI encounters, and therefore, provides the most accurate identification
of episodes of care. By contrast, datacuts or cohorts that have been pre-filtered may miss certain encounters,
resulting in a loss of information. However, in certain situations, users may still find this function useful 1)
to understand how the derived variable is calculated and 2) in case users need to re-calculate episodes of care
or readmission rates for a restricted cohort (see below)."><title>Identify episodes of care — episodes_of_care • Rgemini</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Identify episodes of care — episodes_of_care"><meta property="og:description" content="The episodes_of_care() function groups encounters that are linked via transfers into a single episode of
care. The derived episodes of care are used in the readmission() function to avoid counting transfers as
readmissions. Therefore, the criteria for transfers used in this function are based on
CIHI guidelines for readmission calculations.
However, the episodes_of_care function can also be used independently to compute episodes
of care outside of readmission.
Transfer information is obtained from the GEMINI database table lookup_transfer (see
GEMINI database schema).
By default, the function queries all encounters in the admdad table to ensure that any encounters that may be
linked via transfers are accurately grouped into the same episode of care.
Note: Users do not typically need to calculate episodes of care themselves, but rather should use the derived
epicares variable in the GEMINI database, if available. This is due to the fact that the derived variable
is calculated based on all available GEMINI encounters, and therefore, provides the most accurate identification
of episodes of care. By contrast, datacuts or cohorts that have been pre-filtered may miss certain encounters,
resulting in a loss of information. However, in certain situations, users may still find this function useful 1)
to understand how the derived variable is calculated and 2) in case users need to re-calculate episodes of care
or readmission rates for a restricted cohort (see below)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Rgemini</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/cell_suppression_and_table1.html">Cell Suppression and Table 1</a>
    <a class="dropdown-item" href="../articles/daily_census.html">Daily Census</a>
    <a class="dropdown-item" href="../articles/epicare_and_readmission.html">Episodes of care and Readmission</a>
    <a class="dropdown-item" href="../articles/icd_to_ccsr.html">ICD to CCSR</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Identify episodes of care</h1>
      
      <div class="d-none name"><code>episodes_of_care.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>episodes_of_care()</code> function groups encounters that are linked via transfers into a single episode of
care. The derived episodes of care are used in the <code><a href="readmission.html">readmission()</a></code> function to avoid counting transfers as
readmissions. Therefore, the criteria for transfers used in this function are based on
<a href="https://www.cihi.ca/en/indicators/all-patients-readmitted-to-hospital" class="external-link">CIHI guidelines for readmission calculations</a>.
However, the <code>episodes_of_care</code> function can also be used independently to compute episodes
of care outside of readmission.</p>
<p>Transfer information is obtained from the GEMINI database table <code>lookup_transfer</code> (see
<a href="https://drive.google.com/uc?export=download&amp;id=1iwrTz1YVz4GBPtaaS9tJtU0E9Bx1QSM5" class="external-link">GEMINI database schema</a>).
By default, the function queries all encounters in the <code>admdad</code> table to ensure that any encounters that may be
linked via transfers are accurately grouped into the same episode of care.</p>
<p>Note: Users do not typically need to calculate episodes of care themselves, but rather should use the derived
<code>epicares</code> variable in the GEMINI database, if available. This is due to the fact that the derived variable
is calculated based on all available GEMINI encounters, and therefore, provides the most accurate identification
of episodes of care. By contrast, datacuts or cohorts that have been pre-filtered may miss certain encounters,
resulting in a loss of information. However, in certain situations, users may still find this function useful 1)
to understand how the derived variable is calculated and 2) in case users need to re-calculate episodes of care
or readmission rates for a restricted cohort (see below).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">episodes_of_care</span><span class="op">(</span><span class="va">dbcon</span>, restricted_cohort <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>dbcon</dt>
<dd><p>(<code>DBIConnection</code>)<br>
A database connection to any GEMINI database.</p></dd>


<dt>restricted_cohort</dt>
<dd><p>(<code>data.table</code> | <code>data.frame</code>)<br>
User specified cohort that is a restricted subset of all encounters in DRM table "ipadmdad" (see
<a href="https://drive.google.com/uc?export=download&amp;id=1iwrTz1YVz4GBPtaaS9tJtU0E9Bx1QSM5" class="external-link">GEMINI Data Repository Dictionary</a>).
Must contain <code>genc_id</code> as the identifier. Default is <code>Null</code>, which loads the entire "ipadmdad"
table in the user-provided database (recommended approach).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>(<code>data.frame</code>)<br></p>


<p>This function returns a <code>data.table</code> excluding records with invalid <code>patient_id_hashed</code>, <code>age &lt; 18</code>, or
<code>admit_category</code> of cadaveric donors in line with CIHI guidelines.
Nine columns are returned: <code>genc_id</code>, <code>patient_id_hashed</code>, <code>time_to_next_admission</code> (<code>numeric</code>),
<code>time_since_last_admission</code> (<code>numeric</code>), <code>AT_in_coded</code> (<code>TRUE</code>/<code>FALSE</code>), <code>AT_out_coded</code> (<code>TRUE</code>/<code>FALSE</code>),
<code>AT_in_occurred</code> (<code>TRUE</code>/<code>FALSE</code>/<code>NA</code>), <code>AT_out_occurred</code> (<code>TRUE</code>/<code>FALSE</code>/<code>NA</code>), <code>epicare</code> (<code>numeric</code>)</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>An episode of care refers to all contiguous inpatient hospitalizations admitted to any medical or intensive care
service within GEMINI. Episodes involving inter-facility transfers are linked regardless of diagnosis. An acute
care transfer is assumed to have occurred if either of the following criteria are met (see
<a href="https://www.cihi.ca/en/indicators/all-patients-readmitted-to-hospital" class="external-link">CIHI guidelines</a>:</p><ol><li><p>An admission occurs within 7 hours after discharge, regardless of whether the transfer is coded by hospitals.
OR 2) An admission occurs within 7-12 hours after discharge, and at least one hospital has coded the transfer.</p></li>
</ol><p>Acute transfers that are coded by hospitals (<code>AT_in_coded</code> and <code>AT_out_coded</code>) are defined by the DAD fields
<code>institution_from</code> and <code>institution_to</code>:
<code>AT_in_coded</code>/<code>AT_out_coded</code> is <code>TRUE</code>, when '<code>institution_from == "AT"</code> or '<code>institution_to == "AT"</code>. All
remaining entries are set to <code>FALSE</code>.</p>
<p>Acute transfers that actually occurred (<code>AT_in_occurred</code> and <code>AT_out_occurred</code>) are defined as follows:
<code>AT_in_occurred</code>/<code>AT_out_occurred</code> is <code>TRUE</code>, when admission is within 7 hrs of discharge regardless of transfer
coding, or, admission is within 7-12hrs of discharge and &gt;=1 hospital coded the transfer.
<code>AT_in_occurred</code>/<code>AT_out_occurred</code> is <code>NA</code>, when admission time since previous discharge is unknown and=1 hospital coded the transfer. This is because it cannot be determined if the transfer actually took place ornot.AT_in_occurred/AT_out_occurred is FALSE, for all remaining entries.</p>
<p>Each episode of care (<code>epicare</code>) is defined by linked transfers identified based on <code>AT_in_occurred</code>/
<code>AT_out_occurred</code>. A unique numeric ID is assigned to each unique episode of care. That is, contiguous encounters
linked by transfers will have the same <code>epicare</code> number.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>We recommend that users run this function on the entire GEMINI data set (the default setting) to ensure no
transfers to/from are omitted.
Please review the function documentation &amp; vignette carefully. A comprehensive understanding of the following
concepts is needed for proper use of the function: transfer coded vs. transfer occurred, episode of care definition.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p><a href="https://www.cihi.ca/en/indicators/all-patients-readmitted-to-hospital" class="external-link">CIHI guidelines</a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="../articles/epicare_and_readmission.html">vignette("epicare_and_readmission", package = "Rgemini")</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">drv</span> <span class="op">&lt;-</span> <span class="fu">dbDriver</span><span class="op">(</span><span class="st">"PostgreSQL"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dbcon</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="va">drv</span>,</span></span>
<span class="r-in"><span>                        dbname <span class="op">=</span> <span class="st">"db"</span>,</span></span>
<span class="r-in"><span>                        host <span class="op">=</span> <span class="st">"172.XX.XX.XXX"</span>,</span></span>
<span class="r-in"><span>                        port <span class="op">=</span> <span class="fl">1234</span>,</span></span>
<span class="r-in"><span>                        user <span class="op">=</span> <span class="fu">getPass</span><span class="op">(</span><span class="st">"Enter user:"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        password <span class="op">=</span> <span class="fu">getPass</span><span class="op">(</span><span class="st">"password"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">epicare_table</span> <span class="op">&lt;-</span> <span class="fu">episodes_of_care</span><span class="op">(</span><span class="va">dbcon</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by GEMINIdata.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

