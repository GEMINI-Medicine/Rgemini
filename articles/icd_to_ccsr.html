<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Rgemini">
<title>ICD to CCSR • Rgemini</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="ICD to CCSR">
<meta property="og:description" content="Rgemini">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Rgemini</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/cell_suppression_and_table1.html">Cell Suppression and Table 1</a>
    <a class="dropdown-item" href="../articles/daily_census.html">Daily Census</a>
    <a class="dropdown-item" href="../articles/epicare_and_readmission.html">Episodes of care and Readmission</a>
    <a class="dropdown-item" href="../articles/icd_to_ccsr.html">ICD to CCSR</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="icd_to_ccsr_files/kePrint-0.0.1/kePrint.js"></script><link href="icd_to_ccsr_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>ICD to CCSR</h1>
            
      
      
      <div class="d-none name"><code>icd_to_ccsr.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview-background">Overview &amp; background<a class="anchor" aria-label="anchor" href="#overview-background"></a>
</h2>
<p>The <code>icd_to_ccsr</code> function returns the CCSR (<a href="https://hcup-us.ahrq.gov/toolssoftware/ccsr/ccs_refined.jsp" class="external-link">Clinical
Classifications Software Refined</a>) categories for a user-specified
set of diagnosis codes.</p>
<p>CCSR provides a grouping of individual ICD-10 diagnosis codes into
broader, clinically meaningful disease categories. The original CCSR
grouping was developed based on US ICD-10-CM codes. GEMINI developed an
algorithm mapping Canadian diagnosis codes (ICD-10-CA) to CCSR
categories. The full mapping procedure is described <a href="https://www.medrxiv.org/content/10.1101/2022.11.29.22282888v1" class="external-link">here</a>.</p>
<p>The purpose of this vignette is to provide a practical guide on how
to apply the <code>icd_to_ccsr</code> function in different research
contexts, and how to further analyze the outputs provided by the
function. For more details on the inner workings on the function itself,
please refer to the function documentation
(<code><a href="../reference/icd_to_ccsr.html">?icd_to_ccsr</a></code>).</p>
</div>
<div class="section level2">
<h2 id="when-and-why-to-use-ccsr">When and why to use CCSR<a class="anchor" aria-label="anchor" href="#when-and-why-to-use-ccsr"></a>
</h2>
<p>There are currently more than 70,000 unique ICD-10 codes, with
additional country-specific variations. ICD-10 codes contain
fine-grained diagnosis details that may not be relevant for research
purposes. CCSR aggregates individual diagnosis codes into ~540
clinically relevant categories across 22 body systems. A full list of
current CCSR categories can be found <a href="https://docs.google.com/spreadsheets/d/1hxcXqunqgmsJXyFshW30y17hKfAFh3SFbBpCqBPcDNY/edit?usp=sharing" class="external-link">here</a>.</p>
<p>CCSR facilitates disease-specific healthcare utilization and outcome
as well as dimensionality reduction in statistical modeling. CCSR
categories are particularly useful when analyzing large, heterogeneous
cohorts (e.g., GIM patients). In those cases, grouping patients into
broad disease categories can provide important insights into the patient
case mix and allows for a meaningful comparison of baseline
characteristics and clinical outcomes across different patient
sub-populations (see <a href="#examples"><em>Example applications of
CCSR</em></a>) .</p>
<p><strong>When not to use CCSR:</strong></p>
<ul>
<li>For research studies that focus on a single, well-defined condition
(e.g., COVID-19), it is often better to simply filter the cohort by the
specific ICD-10-CA code(s) of interest (e.g., U071 = confirmed COVID-19)
instead of using broader disease categories that might result in a loss
of information and specificity.</li>
<li>Additionally, some conditions do not have their own CCSR category.
For example, there is no CCSR category for delirium. Instead, any
diagnosis codes associated with delirium are grouped into CCSR category
NVS011 = “Neurocognitive disorders”, together with a large range of
other neurocognitive disorders.</li>
</ul>
<p>The decision on whether to use ICD-10-CA codes vs. CCSR categories
should be made on a project-by-project basis and researchers need to
carefully consider what approach is most appropriate for their
analyses.</p>
</div>
<div class="section level2">
<h2 id="running-icd_to_ccsr-with-default-arguments">Running <code>icd_to_ccsr()</code> with default arguments<a class="anchor" aria-label="anchor" href="#running-icd_to_ccsr-with-default-arguments"></a>
</h2>
<p>To run the <code>icd_to_ccsr</code> function, users need to provide
1) a valid database connection and 2) a <code>dxtable</code> input
containing all diagnosis codes of interest. Typically,
<code>dxtable</code> is created based on the <code>ipdiagnosis</code>
table (or a subset thereof) in the GEMINI database, which contains all
diagnosis codes assigned to each <code>genc_id</code>.</p>
<p>Here is an example of how to load the relevant data and run the
<code>icd_to_ccsr</code> function with default settings:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load required libraries</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tomoakin/RPostgreSQL" class="external-link">RPostgreSQL</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dbi.r-dbi.org" class="external-link">DBI</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/wrathematics/getPass" class="external-link">getPass</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Establish database connection</span></span>
<span><span class="va">db</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="va">drv</span>,</span>
<span>                     dbname <span class="op">=</span> <span class="st">"DB_name"</span>,</span>
<span>                     host <span class="op">=</span> <span class="st">"172.XX.XX.XXX"</span>,</span>
<span>                     port <span class="op">=</span> <span class="fl">1234</span>,</span>
<span>                     user <span class="op">=</span> <span class="fu">getPass</span><span class="op">(</span><span class="st">"Enter user:"</span><span class="op">)</span>,</span>
<span>                     password <span class="op">=</span> <span class="fu">getPass</span><span class="op">(</span><span class="st">"Enter Password:"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># query relevant columns of ipdiagnosis table</span></span>
<span><span class="va">ipdiagnosis</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dbi.r-dbi.org/reference/dbGetQuery.html" class="external-link">dbGetQuery</a></span><span class="op">(</span><span class="va">db</span>, <span class="st">"SELECT genc_id, diagnosis_code, diagnosis_type FROM ipdiagnosis;"</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Run default version of icd_to_ccsr         </span></span>
<span><span class="va">ipdiagnosis_ccsr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/icd_to_ccsr.html">icd_to_ccsr</a></span><span class="op">(</span><span class="va">db</span>, dxtable <span class="op">=</span> <span class="va">ipdiagnosis</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">ipdiagnosis_ccsr</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p><strong>Mock output table of <code><a href="../reference/icd_to_ccsr.html">icd_to_ccsr()</a></code>:</strong></p>
</blockquote>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table table table-striped" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;">
genc_id
</th>
<th style="text-align:center;">
diagnosis_type
</th>
<th style="text-align:center;">
diagnosis_code
</th>
<th style="text-align:center;">
diagnosis_code_desc
</th>
<th style="text-align:center;">
ccsr_default
</th>
<th style="text-align:center;">
ccsr_default_desc
</th>
<th style="text-align:center;">
ccsr_1
</th>
<th style="text-align:center;">
ccsr_2
</th>
<th style="text-align:center;">
ccsr_3
</th>
<th style="text-align:center;">
ccsr_4
</th>
<th style="text-align:center;">
ccsr_5
</th>
<th style="text-align:center;">
ccsr_6
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
I500
</td>
<td style="text-align:center;">
Congestive heart failure
</td>
<td style="text-align:center;">
CIR019
</td>
<td style="text-align:center;">
Heart failure
</td>
<td style="text-align:center;">
CIR019
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
J159
</td>
<td style="text-align:center;">
Bacterial pneumonia, unspecified
</td>
<td style="text-align:center;">
RSP002
</td>
<td style="text-align:center;">
Pneumonia (except that caused by tuberculosis)
</td>
<td style="text-align:center;">
INF003
</td>
<td style="text-align:center;">
RSP002
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
6
</td>
<td style="text-align:center;">
F009
</td>
<td style="text-align:center;">
Dementia in Alzheimer’s disease, unspecified
</td>
<td style="text-align:center;">
NVS011
</td>
<td style="text-align:center;">
Neurocognitive disorders
</td>
<td style="text-align:center;">
NVS011
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
N390
</td>
<td style="text-align:center;">
Urinary tract infection, site not specified
</td>
<td style="text-align:center;">
GEN004
</td>
<td style="text-align:center;">
Urinary tract infections
</td>
<td style="text-align:center;">
GEN004
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
I214
</td>
<td style="text-align:center;">
Acute subendocardial myocardial infarction
</td>
<td style="text-align:center;">
CIR009
</td>
<td style="text-align:center;">
Acute myocardial infarction
</td>
<td style="text-align:center;">
CIR009
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
6
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
J440
</td>
<td style="text-align:center;">
Chronic obstructive pulmonary disease with acute lower respiratory
infection
</td>
<td style="text-align:center;">
RSP008
</td>
<td style="text-align:center;">
Chronic obstructive pulmonary disease and bronchiectasis
</td>
<td style="text-align:center;">
RSP008
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
7
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
I634
</td>
<td style="text-align:center;">
Cerebral infarction due to embolism of cerebral arteries
</td>
<td style="text-align:center;">
CIR020
</td>
<td style="text-align:center;">
Cerebral infarction
</td>
<td style="text-align:center;">
CIR020
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
8
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
N179
</td>
<td style="text-align:center;">
Acute renal failure, unspecified
</td>
<td style="text-align:center;">
GEN002
</td>
<td style="text-align:center;">
Acute and unspecified renal failure
</td>
<td style="text-align:center;">
GEN002
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
9
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
I2510
</td>
<td style="text-align:center;">
Atherosclerotic heart disease of native coronary artery
</td>
<td style="text-align:center;">
CIR011
</td>
<td style="text-align:center;">
Coronary atherosclerosis and other heart disease
</td>
<td style="text-align:center;">
CIR011
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
A4150
</td>
<td style="text-align:center;">
Sepsis due to Escherichia coli [E.coli]
</td>
<td style="text-align:center;">
INF002
</td>
<td style="text-align:center;">
Septicemia
</td>
<td style="text-align:center;">
INF002
</td>
<td style="text-align:center;">
INF003
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
</tbody>
</table>
</div>
<p>The function returns the GEMINI-derived ICD-to-CCSR mappings. Each
row in the output corresponds to a single ICD-10-CA code
(<code>diagnosis_code</code>) of a given encounter
(<code>genc_id</code>). Each diagnosis code is returned with its
description (<code>diagnosis_code_desc</code>) and one or multiple (up
to 6) CCSR categories (<code>ccsr_1</code> to <code>ccsr_6</code>). One
CCSR category has been assigned as the default category
(<code>ccsr_default</code>), which corresponds to the main disease group
and is typically the category of interest for further analyses (see <a href="#examples"><em>Example applications of CCSR</em></a>). The output
also contains the description of the CCSR default category
(<code>ccsr_default_desc</code>).</p>
<p><strong><em>Note: Although the GEMINI-derived CCSR mappings have been
validated by a medical expert, users are advised to spot-check the
output to verify that the ICD-10-CA descriptions broadly match the CCSR
default descriptions. Please inform the GEMINI team in case you identify
any inconsistencies. Moreover, please note that the mappings may be
subject to change as we continuously update our database to ensure
consistency with the official CCSR tool.</em></strong></p>
</div>
<div class="section level2">
<h2 id="optional-input-arguments">Optional input arguments<a class="anchor" aria-label="anchor" href="#optional-input-arguments"></a>
</h2>
<div class="section level3">
<h3 id="type_mrdx">
<code>type_mrdx</code><a class="anchor" aria-label="anchor" href="#type_mrdx"></a>
</h3>
<p><strong>default: <code>TRUE</code></strong></p>
<p>As illustrated in the example output table above, the function by
default only returns the most responsible diagnosis (MRDx) code per
<code>genc_id</code>. That is, only a single row per encounter is
returned, which contains the type-M (or type-6 if present) diagnosis (in
line with the <a href="https://www.cihi.ca/sites/default/files/document/hospital-standardized-mortality-ratio-meth-notes-en.pdf" class="external-link">CIHI
definition of MRDx</a>; see page 13). If users want to obtain CCSR
categories for any diagnosis types, the input argument
<code>type_mrdx</code> can be set to <code>FALSE</code>, as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ipdiagnosis_ccsr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/icd_to_ccsr.html">icd_to_ccsr</a></span><span class="op">(</span><span class="va">db</span>, <span class="va">ipdiagnosis</span>, `type_mrdx` <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> </span></code></pre></div>
<p>In that case, the function will not apply any filtering by diagnosis
type, and instead, will return all rows from the original input table.
Note that this output contains multiple rows per <code>genc_id</code>,
corresponding to the different diagnosis types. For more information on
diagnosis type coding, see <a href="https://www.cihi.ca/sites/default/files/document/diagnosis-type-definitions-en.pdf" class="external-link">here</a>.</p>
<blockquote>
<p><strong>Mock output table of <code><a href="../reference/icd_to_ccsr.html">icd_to_ccsr()</a></code> with
<code>type_mrdx = FALSE</code>:</strong></p>
</blockquote>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table table table-striped" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;">
genc_id
</th>
<th style="text-align:center;">
diagnosis_type
</th>
<th style="text-align:center;">
diagnosis_code
</th>
<th style="text-align:center;">
diagnosis_code_desc
</th>
<th style="text-align:center;">
ccsr_default
</th>
<th style="text-align:center;">
ccsr_default_desc
</th>
<th style="text-align:center;">
ccsr_1
</th>
<th style="text-align:center;">
ccsr_2
</th>
<th style="text-align:center;">
ccsr_3
</th>
<th style="text-align:center;">
ccsr_4
</th>
<th style="text-align:center;">
ccsr_5
</th>
<th style="text-align:center;">
ccsr_6
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
F067
</td>
<td style="text-align:center;">
Mild cognitive disorder
</td>
<td style="text-align:center;">
MBD013
</td>
<td style="text-align:center;">
Miscellaneous mental and behavioral disorders/conditions
</td>
<td style="text-align:center;">
MBD013
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
I4890
</td>
<td style="text-align:center;">
Atrial fibrillation, unspecified
</td>
<td style="text-align:center;">
CIR017
</td>
<td style="text-align:center;">
Cardiac dysrhythmias
</td>
<td style="text-align:center;">
CIR017
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
I500
</td>
<td style="text-align:center;">
Congestive heart failure
</td>
<td style="text-align:center;">
CIR019
</td>
<td style="text-align:center;">
Heart failure
</td>
<td style="text-align:center;">
CIR019
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
C793
</td>
<td style="text-align:center;">
Secondary malignant neoplasm of brain and cerebral meninges
</td>
<td style="text-align:center;">
NEO070
</td>
<td style="text-align:center;">
Secondary malignancies
</td>
<td style="text-align:center;">
NEO070
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
G4731
</td>
<td style="text-align:center;">
Sleep apnoea, central
</td>
<td style="text-align:center;">
NVS016
</td>
<td style="text-align:center;">
Sleep wake disorders
</td>
<td style="text-align:center;">
NVS016
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
J159
</td>
<td style="text-align:center;">
Bacterial pneumonia, unspecified
</td>
<td style="text-align:center;">
RSP002
</td>
<td style="text-align:center;">
Pneumonia (except that caused by tuberculosis)
</td>
<td style="text-align:center;">
INF003
</td>
<td style="text-align:center;">
RSP002
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
Z951
</td>
<td style="text-align:center;">
Presence of aortocoronary bypass graft
</td>
<td style="text-align:center;">
CIR011
</td>
<td style="text-align:center;">
Coronary atherosclerosis and other heart disease
</td>
<td style="text-align:center;">
CIR011
</td>
<td style="text-align:center;">
FAC009
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
6
</td>
<td style="text-align:center;">
F009
</td>
<td style="text-align:center;">
Dementia in Alzheimer’s disease, unspecified
</td>
<td style="text-align:center;">
NVS011
</td>
<td style="text-align:center;">
Neurocognitive disorders
</td>
<td style="text-align:center;">
NVS011
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
E1042
</td>
<td style="text-align:center;">
Type 1 diabetes mellitus with autonomic neuropathy
</td>
<td style="text-align:center;">
END003
</td>
<td style="text-align:center;">
Diabetes mellitus with complication
</td>
<td style="text-align:center;">
END003
</td>
<td style="text-align:center;">
END004
</td>
<td style="text-align:center;">
NVS015
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
N390
</td>
<td style="text-align:center;">
Urinary tract infection, site not specified
</td>
<td style="text-align:center;">
GEN004
</td>
<td style="text-align:center;">
Urinary tract infections
</td>
<td style="text-align:center;">
GEN004
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="unique_mrdx">
<code>unique_mrdx</code><a class="anchor" aria-label="anchor" href="#unique_mrdx"></a>
</h3>
<p><strong>default: <code>FALSE</code></strong></p>
<p>Typically, each encounter should have exactly one MRDx code. However,
in certain circumstances, the function may identify encounters with
multiple MRDx codes (e.g., two type-M diagnosis codes). This could be
due to data quality issues, or it can happen if users combine in-patient
and ED diagnoses or create a long-table format when pre-processing their
data. By default, the function will show a warning if any encounters
with multiple MRDx codes are found, but it will run as usual and return
multiple rows for any encounters with more than 1 MRDx. If users want
the requirement for a unique MRDx to be strict, they can specify
<code>unique_mrdx = TRUE</code>, which will cause the function to
terminate if any encounters with multiple MRDx codes are found. In this
case, users are advised to carefully check their input table and remove
any entries causing the error message. Note that this input argument is
only relevant if <code>type_mrdx</code> is set to <code>TRUE</code>,
otherwise, it will be ignored.</p>
</div>
<div class="section level3">
<h3 id="replace_invalidpdx">
<code>replace_invalidpdx</code><a class="anchor" aria-label="anchor" href="#replace_invalidpdx"></a>
</h3>
<p><strong>default = <code>TRUE</code></strong></p>
<p>Some diagnosis codes will be returned with
<code>ccsr_default = "XXX000"</code>, which indicates that the diagnosis
code “is unacceptable as a principal diagnosis” (invalid PDX) according
to US diagnostic coding following Medicare Code Edits guidelines (see <a href="https://hcup-us.ahrq.gov/toolssoftware/ccsr/DXCCSR-User-Guide-v2023-1.pdf" class="external-link">here</a>
for more details). Since the CCSR default category is meant to reflect
the main disease category (~MRDx), the official CCSR tool sets
<code>ccsr_default</code> to <code>"XXX000"</code> for any codes that
are not valid as a PDX/MRDx.</p>
<p>Many of the external cause diagnosis codes
(<code>diagnosis_type = 9</code>) fall into that category as they are
not meant to be coded as MRDx, and thus, will be returned with
<code>ccsr_default = "XXX000"</code>. Note that these codes still have
valid <code>ccsr_1</code> (to <code>ccsr_6</code>) categories:</p>
<blockquote>
<p><strong>Example codes with
<code>ccsr_default = "XXX000"</code>:</strong></p>
</blockquote>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table table table-striped" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;">
genc_id
</th>
<th style="text-align:center;">
diagnosis_type
</th>
<th style="text-align:center;">
diagnosis_code
</th>
<th style="text-align:center;">
diagnosis_code_desc
</th>
<th style="text-align:center;">
ccsr_default
</th>
<th style="text-align:center;">
ccsr_default_desc
</th>
<th style="text-align:center;">
ccsr_1
</th>
<th style="text-align:center;">
ccsr_2
</th>
<th style="text-align:center;">
ccsr_3
</th>
<th style="text-align:center;">
ccsr_4
</th>
<th style="text-align:center;">
ccsr_5
</th>
<th style="text-align:center;">
ccsr_6
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
11
</td>
<td style="text-align:center;">
9
</td>
<td style="text-align:center;">
V180
</td>
<td style="text-align:center;">
Pedal cyclist injured in noncollision transport accident, driver,
nontraffic accident
</td>
<td style="text-align:center;">
XXX000
</td>
<td style="text-align:center;">
Code is unacceptable as a principal diagnosis PDX (only used for the
inpatient default CCSR)
</td>
<td style="text-align:center;">
EXT008
</td>
<td style="text-align:center;">
EXT020
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
9
</td>
<td style="text-align:center;">
W01
</td>
<td style="text-align:center;">
Fall on same level from slipping, tripping and stumbling
</td>
<td style="text-align:center;">
XXX000
</td>
<td style="text-align:center;">
Code is unacceptable as a principal diagnosis PDX (only used for the
inpatient default CCSR)
</td>
<td style="text-align:center;">
EXT003
</td>
<td style="text-align:center;">
EXT020
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
13
</td>
<td style="text-align:center;">
9
</td>
<td style="text-align:center;">
Y04
</td>
<td style="text-align:center;">
Assault by bodily force
</td>
<td style="text-align:center;">
XXX000
</td>
<td style="text-align:center;">
Code is unacceptable as a principal diagnosis PDX (only used for the
inpatient default CCSR)
</td>
<td style="text-align:center;">
EXT016
</td>
<td style="text-align:center;">
EXT022
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
14
</td>
<td style="text-align:center;">
9
</td>
<td style="text-align:center;">
Y832
</td>
<td style="text-align:center;">
Surgical operation with anastomosis, bypass or graft as the cause of
abnormal reaction or later complication, without mention of misadventure
at the time of the procedure
</td>
<td style="text-align:center;">
XXX000
</td>
<td style="text-align:center;">
Code is unacceptable as a principal diagnosis PDX (only used for the
inpatient default CCSR)
</td>
<td style="text-align:center;">
EXT025
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
9
</td>
<td style="text-align:center;">
Y848
</td>
<td style="text-align:center;">
Other medical procedures as the cause of abnormal reaction or later
complication, without mention of misadventure at the time of the
procedure
</td>
<td style="text-align:center;">
XXX000
</td>
<td style="text-align:center;">
Code is unacceptable as a principal diagnosis PDX (only used for the
inpatient default CCSR)
</td>
<td style="text-align:center;">
EXT025
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
</tbody>
</table>
</div>
<p>When <code>type_mrdx = TRUE</code>, invalid PDX categories are
typically rare. However, due to country-specific differences in coding
and mapping ambiguity for some ICD-10-CA codes, users may find that even
some type M/6 (MRDx) codes are returned with CCSR default category
<code>"XXX000"</code>. This usually only affects a few injury/poisoning
codes or codes starting with “Z”, including pregnancy-related,
procedural, or health status/personal history codes:</p>
<blockquote>
<p><strong>Example MRDx codes with
<code>ccsr_default = "XXX000"</code>:</strong></p>
</blockquote>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table table table-striped" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;">
genc_id
</th>
<th style="text-align:center;">
diagnosis_type
</th>
<th style="text-align:center;">
diagnosis_code
</th>
<th style="text-align:center;">
diagnosis_code_desc
</th>
<th style="text-align:center;">
ccsr_default
</th>
<th style="text-align:center;">
ccsr_default_desc
</th>
<th style="text-align:center;">
ccsr_1
</th>
<th style="text-align:center;">
ccsr_2
</th>
<th style="text-align:center;">
ccsr_3
</th>
<th style="text-align:center;">
ccsr_4
</th>
<th style="text-align:center;">
ccsr_5
</th>
<th style="text-align:center;">
ccsr_6
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
16
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
Z37000
</td>
<td style="text-align:center;">
Single live birth, pregnancy resulting from both spontaneous ovulation
and conception
</td>
<td style="text-align:center;">
XXX000
</td>
<td style="text-align:center;">
Code is unacceptable as a principal diagnosis PDX (only used for the
inpatient default CCSR)
</td>
<td style="text-align:center;">
PRG030
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
17
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
Z588
</td>
<td style="text-align:center;">
Other problems related to physical environment
</td>
<td style="text-align:center;">
XXX000
</td>
<td style="text-align:center;">
Code is unacceptable as a principal diagnosis PDX (only used for the
inpatient default CCSR)
</td>
<td style="text-align:center;">
EXT011
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
</tbody>
</table>
</div>
<p>The invalid PDX category is in line with coding for insurance
purposes, however, it typically is not meaningful in research contexts
and can result in a loss of information. For example, in the scenario
shown above, users may still want to group the patient with
<code>diagnosis_code = "Z37000"</code> into a relevant,
pregnancy-related CCSR category. In fact, the code has been assigned a
CCSR 1 category of <code>"PRG030"</code> (“Maternal outcome of
delivery”), which contains useful information about the encounter.</p>
<p>The function therefore provides an optional input argument
<code>replace_invalidpdx</code> to overwrite any <code>"XXX000"</code>
values with one of the (valid) CCSR 1-6 categories. In fact,
<code>replace_invalidpdx</code> is set to <code>TRUE</code> by default
given that for most research projects, the distinction between valid
vs. invalid principle diagnosis coding may not be relevant (or if it is,
should be determined based on <code>diagnosis_type</code> instead of
mapped CCSR category). Additionally, users may specifically be
interested in CCSR groups for <strong>any</strong> diagnosis types
(<code>type_mrdx = FALSE</code>), in which case the definition of CCSR
default categories as valid vs. invalid PDX categories is not
meaningful.</p>
<p>As an example, when <code>replace_invalidpdx</code> is set to
<code>TRUE</code> (default), <code>"XXX000"</code> is replaced with
<code>"PRG030"</code> for diagnosis code <code>"Z37000"</code>:</p>
<blockquote>
<p><strong>Example output illustrating
<code>replace_invalidpdx = TRUE</code>:</strong></p>
</blockquote>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table table table-striped" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;">
genc_id
</th>
<th style="text-align:center;">
diagnosis_type
</th>
<th style="text-align:center;">
diagnosis_code
</th>
<th style="text-align:center;">
diagnosis_code_desc
</th>
<th style="text-align:center;">
ccsr_default
</th>
<th style="text-align:center;">
ccsr_default_desc
</th>
<th style="text-align:center;">
ccsr_1
</th>
<th style="text-align:center;">
ccsr_2
</th>
<th style="text-align:center;">
ccsr_3
</th>
<th style="text-align:center;">
ccsr_4
</th>
<th style="text-align:center;">
ccsr_5
</th>
<th style="text-align:center;">
ccsr_6
</th>
</tr></thead>
<tbody><tr>
<td style="text-align:center;">
16
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
Z37000
</td>
<td style="text-align:center;">
Single live birth, pregnancy resulting from both spontaneous ovulation
and conception
</td>
<td style="text-align:center;">
PRG030
</td>
<td style="text-align:center;">
Maternal outcome of delivery
</td>
<td style="text-align:center;">
PRG030
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr></tbody>
</table>
</div>
<p><strong><em>Note:</em></strong> Invalid PDX CCSR categories are
replaced as follows: For any codes that have only been mapped to a
single CCSR category, <code>"XXX000"</code> will be replace with the
<code>ccsr_1</code> category. For any codes that have been mapped to
multiple CCSR categories, the function chooses the CCSR 1-6 category
that is the most common default category among diagnosis codes of the
same ICD-10 chapter (same first 3 characters). Otherwise, if this would
still result in mapping to <code>"XXX000"</code> (e.g., if all codes of
the same chapter have been mapped to <code>"XXX000"</code>), the
function defaults to <code>ccsr_1</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="missing-vs--unmapped-diagnosis-codes">Missing vs. unmapped diagnosis codes<a class="anchor" aria-label="anchor" href="#missing-vs--unmapped-diagnosis-codes"></a>
</h2>
<p>Some entries in the output table might have missing CCSR default
categories (i.e., <code>is.na(ccsr_default)</code>). This can be due to
either 1) missing/empty diagnosis codes or 2) diagnosis codes that have
not been mapped to any CCSR categories. Users can distinguish between
the two scenarios based on <code>ccsr_default_descr</code>, which will
be either 1) <code>"Missing diagnosis code"</code> or 2)
<code>"Unmapped"</code>.</p>
<div class="section level3">
<h3 id="missing-diagnosis-codes">Missing diagnosis codes<a class="anchor" aria-label="anchor" href="#missing-diagnosis-codes"></a>
</h3>
<p>Diagnosis codes that are returned with
<code>ccsr_default_desc = "Missing diagnosis code"</code> refer to
entries in the <code>dxtable</code> input where the
<code>diagnosis_code</code> was <code>NA</code> or <code>NULL</code>,
for example:</p>
<blockquote>
<p><strong>Mock output table showing missing diagnosis
codes:</strong></p>
</blockquote>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table table table-striped" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;">
genc_id
</th>
<th style="text-align:center;">
diagnosis_type
</th>
<th style="text-align:center;">
diagnosis_code
</th>
<th style="text-align:center;">
diagnosis_code_desc
</th>
<th style="text-align:center;">
ccsr_default
</th>
<th style="text-align:center;">
ccsr_default_desc
</th>
<th style="text-align:center;">
ccsr_1
</th>
<th style="text-align:center;">
ccsr_2
</th>
<th style="text-align:center;">
ccsr_3
</th>
<th style="text-align:center;">
ccsr_4
</th>
<th style="text-align:center;">
ccsr_5
</th>
<th style="text-align:center;">
ccsr_6
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
18
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
Missing diagnosis code
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
19
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
Missing diagnosis code
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
Missing diagnosis code
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
</tbody>
</table>
</div>
<p>This is typically due to data quality issues and should only affect a
very small number of encounters.</p>
<p>If <code>type_mrdx</code> is set to <code>TRUE</code>, encounters
that do not have any rows containing a type-6 or type-M diagnosis will
also be returned with
<code>ccsr_default = "Missing diagnosis code"</code> (and
<code>diagnosis_code = NA</code>). This is to ensure that the number of
rows in the output table corresponds to the number of unique encounters
in the provided <code>dxtable</code> input. The function will
additionally show a warning message to inform users if any encounters
with missing MRDx codes have been found.</p>
</div>
<div class="section level3">
<h3 id="unmapped-diagnosis-codes">Unmapped diagnosis codes<a class="anchor" aria-label="anchor" href="#unmapped-diagnosis-codes"></a>
</h3>
<p>For rows where <code>ccsr_default = "Unmapped"</code>, a valid
ICD-10-CA diagnosis code exists, however, that code has not been mapped
to any CCSR categories (yet). For example:</p>
<blockquote>
<p><strong>Mock output table showing unmapped diagnosis
codes:</strong></p>
</blockquote>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table table table-striped" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;">
genc_id
</th>
<th style="text-align:center;">
diagnosis_type
</th>
<th style="text-align:center;">
diagnosis_code
</th>
<th style="text-align:center;">
diagnosis_code_desc
</th>
<th style="text-align:center;">
ccsr_default
</th>
<th style="text-align:center;">
ccsr_default_desc
</th>
<th style="text-align:center;">
ccsr_1
</th>
<th style="text-align:center;">
ccsr_2
</th>
<th style="text-align:center;">
ccsr_3
</th>
<th style="text-align:center;">
ccsr_4
</th>
<th style="text-align:center;">
ccsr_5
</th>
<th style="text-align:center;">
ccsr_6
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
21
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
98633
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
Unmapped
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
22
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
U85
</td>
<td style="text-align:center;">
Resistance to antineoplastic drugs
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
Unmapped
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
9
</td>
<td style="text-align:center;">
Y466
</td>
<td style="text-align:center;">
Other and unspecified antiepileptics causing adverse effect in
therapeutic use
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
Unmapped
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
24
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
T062
</td>
<td style="text-align:center;">
Injuries of nerves involving multiple body regions
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
Unmapped
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
D302
</td>
<td style="text-align:center;">
Benign neoplasm of ureter
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
Unmapped
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
26
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
U075
</td>
<td style="text-align:center;">
Personal history of COVID-19
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
Unmapped
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
27
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
E1330
</td>
<td style="text-align:center;">
Other specified diabetes mellitus with background retinopathy
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
Unmapped
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
</tbody>
</table>
</div>
<p>Type-4 morphology codes (e.g., row 1 in example output above) will
always be returned as <code>"Unmapped"</code> since they are numeric
codes based on ICD-0 (oncology) diagnoses, which are not meant to be
mapped to CCSR categories.</p>
<p>For any other diagnosis types, codes that are returned as
<code>"Unmapped"</code> have simply not been mapped by the GEMINI team
yet. We constantly update our database to add new ICD-10-CA codes and
strive to provide mappings for as many codes as possible. However, our
team prioritizes mapping MRDx diagnosis codes. Therefore, unmapped codes
are more likely to occur when users run the <code><a href="../reference/icd_to_ccsr.html">icd_to_ccsr()</a></code>
function with <code>type_mrdx = FALSE</code>. If users plan to analyse
CCSR categories for non-MRDx codes and find that a high percentage of
codes is unmapped, we recommend using our publicly available <a href="https://github.com/GEMINI-Medicine/gemini-ccsr" class="external-link">GEMINI CCSR
mapping algorithm</a>, which enables (semi-)automatic ICD-to-CCSR
mapping. For more details on how to use the algorithm, please get in
touch with the GEMINI team.</p>
</div>
</div>
<div class="section level2">
<h2 id="examples">Example applications of CCSR<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>The examples below illustrate a few common applications of CCSR in
clinical research.</p>
<div class="section level3">
<h3 id="patient-case-mix">Patient case mix<a class="anchor" aria-label="anchor" href="#patient-case-mix"></a>
</h3>
<p>Analyzing the frequency of each CCSR default category in large,
heterogeneous cohorts can provide important insights into the patient
case mix. For example, when running the <code><a href="../reference/icd_to_ccsr.html">icd_to_ccsr()</a></code>
function on MRDx codes of a typical GIM cohort, the 5 most common CCSR
default categories among GIM patients can be obtained as follows:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">ccsr_summary</span> <span class="op">&lt;-</span> <span class="va">ipdiagnosis_ccsr</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span>N <span class="op">=</span> <span class="va">.N</span>, `% patients` <span class="op">=</span> <span class="va">.N</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">ipdiagnosis_ccsr</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span><span class="op">)</span>, </span>
<span>                                 by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ccsr_default"</span>,<span class="st">"ccsr_default_desc"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">ccsr_summary</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">N</span>, decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">]</span>,<span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p><strong>Mock output table showing top 5 most frequent CCSR default
categories in a GIM cohort:</strong></p>
</blockquote>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table table table-striped" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;">
ccsr_default
</th>
<th style="text-align:center;">
ccsr_default_desc
</th>
<th style="text-align:center;">
N
</th>
<th style="text-align:center;">
% patients
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
CIR019
</td>
<td style="text-align:center;">
Heart failure
</td>
<td style="text-align:center;">
4775
</td>
<td style="text-align:center;">
4.98
</td>
</tr>
<tr>
<td style="text-align:center;">
RSP002
</td>
<td style="text-align:center;">
Pneumonia (except that caused by tuberculosis)
</td>
<td style="text-align:center;">
4007
</td>
<td style="text-align:center;">
4.23
</td>
</tr>
<tr>
<td style="text-align:center;">
RSP008
</td>
<td style="text-align:center;">
Chronic obstructive pulmonary disease and bronchiectasis
</td>
<td style="text-align:center;">
3760
</td>
<td style="text-align:center;">
3.85
</td>
</tr>
<tr>
<td style="text-align:center;">
GEN004
</td>
<td style="text-align:center;">
Urinary tract infections
</td>
<td style="text-align:center;">
3561
</td>
<td style="text-align:center;">
3.51
</td>
</tr>
<tr>
<td style="text-align:center;">
NVS011
</td>
<td style="text-align:center;">
Neurocognitive disorders
</td>
<td style="text-align:center;">
2981
</td>
<td style="text-align:center;">
3.23
</td>
</tr>
</tbody>
</table>
</div>
<p>Users could additionally analyse the cumulative percentage of
patients across CCSR categories to determine the number of unique
disease categories accounting for 50% (or 75%/90%…) of patients. This
provides a useful quantitative measure of the breadth of conditions
managed at a given hospital/medical ward.</p>
</div>
<div class="section level3">
<h3 id="risk-adjustment-using-ccsr">Risk adjustment using CCSR<a class="anchor" aria-label="anchor" href="#risk-adjustment-using-ccsr"></a>
</h3>
<p>When comparing clinical outcomes (e.g., mortality or readmission
rates) across patients/physicians/hospitals, it is important to consider
patients’ baseline characteristics, such as diagnosis group. Risk
adjustment could be performed by including CCSR categories as predictors
in regression models, or splitting cohorts into different subgroups
based on patients’ CCSR default category. Risk adjustment by CCSR could
also be used when analyzing quality of care, resource usage, healthcare
costs or other indicators.</p>
<p>As an example, see <a href="https://link.springer.com/article/10.1007/s11606-023-08245-w" class="external-link">Roberts
et al. (2023)</a> performing risk adjustment using CCSR in GEMINI
data.</p>
</div>
<div class="section level3">
<h3 id="filtering-cohorts-by-ccsr-category">Filtering cohorts by CCSR category<a class="anchor" aria-label="anchor" href="#filtering-cohorts-by-ccsr-category"></a>
</h3>
<p>If users want to filter their cohort by a certain diagnosis group,
they could choose the relevant CCSR category(s) from <a href="https://docs.google.com/spreadsheets/d/1hxcXqunqgmsJXyFshW30y17hKfAFh3SFbBpCqBPcDNY/edit?usp=sharing" class="external-link">this
list</a> and then filter by the corresponding CCSR category
number(s).</p>
<p>For example, to filter for any <code>genc_ids</code> with Septicemia,
the relevant CCSR category is INF002. Users have 2 options:</p>
<ol style="list-style-type: decimal">
<li>Filter encounters where INF002 is the <strong>CCSR default
category</strong>:</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># option 1: filter by CCSR default category only</span></span>
<span><span class="va">ipdiagnosis_ccsr</span> <span class="op">&lt;-</span> <span class="va">ipdiagnosis_ccsr</span><span class="op">[</span><span class="va">ccsr_default</span><span class="op">==</span><span class="st">"INF002"</span>,<span class="op">]</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Filter encounters where INF002 is among <strong>any of the CCSR 1-6
categories (recommended)</strong>:</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># option 2: filter by CCSR 1-6 (includes default category)</span></span>
<span><span class="va">ipdiagnosis_ccsr</span> <span class="op">&lt;-</span> <span class="va">ipdiagnosis_ccsr</span><span class="op">[</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">ipdiagnosis_ccsr</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ccsr_1"</span>,<span class="st">"ccsr_2"</span>,<span class="st">"ccsr_3"</span>,<span class="st">"ccsr_4"</span>,<span class="st">"ccsr_5"</span>,<span class="st">"ccsr_6"</span><span class="op">)</span><span class="op">]</span> <span class="op">==</span> <span class="st">"INF002"</span>, </span>
<span>          na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span>,<span class="op">]</span></span></code></pre></div>
<p>The difference between the two approaches is that the CCSR default
category is meant as the main disease category. Focusing on that single
category is usually only relevant if users need to ensure that each
diagnosis code has exactly one corresponding CCSR category. For example,
in the analyses in the previous section, patients are grouped according
to their default CCSR category because we don’t want to double-count
patients whose MRDx code has been mapped to more than 1 CCSR category.
By contrast, when filtering for patients who fit a certain CCSR
criterion, a 1:1 mapping between diagnosis code and CCSR categories is
usually not required. Instead, we likely want to capture all patients
who have the CCSR category of interest among <em>any</em> of the mapped
CCSR 1-6 categories.</p>
<p>In addition to that, the official CCSR tool assigns default
categories based on hierarchical rules, i.e., some CCSR categories are
less likely to be a default category than others. For example, for
diagnosis codes related to diabetes, the distinction between diabetes
with vs. without complications (CCSR END003 vs. END002) takes priority
over the distinction between type 1 vs. type 2 diabetes (CCSR END004
vs. END005). As a result, if researchers want to filter for encounters
with type-1 diabetes, searching by CCSR default category alone would
result in many relevant patients being missed because most diabetes
patients have CCSR default categories END002 or END003 (instead of
END004/END005). Therefore, the general recommendation when filtering
cohorts by CCSR category is to use all CCSR 1-6 categories (option 2
shown above), instead of filtering by CCSR default alone.</p>
<p><strong>Additional notes on filtering by CCSR category:</strong></p>
<ul>
<li>When investigating specific, well-defined diseases, it may be more
appropriate to filter by individual ICD-10-CA codes instead of relying
on broad CCSR categories.</li>
<li>If filtering by CCSR category is appropriate, users should still
verify that the individual ICD-10-CA codes that are included are
relevant for the research question.</li>
<li>It is recommended to always filter by CCSR category number
(<code>"INF002"</code>) instead of the description
(<code>"Septicemia"</code>) as the category descriptions are subject to
small changes with newer releases of the official CCSR tool.</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="additional-considerations">Additional considerations<a class="anchor" aria-label="anchor" href="#additional-considerations"></a>
</h2>
<div class="section level3">
<h3 id="initial-vs--subsequent-encounters">Initial vs. subsequent encounters<a class="anchor" aria-label="anchor" href="#initial-vs--subsequent-encounters"></a>
</h3>
<p>For some diagnoses (e.g., injuries or poisoning), the US ICD-10 codes
contain a suffix that differentiates between initial vs. subsequent
encounters. As a result, some CCSR categories make that same
distinction. For example: INJ018 = “Crushing injury, initial encounter”,
whereas INJ055 = “Crushing injury, subsequent encounter”. However,
Canadian ICD-10 codes do not differentiate between initial
vs. subsequent encounters. Therefore, ICD-10-CA codes were mapped to
“initial encounter” by default. If researchers are interested in
analyzing patients’ medical history, they <strong>should not rely on the
CCSR description to differentiate between initial vs. subsequent
encounters</strong>, and instead, should look at the encounter history
of a given patient within the database. More generally, it means that
any CCSR description of “initial” or “subsequent” encounter in the
GEMINI database should be ignored (i.e., INJ018 = INJ055 = “Crushing
injury”).</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by GEMINIdata.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
